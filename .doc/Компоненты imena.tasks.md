# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `imena.tasks`

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–∞—Ç–∞–ª–æ–≥–∞)
- [–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–¥–µ—Ç–∞–ª—å–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- [–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–º–æ–¥—É–ª–µ–º)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## üéØ –û–±–∑–æ—Ä

–ö–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á –≤ —Å–∏—Å—Ç–µ–º–µ Bitrix24. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —è–≤–ª—è—é—Ç—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Bitrix –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥—É–ª–µ–º `imena.tasks.templates`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü Bitrix.

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix24 D7 API**
- ‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏** —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `imena.tasks.templates`
- ‚úÖ **AJAX-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** —á–µ—Ä–µ–∑ `ImenaTemplateAccessController`
- ‚úÖ **Entity Editor** –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ **Grid –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ **SidePanel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ Bitrix24

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Bitrix** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç —Å–≤–æ—é –∑–∞–¥–∞—á—É
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ Bitrix
4. **CQRS –ø–∞—Ç—Ç–µ—Ä–Ω** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ AJAX-–¥–µ–π—Å—Ç–≤–∏—è
5. **Dependency Injection** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### –°–ª–æ–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              UI Layer (Templates)                      ‚îÇ
‚îÇ  (PHP —à–∞–±–ª–æ–Ω—ã, JavaScript, CSS)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Component Layer                               ‚îÇ
‚îÇ  (ImenaTaskTemplateComponent, etc.)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Controller Layer (AJAX)                        ‚îÇ
‚îÇ  (Controllerable interface, Actions)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Service Layer                                  ‚îÇ
‚îÇ  (ImenaTemplateManager, TemplateProvider)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Data Access Layer                              ‚îÇ
‚îÇ  (TemplateTable, ORM)                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Database                                       ‚îÇ
‚îÇ  (b_imena_tasks_templates_*)                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
imena.tasks/
‚îú‚îÄ‚îÄ templates.list/              # –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (918 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ component.php            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php           # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php          # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ ajax.php                 # AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .default/
‚îÇ   ‚îú‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ru/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ en/
‚îÇ   ‚îî‚îÄ‚îÄ images/                  # –ò–∫–æ–Ω–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ task.template/               # –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (1352 —Å—Ç—Ä–æ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ component.php            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .default/            # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ view/                # –®–∞–±–ª–æ–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ flow/                # –®–∞–±–ª–æ–Ω –¥–ª—è Flow –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ widget.member.selector/      # –í–∏–¥–∂–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —à–∞–±–ª–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (225 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ ajax.php                 # AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ view/
‚îÇ
‚îú‚îÄ‚îÄ widget.template.access/      # –í–∏–¥–∂–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (174 —Å—Ç—Ä–æ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ template.selector/           # –í–∏–¥–∂–µ—Ç –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ component.php            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å)
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îî‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. `templates.list` - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:templates.list`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø–æ–∏—Å–∫–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaTasksTemplatesListComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksBaseComponent`  
**–†–µ–∞–ª–∏–∑—É–µ—Ç:** `\Bitrix\Main\Errorable`, `\Bitrix\Main\Engine\Contract\Controllerable`

**–†–∞–∑–º–µ—Ä:** 918 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **Grid –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏  
‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ ID, –Ω–∞–∑–≤–∞–Ω–∏—é, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é, —Å–æ–∑–¥–∞—Ç–µ–ª—é, –≥—Ä—É–ø–ø–µ, —Ç–µ–≥–∞–º  
‚úÖ **–ü–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —à–∞–±–ª–æ–Ω–∞  
‚úÖ **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–æ–ª—è–º (ID, –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)  
‚úÖ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —Ä–∞–∑–º–µ—Ä–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã (5, 10, 25, 50, 100)  
‚úÖ **–ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** —à–∞–±–ª–æ–Ω–æ–≤  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π (UF)**  

#### AJAX-–¥–µ–π—Å—Ç–≤–∏—è

```php
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
public function getListAction($select = null, $order = null, $filter = null, $limit = self::DEFAULT_LIMIT)

// –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
public function deleteAction($templateId)

// –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
public function batchDeleteAction($ids, $isAllSelected = false)
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TASK_TYPE` | LIST | –¢–∏–ø –∑–∞–¥–∞—á–∏ (group/user) | - |
| `TASK_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è ID –∑–∞–¥–∞—á–∏ | - |
| `USER_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | - |
| `GROUP_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è ID –≥—Ä—É–ø–ø—ã | - |
| `ACTION_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è | - |
| `PAGE_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã | - |
| `ITEMS_COUNT` | STRING | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ | 20 |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:templates.list",
    "",
    [
        "TASK_TYPE" => "user",
        "TASK_VAR" => "task_id",
        "ITEMS_COUNT" => 25,
        "PATH_TO_USER_TASKS" => "/company/personal/user/#user_id#/tasks/",
        "PATH_TO_USER_TASKS_TASK" => "/company/personal/user/#user_id#/tasks/task/#task_id#/",
    ]
);
?>
```

#### JavaScript API

```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
BX.Main.gridManager.reload('TASKS_TEMPLATES_FILTER_ID');

// –í—ã–∑–æ–≤ AJAX-–¥–µ–π—Å—Ç–≤–∏—è
BX.ajax.runComponentAction('imena.tasks:templates.list', 'delete', {
    mode: 'class',
    data: { templateId: 123 }
}).then(function(response) {
    if (response.data.success) {
        // –û–±–Ω–æ–≤–∏—Ç—å Grid
    }
});
```

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `Bitrix\Main\Grid` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Grid
- `Bitrix\Main\UI\Filter` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `Imena\Tasks\Templates\Manager\ImenaTemplateManager` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- `Bitrix\Tasks\Integration\Bitrix24` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

#### –°—Ç–∞—Ç—É—Å: ‚úÖ 95% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (>1000 –∑–∞–ø–∏—Å–µ–π)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º

---

### 2. `task.template` - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:task.template`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–æ–º —á–µ—Ä–µ–∑ Entity Editor –∏ SidePanel.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaTaskTemplateComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksBaseComponent`  
**–†–µ–∞–ª–∏–∑—É–µ—Ç:** `Errorable`, `Controllerable`

**–†–∞–∑–º–µ—Ä:** 1352 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞** (ID = 0)  
‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞**  
‚úÖ **–ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞** –≤ —Ä–µ–∂–∏–º–µ —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è  
‚úÖ **Entity Editor** –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π  
‚úÖ **SidePanel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏** —á–µ—Ä–µ–∑ `widget.member.selector`  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏** —Å AJAX —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏**  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º**  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞** —á–µ—Ä–µ–∑ `widget.template.access`  
‚úÖ **–°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏** —á–µ—Ä–µ–∑ `template.selector`  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda** –¥–ª—è Flow –ø—Ä–æ—Ü–µ—Å—Å–æ–≤  

#### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

| –†–µ–∂–∏–º | –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `create` | `ACTION=create` –∏–ª–∏ `ID=0` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ |
| `edit` | `ACTION=edit` –∏ `ID>0` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ |
| `view` | `ACTION=view` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) |

#### AJAX-–¥–µ–π—Å—Ç–≤–∏—è

```php
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
public function saveChecklistAction($templateId, $items = [], $params = [])

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
public function setPriorityAction($templateId, $priority)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–≥–æ–≤
public function setTagsAction($templateId, array $tags = [])

// –£–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
public function deleteAction($templateId)
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —à–∞–±–ª–æ–Ω–∞ (0 –¥–ª—è –Ω–æ–≤–æ–≥–æ) | 0 |
| `ACTION` | STRING | –î–µ–π—Å—Ç–≤–∏–µ (create/edit/view) | view |
| `BACK_URL` | STRING | URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ | - |
| `CAN_READ` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ | true |
| `CAN_UPDATE` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | true |
| `EDIT_MODE` | BOOL | –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | false |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 0,
        "ACTION" => "create",
        "BACK_URL" => "/company/personal/user/#user_id#/tasks/templates/",
    ]
);

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ACTION" => "edit",
        "CAN_UPDATE" => true,
    ]
);
?>
```

#### JavaScript API

```javascript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
BX.ajax.runComponentAction('imena.tasks:task.template', 'saveChecklist', {
    mode: 'class',
    data: {
        templateId: 123,
        items: [
            { id: 1, title: '–ü—É–Ω–∫—Ç 1', checked: false },
            { id: 2, title: '–ü—É–Ω–∫—Ç 2', checked: true }
        ]
    }
}).then(function(response) {
    if (response.data.success) {
        BX.UI.Notification.Center.notify({
            content: '–ß–µ–∫-–ª–∏—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω',
            autoHide: true
        });
    }
});

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
BX.ajax.runComponentAction('imena.tasks:task.template', 'setPriority', {
    mode: 'class',
    data: {
        templateId: 123,
        priority: 2 // 1 - –Ω–∏–∑–∫–∏–π, 2 - –æ–±—ã—á–Ω—ã–π, 3 - –≤—ã—Å–æ–∫–∏–π
    }
});
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –≤–∏–¥–∂–µ—Ç—ã:

1. **widget.member.selector** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
   ```php
   $APPLICATION->IncludeComponent(
       "imena.tasks:widget.member.selector",
       "",
       [
           "TEMPLATE_ID" => $templateId,
           "CONTEXT" => "template",
       ]
   );
   ```

2. **widget.template.access** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
   ```php
   $APPLICATION->IncludeComponent(
       "imena.tasks:widget.template.access",
       "",
       [
           "TEMPLATE_ID" => $templateId,
           "CAN_UPDATE" => $canUpdate,
       ]
   );
   ```

3. **template.selector** - –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
   ```php
   $APPLICATION->IncludeComponent(
       "imena.tasks:template.selector",
       "",
       [
           "TEMPLATE_ID" => $templateId,
           "EXCLUDE_ID" => $templateId, // –ò—Å–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω
       ]
   );
   ```

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**Bitrix Core:**
- `Bitrix\Tasks\Item\Converter\Task\Template\ToTemplate`
- `Bitrix\Tasks\CheckList\Template\TemplateCheckListFacade`
- `Bitrix\Tasks\Integration\Bitrix24`
- `Bitrix\Tasks\Util\Restriction\Bitrix24Restriction\Limit\TaskLimit`

**Imena Custom:**
- `Imena\Tasks\Templates\Internals\TemplateTable`
- `Imena\Tasks\Templates\Item\Task\Template`
- `Imena\Tasks\Templates\Provider\TemplateProvider`
- `Imena\Tasks\Templates\Control\Template`
- `Imena\Tasks\Templates\CheckList\Template\TemplateCheckListFacade`

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —á–µ–∫-–ª–∏—Å—Ç—ã:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ImenaTemplateCheckListFacade` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ
2. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:** –†–∞–±–æ—Ç–∞–µ—Ç —Å `TemplateTable` –∏–∑ –º–æ–¥—É–ª—è `imena.tasks.templates`
3. **Flow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–∞ `flow` –¥–ª—è Camunda –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
4. **–û—Ç–ª–∞–¥–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `/upload/logs/checklist_debug.log`

#### –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

---

### 3. `widget.member.selector` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:widget.member.selector`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–¥–∂–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Entity Selector Bitrix24.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaTasksWidgetMemberSelectorComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksWidgetMemberSelectorComponent` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Bitrix)  
**–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:** –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü

**–†–∞–∑–º–µ—Ä:** 225 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π** (Responsible)  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π** (Accomplices)  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π** (Auditors)  
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Selector** Bitrix24  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–∞–∫ —Å –∑–∞–¥–∞—á–∞–º–∏, —Ç–∞–∫ –∏ —Å —à–∞–±–ª–æ–Ω–∞–º–∏**  
‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏** —á–µ—Ä–µ–∑ `TemplateMember`  

#### –†–æ–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

| –†–æ–ª—å | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|----------|
| –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å | `ROLE_RESPONSIBLE` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ä–æ–ª—å, –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–¥–∞—á–∏ |
| –°–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å | `ROLE_ACCOMPLICE` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ |
| –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å | `ROLE_AUDITOR` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—è—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º |

#### AJAX-–¥–µ–π—Å—Ç–≤–∏—è

```php
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
public function setResponsibleAction($taskId, $data = null, $context = self::CONTEXT_TASK)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
public function setAccomplicesAction($taskId, $data = null, $context = self::CONTEXT_TASK)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π
public function setAuditorsAction($taskId, $data = null, $context = self::CONTEXT_TASK)
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —à–∞–±–ª–æ–Ω–∞ | - |
| `CONTEXT` | STRING | –ö–æ–Ω—Ç–µ–∫—Å—Ç (task/template) | task |
| `CAN_UPDATE` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | true |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.member.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "CONTEXT" => "template", // –∏–ª–∏ "task"
        "CAN_UPDATE" => true,
    ]
);
?>
```

#### JavaScript API

```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
BX.ajax.runComponentAction('imena.tasks:widget.member.selector', 'setResponsible', {
    mode: 'class',
    data: {
        taskId: 123,
        data: [
            { ID: 1, NAME: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤' },
            { ID: 2, NAME: '–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤' }
        ],
        context: 'template'
    }
}).then(function(response) {
    if (response.data.SUCCESS) {
        // –û–±–Ω–æ–≤–∏—Ç—å UI
    }
});
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤:** –ú–µ—Ç–æ–¥—ã `setResponsibleAction`, `setAccomplicesAction`, `setAuditorsAction` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ImenaTemplateModel:** –î–ª—è —à–∞–±–ª–æ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ImenaTemplateModel` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ImenaTemplateAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ TemplateMember:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `TemplateMember::updateByTemplateId()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `Imena\Tasks\Templates\Access\ImenaTemplateAccessController`
- `Imena\Tasks\Templates\Access\ImenaTemplateModel`
- `Imena\Tasks\Templates\Control\TemplateMember`
- `Bitrix\Tasks\Access\ActionDictionary`
- `Bitrix\Tasks\Access\Role\RoleDictionary`

#### –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

---

### 4. `widget.template.access` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:widget.template.access`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–¥–∂–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —à–∞–±–ª–æ–Ω—É –∑–∞–¥–∞—á–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, –∫—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaWidgetTemplateAccessComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksBaseComponent`

**–†–∞–∑–º–µ—Ä:** 174 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –≥—Ä—É–ø–ø–∞–º**  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è–º**  
‚úÖ **–î–≤–∞ —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞:** –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø  
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏** —á–µ—Ä–µ–∑ —Ç–∞—Ä–∏—Ñ Bitrix24  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥—Ä—É–ø–ø –∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π**  
‚úÖ **AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**  

#### –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞

| –£—Ä–æ–≤–µ–Ω—å | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| –ü—Ä–æ—Å–º–æ—Ç—Ä | `TEMPLATE_VIEW` | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞, –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø | `TEMPLATE_FULL` | –ü—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ |

#### –¢–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π

| –¢–∏–ø | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-----|----------|
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `U` | –û—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã |
| –ì—Ä—É–ø–ø–∞ | `SG` | –†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞ (–ø—Ä–æ–µ–∫—Ç) |
| –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ | `DR` | –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ |

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —à–∞–±–ª–æ–Ω–∞ | - |
| `ENTITY_CODE` | STRING | –ö–æ–¥ —Å—É—â–Ω–æ—Å—Ç–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) | - |
| `CAN_READ` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ | true |
| `CAN_UPDATE` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | true |
| `EDIT_MODE` | BOOL | –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | false |
| `USER_DATA` | ARRAY | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | [] |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.template.access",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ENTITY_CODE" => "TEMPLATE_123",
        "CAN_READ" => true,
        "CAN_UPDATE" => true,
        "EDIT_MODE" => true,
    ]
);
?>
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞—Ä–∏—Ñ–∞:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `Bitrix24::checkFeatureEnabled()`
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:** –†–∞–±–æ—Ç–∞–µ—Ç —Å `TasksTemplatePermissionTable` –∏–∑ –º–æ–¥—É–ª—è `imena.tasks.templates`
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥—Ä—É–ø–ø –∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Access Controller:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `TemplateAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `Imena\Tasks\Templates\Access\TemplateAccessController`
- `Imena\Tasks\Templates\Access\Permission\TasksTemplatePermissionTable`
- `Imena\Tasks\Templates\Internals\TemplateTable`
- `Bitrix\Tasks\Access\Permission\PermissionDictionary`
- `Bitrix\Tasks\Integration\Bitrix24`

#### –°—Ç–∞—Ç—É—Å: ‚è≥ 60% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

---

### 5. `template.selector` - –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:template.selector`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–¥–∂–µ—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏ —à–∞–±–ª–æ–Ω–æ–≤ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–°—Ç–∏–ª—å:** –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π (–±–µ–∑ –∫–ª–∞—Å—Å–∞)  
**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:** `component.php`

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–í—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤**  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 15 —à–∞–±–ª–æ–Ω–æ–≤** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤**  
‚úÖ **AJAX –ø–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é  
‚úÖ **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞** –∏–∑ —Å–ø–∏—Å–∫–∞  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Selector** –¥–ª—è –ø–æ–∏—Å–∫–∞  

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —Ç–µ–∫—É—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ (–¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è) | 0 |
| `SELECTED_IDS` | ARRAY | –ú–∞—Å—Å–∏–≤ ID –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ | [] |
| `MULTIPLE` | BOOL | –†–∞–∑—Ä–µ—à–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä | true |
| `LIMIT` | INT | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ | 15 |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:template.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "SELECTED_IDS" => [456, 789],
        "MULTIPLE" => true,
        "LIMIT" => 15,
    ]
);
?>
```

#### JavaScript API

```javascript
// –ü–æ–∏—Å–∫ —à–∞–±–ª–æ–Ω–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏)
BX.ajax({
    url: '/local/components/imena.tasks/template.selector/ajax.php',
    data: {
        action: 'search',
        query: '–Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞',
        excludeId: 123
    },
    method: 'POST',
    dataType: 'json',
    onsuccess: function(response) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
    }
});
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–º —Å—Ç–∏–ª–µ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞
2. **–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 15 —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞
3. **Entity Selector:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Entity Selector Bitrix24 –¥–ª—è –ø–æ–∏—Å–∫–∞
4. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞

#### –°—Ç–∞—Ç—É—Å: ‚è≥ 50% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è AJAX –ø–æ–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤—ã–π API
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–ª–∞—Å—Å–æ–≤—ã–π —Å—Ç–∏–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —à–∞–±–ª–æ–Ω–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≥—Ä—É–ø–ø–∞–º –∏ —Ç–µ–≥–∞–º

---

## üîó –í–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```mermaid
graph TD
    A[templates.list] -->|–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç| B[task.template]
    B -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| C[widget.member.selector]
    B -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| D[widget.template.access]
    B -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| E[template.selector]
    A -->|–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ| B
    B -->|—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–µ—Ä–µ–∑| F[ImenaTemplateManager]
    C -->|—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–µ—Ä–µ–∑| G[TemplateMember]
    D -->|—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–µ—Ä–µ–∑| H[TasksTemplatePermissionTable]
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Å–≤—è–∑–µ–π

1. **templates.list ‚Üí task.template**
   - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —à–∞–±–ª–æ–Ω –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è Grid –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SidePanel –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏

2. **task.template –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∏–¥–∂–µ—Ç—ã:**
   - **widget.member.selector** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
   - **widget.template.access** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
   - **template.selector** - –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

3. **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Üí ImenaTemplateManager**
   - –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ImenaTemplateManager` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
   - –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –º–æ–¥—É–ª–µ–º `imena.tasks.templates`:

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–¥—É–ª—è

```php
// ORM —Ç–∞–±–ª–∏—Ü—ã
use Imena\Tasks\Templates\Internals\TemplateTable;
use Imena\Tasks\Templates\Internals\ScenarioTable;

// –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
use Imena\Tasks\Templates\Item\Task\Template;

// –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
use Imena\Tasks\Templates\Manager\ImenaTemplateManager;
use Imena\Tasks\Templates\Provider\TemplateProvider;

// –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–æ—Å—Ç—É–ø–∞
use Imena\Tasks\Templates\Access\ImenaTemplateAccessController;
use Imena\Tasks\Templates\Access\ImenaTemplateModel;

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
use Imena\Tasks\Templates\Control\TemplateMember;

// –ß–µ–∫-–ª–∏—Å—Ç—ã
use Imena\Tasks\Templates\CheckList\Template\TemplateCheckListFacade;
```

### –¢–∞–±–ª–∏—Ü—ã –ë–î

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:

- `b_imena_tasks_templates` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —à–∞–±–ª–æ–Ω–æ–≤
- `b_imena_tasks_templates_members` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤
- `b_imena_tasks_templates_permissions` - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- `b_imena_tasks_templates_scenarios` - —Å—Ü–µ–Ω–∞—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–¥—É–ª—è –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π:

```php
if (!\Bitrix\Main\Loader::includeModule('tasks'))
{
    return [];
}

if (!\Bitrix\Main\Loader::includeModule('imena.tasks.templates'))
{
    return [];
}
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

```php
<?php
// –í —à–∞–±–ª–æ–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
$APPLICATION->IncludeComponent(
    "imena.tasks:templates.list",
    "",
    [
        "TASK_TYPE" => "user",
        "ITEMS_COUNT" => 25,
        "PATH_TO_USER_TASKS" => "/company/personal/user/#user_id#/tasks/",
        "PATH_TO_USER_TASKS_TASK" => "/company/personal/user/#user_id#/tasks/task/#task_id#/",
    ]
);
?>
```

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –≤ SidePanel

```php
<?php
// –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ SidePanel
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 0,
        "ACTION" => "create",
        "BACK_URL" => "/company/personal/user/#user_id#/tasks/templates/",
    ]
);
?>

<script>
// –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ SidePanel —á–µ—Ä–µ–∑ JavaScript
BX.SidePanel.Instance.open('/company/personal/user/1/tasks/templates/create/', {
    cacheable: false,
    width: 800
});
</script>
```

### –ü—Ä–∏–º–µ—Ä 3: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏

```php
<?php
// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ACTION" => "edit",
        "CAN_UPDATE" => true,
    ]
);

// –í —à–∞–±–ª–æ–Ω–µ task.template –≤–∫–ª—é—á–∞–µ–º –≤–∏–¥–∂–µ—Ç—ã:
?>

<!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ -->
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.member.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "CONTEXT" => "template",
    ]
);
?>

<!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ -->
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.template.access",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ENTITY_CODE" => "TEMPLATE_123",
        "CAN_UPDATE" => true,
        "EDIT_MODE" => true,
    ]
);
?>

<!-- –í—ã–±–æ—Ä —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ -->
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:template.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "SELECTED_IDS" => [456, 789],
        "MULTIPLE" => true,
    ]
);
?>
```

### –ü—Ä–∏–º–µ—Ä 4: AJAX —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞

```javascript
// –í JavaScript —à–∞–±–ª–æ–Ω–∞
BX.ready(function() {
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
    BX.ajax.runComponentAction('imena.tasks:task.template', 'saveChecklist', {
        mode: 'class',
        data: {
            templateId: 123,
            items: [
                {
                    id: 1,
                    title: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è',
                    checked: false,
                    sort: 100
                },
                {
                    id: 2,
                    title: '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é',
                    checked: true,
                    sort: 200
                }
            ],
            params: {
                force: false
            }
        }
    }).then(function(response) {
        if (response.data.success) {
            BX.UI.Notification.Center.notify({
                content: '–ß–µ–∫-–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω',
                autoHide: true
            });
            
            // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
            updateChecklistUI(response.data.items);
        } else {
            BX.UI.Notification.Center.notify({
                content: '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: ' + response.data.errors.join(', '),
                autoHide: false
            });
        }
    });
});
```

### –ü—Ä–∏–º–µ—Ä 5: –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

```javascript
// –í JavaScript —à–∞–±–ª–æ–Ω–∞ templates.list
function deleteSelectedTemplates() {
    var grid = BX.Main.gridManager.getById('TASKS_TEMPLATES_FILTER_ID');
    var selectedIds = grid.instance.getRows().getSelectedIds();
    
    if (selectedIds.length === 0) {
        BX.UI.Notification.Center.notify({
            content: '–ù–µ –≤—ã–±—Ä–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞',
            autoHide: true
        });
        return;
    }
    
    if (!confirm('–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã?')) {
        return;
    }
    
    BX.ajax.runComponentAction('imena.tasks:templates.list', 'batchDelete', {
        mode: 'class',
        data: {
            ids: selectedIds,
            isAllSelected: false
        }
    }).then(function(response) {
        if (response.data.success) {
            BX.UI.Notification.Center.notify({
                content: '–®–∞–±–ª–æ–Ω—ã —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã',
                autoHide: true
            });
            
            // –û–±–Ω–æ–≤–∏—Ç—å Grid
            grid.instance.reload();
        } else {
            BX.UI.Notification.Center.notify({
                content: '–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ' + response.data.errors.join(', '),
                autoHide: false
            });
        }
    });
}
```

---

## üìê –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Bitrix24 D7:

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ D7 API

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
use Bitrix\Main\Loader;
use Bitrix\Main\Localization\Loc;
use Bitrix\Main\Engine\Contract\Controllerable;

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
CModule::IncludeModule("tasks");
GetMessage("TEXT");
```

### 2. Namespace –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
use Imena\Tasks\Templates\Manager\ImenaTemplateManager;
use Imena\Tasks\Templates\Internals\TemplateTable;

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
$manager = new ImenaTemplateManager(); // –ë–µ–∑ namespace
```

### 3. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
Loc::loadMessages(__FILE__);
$message = Loc::getMessage('IMENA_TASK_TEMPLATE_NAME');

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
$message = GetMessage('IMENA_TASK_TEMPLATE_NAME'); // –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
use Bitrix\Tasks\Util\Error\Collection;

$this->errorCollection = new Collection();
$this->errorCollection->add([new \Bitrix\Main\Error('Message', 'CODE')]);

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
$this->errors[] = 'Message'; // –ú–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ Collection
```

### 5. AJAX —á–µ—Ä–µ–∑ Controllerable

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
class MyComponent extends TasksBaseComponent implements Controllerable
{
    public function configureActions()
    {
        return [
            'myAction' => [
                '+prefilters' => [
                    new \Bitrix\Tasks\Action\Filter\BooleanFilter(),
                ],
            ],
        ];
    }
    
    public function myActionAction($param)
    {
        // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
    }
}
```

### 6. –•–µ—à—Ç–µ–≥ –∞–≤—Ç–æ—Ä–∞

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –ø–æ–º–µ—á–µ–Ω—ã —Ö–µ—à—Ç–µ–≥–æ–º `#vlikhobabin@gmail.com`:

```php
// #vlikhobabin@gmail.com - –ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Imena —Ç–∞–±–ª–∏—Ü–∞–º–∏
use Imena\Tasks\Templates\Manager\ImenaTemplateManager;
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **templates.list:** –ù–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (>1000 –∑–∞–ø–∏—Å–µ–π)
- **template.selector:** AJAX –ø–æ–∏—Å–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —à–∞–±–ª–æ–Ω–æ–≤

### 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- **widget.template.access:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (60% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)
- **template.selector:** AJAX –ø–æ–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π API, —Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ (50% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)

### 3. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –º–æ–¥—É–ª—å `imena.tasks.templates`
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç —Ç–∞—Ä–∏—Ñ Bitrix24 —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏

---

## üìä –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|-----------|------------|--------|------------|
| `templates.list` | 95% | ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é | –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ |
| `task.template` | 100% | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω | - |
| `widget.member.selector` | 100% | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω | - |
| `widget.template.access` | 60% | ‚è≥ –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ | –ù–µ–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ |
| `template.selector` | 50% | ‚è≥ –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ | AJAX –ø–æ–∏—Å–∫ —Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ |

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Ñ–∞–π–ª–µ `README.md` –≤ —Å–≤–æ–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ:

- [templates.list/README.md](./templates.list/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [task.template/README.md](./task.template/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [widget.member.selector/README.md](./widget.member.selector/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [widget.template.access/README.md](./widget.template.access/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [template.selector/README.md](./template.selector/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

- **`imena.tasks.templates`** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏
  - ORM —Ç–∞–±–ª–∏—Ü—ã
  - –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
  - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
  - –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

- **`imena.camunda`** - –º–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Camunda (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  - –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤

---

## üöÄ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ `templates.list`
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
   - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

2. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
   - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `widget.template.access`
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è AJAX –ø–æ–∏—Å–∫–∞ –≤ `template.selector`

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)

1. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–æ–≤
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
   - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

2. **–£–ª—É—á—à–µ–Ω–∏–µ UX**
   - Drag & Drop –¥–ª—è —á–µ–∫-–ª–∏—Å—Ç–æ–≤
   - –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6+ –º–µ—Å—è—Ü–µ–≤)

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jira
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Trello
   - API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–ú–æ–¥—É–ª—å:** imena.tasks  
**–í–µ—Ä—Å–∏—è Bitrix24:** 20.0.0+  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** PHP 8.0+  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** Proprietary

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 1.0 (2025-01-XX)

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö 5 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

*–î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Bitrix24 D7 –∏ —Å–ª–µ–¥—É–µ—Ç best practices –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ä—Ç–∞–ª–æ–≤.*
