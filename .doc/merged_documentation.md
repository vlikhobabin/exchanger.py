# Camunda Worker

# Camunda Worker

Camunda Worker –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ External Tasks –æ—Ç Camunda —á–µ—Ä–µ–∑ RabbitMQ —Å Stateless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

## –û–ø–∏—Å–∞–Ω–∏–µ

Camunda Worker - —ç—Ç–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Camunda BPM —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —á–µ—Ä–µ–∑ RabbitMQ. –†–µ–∞–ª–∏–∑—É–µ—Ç Stateless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –¥–ª–∏—Ç–µ–ª—å–Ω—ã–º–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ –∑–∞–¥–∞—á.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö External Tasks –æ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda
- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–ø–∏–∫–∞ –∑–∞–¥–∞—á (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ BPMN –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** - Extension Properties, Field Injections, Input/Output Parameters, Process Properties
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞** —á–µ—Ä–µ–∑ Camunda REST API
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ processDefinitionKey** –∏–∑ processDefinitionId –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ —Ç–æ–ø–∏–∫—É –∑–∞–¥–∞—á–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ—á–µ—Ä–µ–¥–∏ RabbitMQ —Å –ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Response Handler
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á –Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 –≥–æ–¥ –¥–ª—è Stateless —Ä–µ–∂–∏–º–∞)
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ BPMN XML —Å lazy loading –∏ LRU eviction
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º –∏ —Å–±–æ—è–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RabbitMQ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –ª–æ–≥–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏ –∏ graceful degradation

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–∏—Å—Ç–µ–º—ã

- **Bitrix24** - CRM –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- **OpenProject** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏  
- **1C** - —É—á–µ—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- **Python Services** - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

## SSL Configuration

### –ü—Ä–æ–±–ª–µ–º–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `camunda-external-task-client-python3==4.5.0` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É SSL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º:
```
SSLError(1, '[SSL: TLSV1_ALERT_DECODE_ERROR] tlsv1 alert decode error (_ssl.c:1000)')
```

### –†–µ—à–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **SSL Patch** - monkey patching –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ requests –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `verify=False` –∫–æ –≤—Å–µ–º HTTP –∑–∞–ø—Ä–æ—Å–∞–º –∫ Camunda.

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ç—á–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è `ssl_patch`
- –ü–∞—Ç—á —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö `requests` –≤—ã–∑–æ–≤–æ–≤
- –û—Ç–∫–ª—é—á–∞–µ—Ç SSL warnings —á–µ—Ä–µ–∑ `urllib3.disable_warnings()`

**‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- `verify=False` –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π —Å—Ä–µ–¥–µ
- –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Camunda Worker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –≥–¥–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ External Tasks –∏ Response Handling –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **Camunda Worker** (`camunda_worker.py`) - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏–∑ Camunda, –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ RabbitMQ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
2. **BPMN Metadata Cache** (`bpmn_metadata_cache.py`) - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑ BPMN XML
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Response Handler** (–≤—Å—Ç—Ä–æ–µ–Ω –≤ `camunda_worker.py`) - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∏–∑ RabbitMQ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ Camunda
4. **RabbitMQ Client** (`rabbitmq_client.py`) - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ—á–µ—Ä–µ–¥—è–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
5. **Response Handler** (`response_handler.py`) - –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è standalone —Ä–µ–∂–∏–º–∞)

### Workflow –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. Worker –ø–æ–ª—É—á–∞–µ—Ç External Task –æ—Ç Camunda (–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ - –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–ø–∏–∫–∞)
2. –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á—É –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 –≥–æ–¥ –¥–ª—è Stateless —Ä–µ–∂–∏–º–∞)
3. **–ò–∑–≤–ª–µ–∫–∞–µ—Ç BPMN –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** –∏–∑ –∫—ç—à–∞ –∏–ª–∏ –ø–∞—Ä—Å–∏—Ç XML (lazy loading)
4. **–ü–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞** —á–µ—Ä–µ–∑ Camunda REST API (`/process-instance/{id}/variables`)
5. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ü–µ–ª–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ —Ç–æ–ø–∏–∫—É
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –æ—á–µ—Ä–µ–¥—å RabbitMQ **—Å –ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞**
7. –í–Ω–µ—à–Ω—è—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á—É (–º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
8. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –æ—á–µ—Ä–µ–¥—å `camunda.responses.queue`
9. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Response Handler** (–≤ –ø–æ—Ç–æ–∫–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∫–∞–∂–¥—ã–µ `HEARTBEAT_INTERVAL` —Å–µ–∫—É–Ω–¥):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—á–µ—Ä–µ–¥—å –æ—Ç–≤–µ—Ç–æ–≤
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–¥–æ 10 –∑–∞ —Ä–∞–∑)
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞ (–≤–∫–ª—é—á–∞—è `ufResultAnswer_text` –¥–ª—è –∑–∞–¥–∞—á —Å `ufResultExpected=1`)
   - –°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å –∏–º–µ–Ω–µ–º `activity_id`)
   - –ó–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ Camunda —á–µ—Ä–µ–∑ REST API

### BPMN –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ BPMN XML –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –≤ RabbitMQ:

- **Extension Properties** - –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è `assigneeId`)
- **Field Injections** - –∏–Ω—ä–µ–∫—Ü–∏–∏ –ø–æ–ª–µ–π –≤ Java Delegates
- **Input Parameters** - –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **Output Parameters** - –≤—ã—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **Process Properties** - —Å–≤–æ–π—Å—Ç–≤–∞ —É—Ä–æ–≤–Ω—è –ø—Ä–æ—Ü–µ—Å—Å–∞ (–∏–∑ extensionElements –ø—Ä–æ—Ü–µ—Å—Å–∞)

**–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å - –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ assigneeId:**
- –ó–Ω–∞—á–µ–Ω–∏–µ `assigneeId` –∏–∑ BPMN extensionProperties –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `responsible_id` –≤ —Ü–µ–ª–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –º–∞–ø–ø–∏–Ω–≥–µ —Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

**Process Properties:**
- –°–≤–æ–π—Å—Ç–≤–∞ —É—Ä–æ–≤–Ω—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ `<bpmn:process><bpmn:extensionElements><camunda:properties>`
- –î–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ—Ö –∑–∞–¥–∞—á–∞—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ `metadata.processProperties`
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **Lazy Loading** - XML –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- **TTL**: 24 —á–∞—Å–∞ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è)
- **LRU Eviction** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π
- **Thread-safe** –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 6x —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ

**–ò—Å—Ö–æ–¥—è—â–∏–µ –∑–∞–¥–∞—á–∏ (Exchange: camunda.external.tasks)**
- `bitrix24.queue` - –∑–∞–¥–∞—á–∏ –¥–ª—è Bitrix24 (routing key: `bitrix24.*`)
- `openproject.queue` - –∑–∞–¥–∞—á–∏ –¥–ª—è OpenProject (routing key: `openproject.*`)
- `1c.queue` - –∑–∞–¥–∞—á–∏ –¥–ª—è 1C (routing key: `1c.*`)
- `python-services.queue` - –∑–∞–¥–∞—á–∏ –¥–ª—è Python —Å–µ—Ä–≤–∏—Å–æ–≤ (routing keys: `python.*`, `email.*`, `telegram.*`, `yandex.*`, `user.*`, `file.*`, `data.*`)
- `default.queue` - –Ω–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ Alternate Exchange
- `errors.camunda_tasks.queue` - –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á

**Alternate Exchange (camunda.unrouted.tasks)**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `default.queue`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Ç–æ–ø–∏–∫–∞–º–∏

**–û—Ç–≤–µ—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Exchange: camunda.task.responses)**
- `camunda.responses.queue` - –æ—Ç–≤–µ—Ç—ã –æ—Ç –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º (routing key: `camunda.responses.queue`)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- RabbitMQ
- Camunda BPM Platform
- –î–æ—Å—Ç—É–ø –∫ REST API Camunda

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd camunda-worker
pip install camunda-external-task-client-python3 pika pydantic pydantic-settings python-dotenv requests loguru lxml
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# Camunda –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
CAMUNDA_BASE_URL=https://your-camunda-server.com/engine-rest
CAMUNDA_WORKER_ID=universal-worker
CAMUNDA_MAX_TASKS=10
CAMUNDA_LOCK_DURATION=31536000000
CAMUNDA_AUTH_USERNAME=your_username
CAMUNDA_AUTH_PASSWORD=your_password

# RabbitMQ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
RABBITMQ_HOST=your-rabbitmq-host.com
RABBITMQ_USERNAME=your_username
RABBITMQ_PASSWORD=your_password

# BPMN Metadata Cache
BPMN_CACHE_TTL_HOURS=24
BPMN_CACHE_MAX_SIZE=150

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
```

## –ó–∞–ø—É—Å–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ Worker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python main.py

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ Worker (–±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤)
python camunda_worker.py

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ Camunda
python tools/process_manager.py list
python tools/process_manager.py start ProcessKey --variables '{"key": "value"}'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ
python tools/check_queues.py

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python tools/worker_diagnostics.py

# –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–≤–∏—Å—à–∏—Ö –∑–∞–¥–∞—á
python tools/unlock_task.py --task-id <task-id>
```

### –ö–∞–∫ —Å–µ—Ä–≤–∏—Å

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è systemd —Å–µ—Ä–≤–∏—Å—ã: `exchanger-worker.service` –∏ `exchanger-creator.service`.

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–º:
```bash
sudo systemctl status exchanger-worker
sudo systemctl restart exchanger-worker
sudo journalctl -u exchanger-worker -f
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `CAMUNDA_BASE_URL` | URL REST API Camunda | `https://camunda.example.com/engine-rest` |
| `CAMUNDA_WORKER_ID` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Worker | `universal-worker` |
| `CAMUNDA_MAX_TASKS` | –ú–∞–∫—Å–∏–º—É–º –∑–∞–¥–∞—á –∑–∞ –∑–∞–ø—Ä–æ—Å | `10` |
| `CAMUNDA_LOCK_DURATION` | –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–º—Å) | `31536000000` (1 –≥–æ–¥) |
| `RABBITMQ_HOST` | –•–æ—Å—Ç RabbitMQ | `localhost` |
| `RABBITMQ_PORT` | –ü–æ—Ä—Ç RabbitMQ | `5672` |
| `BPMN_CACHE_TTL_HOURS` | TTL –∫—ç—à–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—á–∞—Å—ã) | `24` |
| `BPMN_CACHE_MAX_SIZE` | –ú–∞–∫—Å–∏–º—É–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –∫—ç—à–µ | `150` |
| `HEARTBEAT_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ (—Å–µ–∫) | `60` |
| `RESPONSE_HANDLER_ENABLED` | –í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Ç–≤–µ—Ç–æ–≤ | `true` |
| `RESPONSE_PROCESSING_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ (—Å–µ–∫) | `5` |
| `DEBUG_SAVE_RESPONSE_MESSAGES` | –°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | `false` |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` |

### –ú–∞–ø–ø–∏–Ω–≥ —Ç–æ–ø–∏–∫–æ–≤

Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ü–µ–ª–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–æ–ø–∏–∫–∞:

```python
# –ü—Ä–∏–º–µ—Ä—ã –º–∞–ø–ø–∏–Ω–≥–∞
"bitrix_create_task" ‚Üí bitrix24.queue
"op_create_project" ‚Üí openproject.queue  
"1c_sync_data" ‚Üí 1c.queue
"send_email" ‚Üí python-services.queue
```

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–∞–ø–ø–∏–Ω–≥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ `config.py` –≤ –∫–ª–∞—Å—Å–µ `RoutingConfig`.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –ª–æ–≥–æ–≤:

- **–û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏**: `logs/camunda_worker.log`
- **–õ–æ–≥–∏ –æ—à–∏–±–æ–∫**: `logs/camunda_worker_errors.log`
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏**: —á–µ—Ä–µ–∑ `journalctl -u exchanger-worker`

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

Worker –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥:

```
Monitor - Uptime: 3600s | –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 150 | –£—Å–ø–µ—à–Ω–æ: 147 | –û—à–∏–±–∫–∏: 3 | –û—Ç–≤–µ—Ç–æ–≤: 25 | –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 24
BPMN Cache - Hits: 142 | Misses: 8 | Hit Rate: 94.7% | Size: 12/150 (0.18 MB)
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ BPMN –∫—ç—à–∞

–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ API:

```json
{
  "metadata_cache": {
    "cache_hits": 142,
    "cache_misses": 8,
    "hit_rate_percent": 94.67,
    "cache_size": 12,
    "cache_size_mb": 0.18,
    "avg_parse_time_ms": 1.3,
    "avg_cache_access_time_ms": 0.2
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ `tools/`:

```bash
# –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ
python tools/check_queues.py

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö Camunda
python tools/camunda_processes.py --stats

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Worker
python tools/worker_diagnostics.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
python tools/test_response_processing.py
```

## API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –≤ Camunda

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å Camunda —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —É—Å–ª–æ–≤–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π (conditionExpression):**
- `{activity_id}` - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –∏–º–µ–Ω–µ–º —Ä–∞–≤–Ω—ã–º `activity_id` –∑–∞–¥–∞—á–∏
  - –ó–Ω–∞—á–µ–Ω–∏–µ `"ok"` - –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–≤–µ—Ç–∞ (`ufResultExpected != "1"`) –∏–ª–∏ –æ—Ç–≤–µ—Ç "–î–ê"
  - –ó–Ω–∞—á–µ–Ω–∏–µ `"no"` - –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç "–ù–ï–¢" –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ BPMN: `${Activity_177u7c0 != "ok"}` –¥–ª—è —É—Å–ª–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

**–î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ Bitrix24 (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ):**
- `bitrix_task_id` - ID –∑–∞–¥–∞—á–∏ –≤ Bitrix24
- `bitrix_task_title` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏
- `bitrix_task_description` - –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `bitrix_task_status` - —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- `bitrix_task_priority` - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á–∏
- `bitrix_task_created_date` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `bitrix_task_changed_date` - –¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `bitrix_task_deadline` - —Å—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `bitrix_task_created_by` - ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
- `bitrix_task_responsible_id` - ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `bitrix_task_group_id` - ID –≥—Ä—É–ø–ø—ã
- `bitrix_task_parent_id` - ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∑–∞–¥–∞—á–∏

**–ò—Å—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å.

**–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤:**
1. –ï—Å–ª–∏ `ufResultExpected == "1"` (–∑–∞–¥–∞—á–∞ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–≤–µ—Ç–∞):
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è `ufResultAnswer_text` –∏–∑ –æ—Ç–≤–µ—Ç–∞
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è: "–î–ê" ‚Üí "ok", "–ù–ï–¢" ‚Üí "no"
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `{activity_id}` = –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
2. –ï—Å–ª–∏ `ufResultExpected != "1"` (–∑–∞–¥–∞—á–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–≤–µ—Ç–∞):
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `{activity_id}` = "ok" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

### –ò—Å—Ö–æ–¥—è—â–∏–µ –∑–∞–¥–∞—á–∏

–í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—É—á–∞—é—Ç –∑–∞–¥–∞—á–∏ —Å –ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ –æ—á–µ—Ä–µ–¥—è—Ö RabbitMQ:

```json
{
  "id": "task-uuid",
  "topic": "bitrix_create_task",
  "variables": {
    "projectId": {"value": "123", "type": "String"}
  },
  "metadata": {
    "extensionProperties": {
      "assigneeId": "3",
      "customProperty": "customValue"
    },
    "fieldInjections": {
      "serviceUrl": "https://api.example.com"
    },
    "inputParameters": {
      "inputData": "processedValue"
    },
    "outputParameters": {
      "resultMapping": "responseField"
    },
    "processProperties": {
      "globalProperty": "globalValue"
    },
    "processVariables": {
      "processVar1": {"value": "value1", "type": "String"}
    }
  },
  "process_variables": {
    "processVar1": {"value": "value1", "type": "String"}
  },
  "processDefinitionKey": "ProcessKey",
  "activityId": "Activity_177u7c0"
}
```

**–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ `assigneeId`:**
- –ó–Ω–∞—á–µ–Ω–∏–µ `assigneeId` –∏–∑ BPMN –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `responsible_id` –≤ Bitrix24
- –ü—Ä–∏–º–µ—Ä: `assigneeId: "3"` ‚Üí `responsible_id: 3` –≤ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–π –∑–∞–¥–∞—á–µ

**Process Variables:**
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Camunda REST API (`/process-instance/{id}/variables`)
- –î–æ—Å—Ç—É–ø–Ω—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –ø–æ–ª–µ `process_variables`
- –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `metadata.processVariables` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤–æ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

–í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–≤–µ—Ç—ã –≤ –æ—á–µ—Ä–µ–¥—å `camunda.responses.queue`:

```json
{
  "original_message": {
    "task_id": "task-uuid",
    "activity_id": "Activity_177u7c0",
    "topic": "bitrix_create_task",
    "variables": {
      "projectId": {"value": "123", "type": "String"}
    }
  },
  "response_data": {
    "result": {
      "task": {
        "ID": "123",
        "TITLE": "Task Title",
        "DESCRIPTION": "Task Description",
        "STATUS": "3",
        "ufResultExpected": "1",
        "ufResultAnswer_text": "–î–ê"
      },
      "success": true
    }
  },
  "processing_status": "completed"
}
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `original_message.task_id` - ID –∑–∞–¥–∞—á–∏ –≤ Camunda
- `original_message.activity_id` - ID –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å–∞)
- `processing_status` - —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ ("completed" –∏–ª–∏ "completed_by_tracker")

**–ü–æ–ª—è –¥–ª—è –∑–∞–¥–∞—á —Å –æ—Ç–≤–µ—Ç–∞–º–∏:**
- `response_data.result.task.ufResultExpected` - "1" –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–≤–µ—Ç
- `response_data.result.task.ufResultAnswer_text` - "–î–ê" –∏–ª–∏ "–ù–ï–¢"

### –¢–∏–ø—ã –æ—Ç–≤–µ—Ç–æ–≤

- `complete` - —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `failure` - –æ—à–∏–±–∫–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–∞
- `bpmn_error` - BPMN –æ—à–∏–±–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
camunda-worker/
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º)
‚îú‚îÄ‚îÄ camunda_worker.py       # –û—Å–Ω–æ–≤–Ω–æ–π Worker —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º Response Handler
‚îú‚îÄ‚îÄ bpmn_metadata_cache.py  # –ö—ç—à BPMN –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å lazy loading
‚îú‚îÄ‚îÄ response_handler.py     # –û—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ rabbitmq_client.py      # RabbitMQ –∫–ª–∏–µ–Ω—Ç —Å Alternate Exchange
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic settings)
‚îú‚îÄ‚îÄ ssl_patch.py           # SSL –ø–∞—Ç—á –¥–ª—è camunda-external-task-client
‚îú‚îÄ‚îÄ tools/                 # –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ process_manager.py  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ Camunda
‚îÇ   ‚îú‚îÄ‚îÄ start_process.py   # –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ camunda_processes.py # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ check_queues.py    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ
‚îÇ   ‚îú‚îÄ‚îÄ unlock_task.py     # –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ worker_diagnostics.py # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ status_check.py    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ queue_reader.py     # –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –æ—á–µ—Ä–µ–¥–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ task_recovery.py   # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ YAML_CONFIG_README.md # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ logs/                  # –§–∞–π–ª—ã –ª–æ–≥–æ–≤
    ‚îú‚îÄ‚îÄ camunda-worker.log
    ‚îú‚îÄ‚îÄ camunda-worker-errors.log
    ‚îî‚îÄ‚îÄ debug/             # –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
```

–°—Ö–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

```mermaid
graph TD
    A[–°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ camunda.responses.queue] --> B[–ü–æ–ª—É—á–µ–Ω–∏–µ activity_id]
    B --> C{activity_id –Ω–∞–π–¥–µ–Ω?}
    C -->|–ù–µ—Ç| D[WARNING: activity_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç<br/>–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º activity_id = 'ok']
    C -->|–î–∞| E[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ task_data –∏–∑ response_data]
    E --> F[–ü—Ä–æ–≤–µ—Ä–∫–∞ ufResultExpected]
    F --> G{ufResultExpected === '1'?}
    G -->|–î–∞| H[–ó–∞–¥–∞—á–∞ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    G -->|–ù–µ—Ç/–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç| I[INFO: –ó–∞–¥–∞—á–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–≤–µ—Ç–∞<br/>–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º activity_id = 'ok']
    H --> J[–ü–æ–∏—Å–∫ ufResultAnswer_text]
    J --> K{ufResultAnswer_text –Ω–∞–π–¥–µ–Ω?}
    K -->|–î–∞| L[–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –î–ê/–ù–ï–¢ ‚Üí ok/no]
    K -->|–ù–µ—Ç| M[WARNING: ufResultAnswer_text –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç<br/>–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º activity_id = 'ok']
    L --> N[–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å–∞:<br/>variables[activity_id] = –∑–Ω–∞—á–µ–Ω–∏–µ]
    N --> O[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∏ Bitrix24]
    I --> O
    M --> O
    D --> O
    O --> P[–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ External Task –≤ Camunda<br/>—á–µ—Ä–µ–∑ REST API /complete]
    
    style G fill:#fff3e0
    style I fill:#e8f5e8
    style H fill:#e3f2fd
    style M fill:#fff3e0
    style D fill:#fff3e0
    style P fill:#f3e5f5
    style N fill:#e1f5fe
```    

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `camunda-external-task-client-python3` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è Camunda External Tasks
- `pika` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è RabbitMQ
- `pydantic` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `pydantic-settings` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `python-dotenv` - –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ .env —Ñ–∞–π–ª–∞
- `requests` - HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ Camunda REST API
- `loguru` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- `lxml` - –ø–∞—Ä—Å–∏–Ω–≥ BPMN XML

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
pip install camunda-external-task-client-python3 pika pydantic pydantic-settings python-dotenv requests loguru lxml
```

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ó–∞–¥–∞—á–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Camunda –∏ –º–∞–ø–ø–∏–Ω–≥ —Ç–æ–ø–∏–∫–æ–≤
2. **–û—à–∏–±–∫–∏ RabbitMQ**: –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ credentials –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. **–ó–∞–¥–∞—á–∏ –∑–∞–≤–∏—Å–∞—é—Ç**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ —Ä–∞–±–æ—Ç—É Response Handler
4. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Camunda REST API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ BPMN XML
5. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–µ–º**: –£–≤–µ–ª–∏—á—å—Ç–µ `BPMN_CACHE_MAX_SIZE` –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ XML
6. **–û—à–∏–±–∫–∞ "condition expression returns non-Boolean"**: BPMN –ø—Ä–æ—Ü–µ—Å—Å –æ–∂–∏–¥–∞–µ—Ç Boolean –≤ —É—Å–ª–æ–≤–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏. –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Worker - –≤–∫–ª—é—á–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Camunda
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å–ª–æ–≤–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ BPMN –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `{activity_id}` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–∑–Ω–∞—á–µ–Ω–∏–µ "ok" –∏–ª–∏ "no")
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python tools/queue_reader.py camunda.responses.queue` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤
7. **–ó–∞–¥–∞—á–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É Response Handler:
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `RESPONSE_HANDLER_ENABLED=true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥—å `camunda.responses.queue` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á (HTTP 500, 404)
8. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Camunda REST API:
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `/process-definition/{id}/xml` –¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫—ç—à–∞ BPMN –Ω–∞ –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python tools/worker_diagnostics.py` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
python tools/worker_diagnostics.py

# –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–≤–∏—Å—à–∏—Ö –∑–∞–¥–∞—á
python tools/unlock_task.py --task-id <task-id>

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
python tools/camunda_processes.py --instances

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–≤–µ—Ç–æ–≤
python tools/queue_reader.py camunda.responses.queue

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
python tools/task_recovery.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
python tools/status_check.py
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 

---

# IMENA Camunda Module

# IMENA Camunda Module - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–í–µ—Ä—Å–∏—è –º–æ–¥—É–ª—è:** 2.3+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production  
**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 25.01.2025

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –º–æ–¥—É–ª—è](#–æ–±–∑–æ—Ä-–º–æ–¥—É–ª—è)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
4. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
5. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
6. [API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#api-–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
7. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–º–æ–¥—É–ª–µ–π](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-–ø–æ–¥–º–æ–¥—É–ª–µ–π)
8. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
9. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∏-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

---

## –û–±–∑–æ—Ä –º–æ–¥—É–ª—è

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å **imena.camunda** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Bitrix24 —Å **Camunda 7 BPM Engine** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. –ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö** –º–µ–∂–¥—É Camunda –∏ Bitrix24 (Process Definitions, Process Instances, External Tasks, Variables)
- ‚úÖ **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ Bitrix24
- ‚úÖ **REST API** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç—ã Bitrix
- ‚úÖ **Webhook-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ **–°–∏—Å—Ç–µ–º—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **Grid –∏ Filter** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
   - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º (suspend, resume, terminate)
   - –°–≤—è–∑—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –∑–∞–¥–∞—á–∞–º–∏ Bitrix24

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**
   - –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (Process Definitions)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏
   - –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

3. **–í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏ (External Tasks)**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–¥–∞—á –∏–∑ Camunda
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á

4. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –ë–î Bitrix24
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π —Å Camunda
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
   - Webhook-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
imena.camunda/
‚îú‚îÄ‚îÄ lib/                          # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ ProcessInstance/          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ProcessDefinition/        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ExternalTask/             # –í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏ Camunda
‚îÇ   ‚îú‚îÄ‚îÄ ProcessVariable/          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Sync/                     # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Client/              # HTTP –∫–ª–∏–µ–Ω—Ç—ã Camunda REST API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Service/             # –°–µ—Ä–≤–∏—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Mapper/              # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Entity/              # ORM —Ç–∞–±–ª–∏—Ü—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Command/            # CQRS –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Exception/           # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Rest/                    # REST API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ Config/                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ Agent/                    # –ê–≥–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ Controller/              # AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îú‚îÄ‚îÄ install/                      # –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ db/                      # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ components/              # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Bitrix
‚îÇ   ‚îî‚îÄ‚îÄ js/                      # JavaScript —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docs/                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ lang/                        # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .settings.php                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è D7 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ options.php                  # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥—É–ª—è
‚îî‚îÄ‚îÄ include.php                   # –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **D7 Standard** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Bitrix D7 API
2. **Clean Architecture** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (Client, Service, Entity)
3. **CQRS Pattern** - –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
4. **Repository Pattern** - ORM —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
5. **Mapper Pattern** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
6. **Namespace Autoloading** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
Camunda REST API
    ‚Üì
Sync/Client (HTTP –∫–ª–∏–µ–Ω—Ç—ã)
    ‚Üì
Sync/Mapper (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
    ‚Üì
ORM Tables (ProcessTable, ProcessDefinitionTable, etc.)
    ‚Üì
Components/Controllers (UI –∏ API)
    ‚Üì
Bitrix24 Frontend
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. ProcessInstance - –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda –≤ Bitrix24

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `ProcessTable` - ORM —Ç–∞–±–ª–∏—Ü–∞ `b_imena_camunda_process_instances`
- `ProcessInstance` - Value-object –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- `CamundaListController` - AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞
- `CamundaDetailController` - AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `camunda.process.list` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `camunda.process.detail` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- `/local/pages/imena/camunda/process/list/` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `/local/pages/imena/camunda/process/detail/` - –î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/ProcessInstance/README.md](lib/ProcessInstance/README.md)

### 2. ProcessDefinition - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (BPMN –¥–∏–∞–≥—Ä–∞–º–º—ã)

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `ProcessDefinitionTable` - ORM —Ç–∞–±–ª–∏—Ü–∞ `b_imena_camunda_process_definitions`
- `ProcessDefinition` - Value-object –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
- `CamundaAccessController` - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `camunda.processdefinition.list` - –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- `camunda.processdefinition.details` - –î–µ—Ç–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `camunda.processdefinition.diagram` - –ü—Ä–æ—Å–º–æ—Ç—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º—ã

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- `/local/pages/imena/camunda/processdefinition/list/` - –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- `/local/pages/imena/camunda/processdefinition/detail/` - –î–µ—Ç–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `/local/pages/imena/camunda/processdefinition/diagram/` - BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/ProcessDefinition/README.md](lib/ProcessDefinition/README.md)

### 3. ExternalTask - –í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ Camunda (External Tasks)

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `ExternalTaskTable` - ORM —Ç–∞–±–ª–∏—Ü–∞ `b_imena_camunda_external_tasks`
- `ExternalTaskService` - –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏
- `ExternalTaskController` - AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

**–°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á:**
- `RUNTIME` - –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ Camunda
- `HISTORY` - –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–∏–∑ Historical External Task Log)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/ExternalTask/README.md](lib/ExternalTask/README.md)

### 4. ProcessVariable - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `ProcessVariableTable` - ORM —Ç–∞–±–ª–∏—Ü–∞ `b_imena_camunda_process_variables`
- `ProcessVariable` - Value-object –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- `ProcessVariableService` - –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–¢–∏–ø—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:**
- `string` - –°—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- `integer` - –¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- `boolean` - –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- `date` - –î–∞—Ç—ã –∏ –≤—Ä–µ–º—è
- `enum` - –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/ProcessVariable/README.md](lib/ProcessVariable/README.md)

### 5. Sync - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É Camunda –∏ Bitrix24

**–ü–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏:**
- **Client/** - HTTP –∫–ª–∏–µ–Ω—Ç—ã Camunda REST API
- **Service/** - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **Mapper/** - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö Camunda ‚Üî Bitrix
- **Entity/** - ORM —Ç–∞–±–ª–∏—Ü—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **Command/** - CQRS –∫–æ–º–∞–Ω–¥—ã
- **Exception/** - –ò—Å–∫–ª—é—á–µ–Ω–∏—è

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `CamundaApiClient` - –ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç
- `HistoricProcessInstanceClient` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `ProcessDefinitionClient` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- `ExternalTaskClient` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–¥–∞—á
- `FullSyncService` - –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- `SyncLogger` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/Sync/README.md](lib/Sync/README.md)

### 6. Rest - REST API

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** REST API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `WebhookHandler` - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook –æ—Ç Camunda
- `DiagramPropertiesHandler` - API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –¥–∏–∞–≥—Ä–∞–º–º

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `imena.camunda.sync` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ webhook
- `imena.camunda.diagram.properties.list` - –°–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤ –¥–∏–∞–≥—Ä–∞–º–º—ã

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/Rest/README.md](lib/Rest/README.md)

### 7. Agent - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `CamundaSyncAgent` - –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–µ—Ä–∏–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (default: 300 —Å–µ–∫)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å 5 retry –ø–æ–ø—ã—Ç–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/Agent/README.md](lib/Agent/README.md)

### 8. Config - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –º–æ–¥—É–ª—è

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `ConnectionConfig` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda
- `CamundaCredentialsService` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- URL —Å–µ—Ä–≤–µ—Ä–∞ Camunda REST API
- –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (username, password)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [lib/Config/README.md](lib/Config/README.md)

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **PHP** 8.0+
- **Bitrix24** 20.0.0+
- **Camunda BPM** 7.14+
- **MySQL** 5.7+ –∏–ª–∏ MariaDB 10.3+
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è PHP:** cURL, JSON, PDO

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª—è

1. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**
   ```bash
   # –ú–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤:
   /local/modules/imena.camunda/
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª–µ–π**
   - –ù–∞–π–¥–∏—Ç–µ –º–æ–¥—É–ª—å **IMENA Camunda**
   - –ù–∞–∂–º–∏—Ç–µ **"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"**

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î:
     - `b_imena_camunda_process_instances`
     - `b_imena_camunda_process_definitions`
     - `b_imena_camunda_external_tasks`
     - `b_imena_camunda_process_variables`
     - `b_imena_camunda_sync_log`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda

1. **–ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª–µ–π ‚Üí IMENA Camunda**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
     - **URL —Å–µ—Ä–≤–µ—Ä–∞ Camunda:** `http://camunda-server:8080/engine-rest`
     - **–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** `demo`
     - **–ü–∞—Ä–æ–ª—å:** `demo`

2. **–ß–µ—Ä–µ–∑ .settings.php:**
   ```php
   return [
       'camunda' => [
           'value' => [
               'api_url' => 'http://camunda-server:8080/engine-rest',
               'auth' => [
                   'type' => 'basic',
                   'username' => 'admin',
                   'password' => 'secret',
               ],
           ],
       ],
   ];
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   ```php
   use ImenaCamunda\Sync\Service\SyncService;
   
   $syncService = new SyncService();
   $result = $syncService->testConnection();
   
   if ($result->isSuccess()) {
       echo "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!";
   }
   ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

1. **–í–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞: `/local/pages/imena/camunda/settings/`
   - –í–∫–ª—é—á–∏—Ç–µ —á–µ–∫–±–æ–∫—Å "–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"
   - –£–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Å–µ–∫.)
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

2. **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ:**
   ```php
   use ImenaCamunda\Config\ConnectionConfig;
   use ImenaCamunda\Agent\CamundaSyncAgent;
   
   ConnectionConfig::setSyncAutoEnabled(true);
   ConnectionConfig::setSyncInterval(300); // 5 –º–∏–Ω—É—Ç
   CamundaSyncAgent::addAgent();
   ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ webhook –≤ Bitrix24:**
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí –í–µ–±—Ö—É–∫–∏ ‚Üí –î–æ–±–∞–≤–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π webhook
   - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: –º–æ–¥—É–ª—å `imena.camunda`
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –º–æ–¥—É–ª–µ:**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞: `/local/pages/imena/camunda/settings/`
   - –°–µ–∫—Ü–∏—è "Webhook-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è"
   - –£–∫–∞–∑–∞—Ç—å URL –≤—Ö–æ–¥—è—â–µ–≥–æ webhook

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Camunda:**
   - –î–æ–±–∞–≤–∏—Ç—å HTTP Task –≤ BPMN –¥–∏–∞–≥—Ä–∞–º–º—É
   - URL: `{webhook_url}/imena.camunda.sync`
   - Payload: `{"processDefinitionKey": "...", "processInstanceId": "..."}`

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**URL:** `/local/pages/imena/camunda/process/list/`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞, –¥–∞—Ç–µ
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é
- –ú–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (suspend, resume, terminate)
- –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ—Ü–µ—Å—Å–∞

**URL:** `/local/pages/imena/camunda/process/detail/?ID={process_id}`

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ Bitrix24

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

**–ß–µ—Ä–µ–∑ UI:**
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —Å—Ç—Ä–æ–∫–∏ ‚Üí Suspend/Resume/Terminate
- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π ‚Üí –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ:**
```php
use ImenaCamunda\ProcessInstance\ProcessInstance;

$process = ProcessInstance::getInstance($processId);

// –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
$result = $process->suspend();

// –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
$result = $process->resume();

// –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
$result = $process->terminate('–ü—Ä–∏—á–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è');
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è:**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç Bitrix

**–†—É—á–Ω–∞—è:**
```php
use ImenaCamunda\Sync\Service\FullSyncService;

$syncService = new FullSyncService();

// –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
$result = $syncService->syncAllDefinitions();

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
$result = $syncService->syncProcessInstance($processId);
```

**–ß–µ—Ä–µ–∑ Webhook:**
- Camunda –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- Bitrix24 —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ–Ω–µ

### –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

```php
use ImenaCamunda\ProcessVariable\ProcessVariable;

$variable = new ProcessVariable($processInstanceId, 'customerName');

// –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
$value = $variable->getValue();

// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
$variable->setValue('–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');

// –û—Ç–º–µ—Ç–∏—Ç—å —É—Å–ø–µ—à–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
$variable->markSyncStatus('SUCCESS');
```

### –†–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏

```php
use ImenaCamunda\ExternalTask\ExternalTaskTable;

// –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —Ç–æ–ø–∏–∫—É
$tasks = ExternalTaskTable::getAvailable('createOrder');

// –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
$tasks = ExternalTaskTable::getByProcessInstance($processInstanceId);

// –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏ —Å –æ—à–∏–±–∫–∞–º–∏
$tasks = ExternalTaskTable::getWithErrors();
```

---

## API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### AJAX API

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:**
- `CamundaListController` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `CamundaDetailController` - –î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- `SyncController` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- `ProcessVariableController` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã –≤—ã–∑–æ–≤–æ–≤:**
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
BX.ajax.runAction('imena.camunda:camunda.list.getList', {
    data: {
        filter: {STATUS: 'ACTIVE'},
        nav: {limit: 25, offset: 0}
    }
});

// –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
BX.ajax.runAction('imena.camunda:camunda.detail.suspend', {
    data: {processId: 'process-123'}
});

// –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
BX.ajax.runAction('imena.camunda:camunda.sync.runNow', {
    data: {}
});
```

### REST API

**–í—Ö–æ–¥—è—â–∏–µ webhook:**
- `imena.camunda.sync` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- `imena.camunda.diagram.properties.list` - –°–≤–æ–π—Å—Ç–≤–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã

**–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞:**
```bash
curl -X POST "https://portal/rest/1/webhook_code/imena.camunda.sync" \
  -H "Content-Type: application/json" \
  -d '{
    "processDefinitionKey": "Process_abc123",
    "processInstanceId": "process-instance-uuid"
  }'
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

**imena.storm:**
- –°–≤—è–∑—å –¥–∏–∞–≥—Ä–∞–º–º Storm —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ Camunda
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–≤–æ–π—Å—Ç–≤ –¥–∏–∞–≥—Ä–∞–º–º

**imena.tasks.templates:**
- –°–≤—è–∑—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda —Å –∑–∞–¥–∞—á–∞–º–∏ Bitrix24
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–º–æ–¥—É–ª–µ–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **[ProcessInstance](lib/ProcessInstance/README.md)** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **[ProcessDefinition](lib/ProcessDefinition/README.md)** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **[ExternalTask](lib/ExternalTask/README.md)** - –í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏ Camunda
- **[ProcessVariable](lib/ProcessVariable/README.md)** - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **[Sync](lib/Sync/README.md)** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda (–ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- **[Rest](lib/Rest/README.md)** - REST API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- **[Agent](lib/Agent/README.md)** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **[Config](lib/Config/README.md)** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[docs/README.md](docs/README.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º –ø–æ–ª—è–º –≤ Grid
- **[CAMUNDA_URL_CONFIGURATION.md](CAMUNDA_URL_CONFIGURATION.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL Camunda
- **[QUICK_START_AUTO_SYNC.md](QUICK_START_AUTO_SYNC.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **[REST_HANDLERS_FINAL_REPORT.md](REST_HANDLERS_FINAL_REPORT.md)** - –û—Ç—á–µ—Ç –ø–æ REST –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç D7 –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ `include.php`:

```php
// Namespace: ImenaCamunda\ProcessInstance\Grid\CamundaGrid
// –§–∞–π–ª: /lib/ProcessInstance/Grid/CamundaGrid.php

use ImenaCamunda\ProcessInstance\Grid\CamundaGrid;
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

1. **ORM —Ç–∞–±–ª–∏—Ü–∞:**
   ```php
   namespace ImenaCamunda\YourModule;
   
   class YourTable extends DataManager
   {
       public static function getTableName(): string
       {
           return 'b_imena_camunda_your_table';
       }
       
       public static function getMap(): array
       {
           return [
               // –ü–æ–ª—è —Ç–∞–±–ª–∏—Ü—ã
           ];
       }
   }
   ```

2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:**
   ```php
   // /local/components/imena.camunda/your.component/class.php
   class YourComponent extends CBitrixComponent
   {
       public function executeComponent(): void
       {
           // –õ–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
       }
   }
   ```

3. **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:**
   ```php
   namespace ImenaCamunda\YourModule\Controller;
   
   class YourController extends Controller
   {
       public function yourActionAction(): array
       {
           // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
       }
   }
   ```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç:**
   ```php
   namespace ImenaCamunda\Sync\Client;
   
   class YourClient extends CamundaApiClient
   {
       public function getYourData(): array
       {
           return $this->get('/your-endpoint');
       }
   }
   ```

2. **–°–æ–∑–¥–∞—Ç—å –º–∞–ø–ø–µ—Ä:**
   ```php
   namespace ImenaCamunda\Sync\Mapper;
   
   class YourMapper
   {
       public function mapFromCamunda(array $data): array
       {
           // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
       }
   }
   ```

3. **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
   ```php
   namespace ImenaCamunda\Sync\Service;
   
   class YourSyncService
   {
       public function syncAll(): Result
       {
           // –õ–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
       }
   }
   ```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Unit-—Ç–µ—Å—Ç—ã:**
```php
// tests/Unit/ProcessInstanceTest.php
class ProcessInstanceTest extends TestCase
{
    public function testGetInstance()
    {
        $process = ProcessInstance::getInstance('test-id');
        $this->assertNotNull($process);
    }
}
```

**Integration-—Ç–µ—Å—Ç—ã:**
```php
// tests/Integration/SyncTest.php
class SyncTest extends TestCase
{
    public function testSyncProcess()
    {
        $syncService = new FullSyncService();
        $result = $syncService->syncProcessInstance('test-id');
        $this->assertTrue($result->isSuccess());
    }
}
```

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **PHP:** 8.0+
- **Bitrix24:** 20.0.0+
- **Camunda BPM:** 7.14+
- **MySQL:** 5.7+ –∏–ª–∏ MariaDB 10.3+
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è PHP:** cURL, JSON, PDO, mbstring

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**Camunda –≤–µ—Ä—Å–∏–∏:**
- ‚úÖ Camunda 7.14+ (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- ‚ö†Ô∏è Camunda 7.13 (—á–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- ‚ùå Camunda 7.12 –∏ –Ω–∏–∂–µ (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

**Bitrix –≤–µ—Ä—Å–∏–∏:**
- ‚úÖ Bitrix24 20.0.0+ (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- ‚ö†Ô∏è Bitrix24 19.0.0 (—á–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- ‚ùå Bitrix24 18.0.0 –∏ –Ω–∏–∂–µ (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (>10000) –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

2. **–ü–∞–º—è—Ç—å:**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è `memory_limit` PHP

3. **–°–µ—Ç—å:**
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Camunda —Å–µ—Ä–≤–µ—Ä–æ–º
   - –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è retry –º–µ—Ö–∞–Ω–∏–∑–º

---

## –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### –í–µ—Ä—Å–∏—è 2.3+ (25.01.2025)

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ Webhook-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ REST API –º–µ—Ç–æ–¥ `imena.camunda.diagram.properties.list`
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –í–µ—Ä—Å–∏—è 2.2+ (22.10.2025)

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç Bitrix
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π

### –í–µ—Ä—Å–∏—è 2.1+ (13.10.2025)

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è External Tasks —Å UPSERT —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ RUNTIME –∏ HISTORY
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (Definitions ‚Üí Processes ‚Üí Tasks)

### –í–µ—Ä—Å–∏—è 2.0.0 (13.10.2025)

**–û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Sync
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è ProcessMapper –∏ ProcessDefinitionMapper
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ SyncLogger –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/local/modules/imena.camunda/README.md`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–º–æ–¥—É–ª–µ–π: `/local/modules/imena.camunda/lib/*/README.md`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/local/modules/imena.camunda/docs/`

**–õ–æ–≥–∏:**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: `/local/logs/camunda_sync.log`
- PHP –æ—à–∏–±–∫–∏: `/var/log/php-fpm/error.log`
- Bitrix –ª–æ–≥–∏: —á–µ—Ä–µ–∑ `AddMessage2Log()`

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ú–æ–¥—É–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ Bitrix24.

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 25.01.2025*



---

# IMENA RabbitMQ Module

# üê∞ IMENA RabbitMQ - API Management Module

**–ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è RabbitMQ 3.13.7 –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Management API (–ë–ï–ó –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)**

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 16 –æ–∫—Ç—è–±—Ä—è 2025  
**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** üéØ Beta (Core Features Complete)  
**–®–∞–±–ª–æ–Ω:** [imena.sample](../imena.sample/)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [‚ú® –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç](#-—á—Ç–æ-—É–∂–µ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –º–æ–¥—É–ª—è](#-–∫–æ–Ω—Ü–µ–ø—Ü–∏—è-–º–æ–¥—É–ª—è)
- [üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –æ–±–∑–æ—Ä](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π-–æ–±–∑–æ—Ä)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)

---

## ‚ú® –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### üéâ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Beta v1.0.0)

**‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π –∏–∑ RabbitMQ Management API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- Grid —Å 7 –∫–æ–ª–æ–Ω–∫–∞–º–∏: –ò–º—è, –¢–∏–ø, –°—Ç–∞—Ç—É—Å, –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, –°–æ–æ–±—â–µ–Ω–∏—è (Ready/Unacked/Total)
- Client-side —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (üü¢ running, üü° idle, üî¥ down)
- –ë–µ–π–¥–∂–∏ –¥–ª—è —Ç–∏–ø–æ–≤ –æ—á–µ—Ä–µ–¥–µ–π (classic, quorum, stream)
- –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π (D - durable, AD - auto-delete, Ex - exclusive)

**‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏**
- –î–µ–π—Å—Ç–≤–∏–µ "–û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å" (Purge) —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
- AJAX –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Controllerable —Å –∑–∞—â–∏—Ç–æ–π (Authentication + CSRF)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ –æ–ø–µ—Ä–∞—Ü–∏–π

**‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å —Ñ–æ—Ä–º–æ–π –≤–≤–æ–¥–∞ credentials
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ API
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –º–æ–¥—É–ª—å–Ω—ã—Ö –æ–ø—Ü–∏—è—Ö Bitrix24
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API-first**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `RmqApiClient` —Å 10 –º–µ—Ç–æ–¥–∞–º–∏:
  - `getQueues()` - —Å–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π
  - `purgeQueue()` - –æ—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏
  - `getExchanges()` - —Ç–æ—á–∫–∏ –æ–±–º–µ–Ω–∞
  - `getBindings()` - –ø—Ä–∏–≤—è–∑–∫–∏
  - `getConnections()` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `getOverview()` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - `testConnection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –ë–ï–ó –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ RabbitMQ API
- Value Object `QueueEntity` —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π –≤—Å–µ—Ö –ø–æ–ª–µ–π

**‚úÖ Grid —Å–∏—Å—Ç–µ–º–∞ (19 –∫–ª–∞—Å—Å–æ–≤)**
- –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è Grid —Å–∏—Å—Ç–µ–º–∞ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ `imena.sample`
- 9 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö Field Assemblers –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–æ–Ω–æ–∫ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –ø–æ—Ä—è–¥–∫–∞
- Row Actions (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é) —Å –¥–µ–π—Å—Ç–≤–∏–µ–º Purge
- Panel Actions (–≥—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏) - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ API-driven –¥–∞–Ω–Ω—ã–µ (–±–µ–∑ ORM)

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –§–∞–π–ª–æ–≤ | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ |
|-----------|------------|--------|------------|
| API Client | ‚úÖ 100% | 2 | ~400 |
| Grid System | ‚úÖ 100% | 19 | ~2000 |
| Components | ‚úÖ 100% | 1 | ~220 |
| Pages | ‚úÖ 100% | 2 | ~200 |
| Value Objects | üöß 33% | 1/3 | ~250 |
| Documentation | ‚úÖ 100% | 5 | ~1500 |
| **–ò–¢–û–ì–û** | **‚úÖ ~75%** | **30+** | **~4500** |

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã (v1.1.0+)

- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π (client-side)
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Bitrix Cache, TTL 30s)
- [ ] Exchange management (—Å–ø–∏—Å–æ–∫, –¥–µ—Ç–∞–ª–∏)
- [ ] Binding management (—Å–ø–∏—Å–æ–∫, —Å–æ–∑–¥–∞–Ω–∏–µ)
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –æ—á–µ—Ä–µ–¥–∏ (queue.detail)
- [ ] –ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (bulk purge, bulk delete)
- [ ] Access Control (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞)
- [ ] Monitoring dashboard

---

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –º–æ–¥—É–ª—è

### üí° –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

**IMENA RabbitMQ** ‚Äî —ç—Ç–æ **API-–ø–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è RabbitMQ –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24, –∫–æ—Ç–æ—Ä—ã–π **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ RabbitMQ Management API.

### üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | imena.sample | imena.camunda | **imena.rmq** |
|----------------|--------------|---------------|---------------|
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ b_imena_sample_user | ‚úÖ b_imena_camunda_* | ‚ùå **–ù–ï–¢ —Ç–∞–±–ª–∏—Ü** |
| **ORM –∫–ª–∞—Å—Å—ã** | ‚úÖ UserTable extends DataManager | ‚úÖ ProcessTable | ‚ùå **Value Objects** |
| **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö** | –ë–î –ë–∏—Ç—Ä–∏–∫—Å | –ë–î –ë–∏—Ç—Ä–∏–∫—Å (sync) | **RabbitMQ API** |
| **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** | –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è | –§–æ–Ω–æ–≤–∞—è | ‚ùå **–ù–ï–¢ sync** |
| **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** | DB cache | DB cache | **File cache 30sec** |

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** RabbitMQ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (queues, exchanges, bindings, connections)
- ‚öôÔ∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –æ—á–µ—Ä–µ–¥—è–º–∏ –∏ —Ç–æ—á–∫–∞–º–∏ –æ–±–º–µ–Ω–∞ (create, delete, purge)
- üì® **–ü—É–±–ª–∏–∫–∞—Ü–∏—è** —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏ –∏ exchanges
- üîó **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∞–º–∏** (bindings) –º–µ–∂–¥—É exchanges –∏ queues
- üìà **–ú–µ—Ç—Ä–∏–∫–∏** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (message rates, memory usage)

---

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –æ–±–∑–æ—Ä

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–ª–æ–∏ (–ë–ï–ó ORM)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         üåê PRESENTATION LAYER                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìä Grid System          ‚îÇ  üîç Filter System     ‚îÇ  üéÆ Controllers   ‚îÇ
‚îÇ  ‚Ä¢ RmqGrid (adapted)     ‚îÇ  ‚Ä¢ RmqFilter          ‚îÇ  ‚Ä¢ AJAX Endpoints ‚îÇ
‚îÇ  ‚Ä¢ Column Providers      ‚îÇ  ‚Ä¢ Presets Manager    ‚îÇ  ‚Ä¢ Request Handlers‚îÇ
‚îÇ  ‚Ä¢ Panel Actions         ‚îÇ  ‚Ä¢ Client-side filter ‚îÇ  ‚Ä¢ Validation     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        üöÄ APPLICATION LAYER                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   Controllers            ‚îÇ  Services             ‚îÇ  Access Control  ‚îÇ
‚îÇ  ‚Ä¢ RmqQueueController    ‚îÇ  ‚Ä¢ RmqQueueService    ‚îÇ  ‚Ä¢ Rights Check  ‚îÇ
‚îÇ  ‚Ä¢ RmqExchangeController ‚îÇ  ‚Ä¢ RmqExchangeService ‚îÇ  ‚Ä¢ Permission    ‚îÇ
‚îÇ  ‚Ä¢ AJAX Actions          ‚îÇ  ‚Ä¢ Business Logic     ‚îÇ  ‚Ä¢ Rule Engine   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         üõ†Ô∏è DOMAIN LAYER                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üè¢ Business Services     ‚îÇ  üìã Value Objects     ‚îÇ  üîå API Client    ‚îÇ
‚îÇ  ‚Ä¢ QueueManager          ‚îÇ  ‚Ä¢ QueueEntity        ‚îÇ  ‚Ä¢ RmqApiClient  ‚îÇ
‚îÇ  ‚Ä¢ ExchangeManager       ‚îÇ  ‚Ä¢ ExchangeEntity     ‚îÇ  ‚Ä¢ HTTP Requests ‚îÇ
‚îÇ  ‚Ä¢ MessagePublisher      ‚îÇ  ‚Ä¢ BindingEntity      ‚îÇ  ‚Ä¢ Cache Manager ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      üíæ INFRASTRUCTURE LAYER                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üåê External API         ‚îÇ  üíæ Cache             ‚îÇ  üì¶ NO Database   ‚îÇ
‚îÇ  ‚Ä¢ RabbitMQ Mgmt API     ‚îÇ  ‚Ä¢ File Cache (30s)   ‚îÇ  ‚Ä¢ NO ORM         ‚îÇ
‚îÇ  ‚Ä¢ HTTP Client           ‚îÇ  ‚Ä¢ In-Memory Cache    ‚îÇ  ‚Ä¢ NO Tables      ‚îÇ
‚îÇ  ‚Ä¢ JSON Responses        ‚îÇ  ‚Ä¢ TTL Management     ‚îÇ  ‚Ä¢ NO Migrations  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üìä –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| üèõÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | üìÅ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------------|----------|-------------|
| **üîå API** | 2 –∫–ª–∞—Å—Å–æ–≤ | RmqApiClient (10 –º–µ—Ç–æ–¥–æ–≤), RmqApiException |
| **üìä Grid** | 19 –∫–ª–∞—Å—Å–æ–≤ | –ü–æ–ª–Ω–∞—è Grid —Å–∏—Å—Ç–µ–º–∞ (Column/Row/Panel/Settings/Field Assemblers) |
| **üì¶ Entities** | 1 –∫–ª–∞—Å—Å | QueueEntity (Value Object —Å 15+ –ø–æ–ª—è–º–∏) |
| **üéÆ Components** | 1 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç | queue.list —Å Controllerable (AJAX purgeQueue) |
| **üåê Pages** | 2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã | settings/, queues/ |
| **üîç Filter** | 0 (–ø–ª–∞–Ω) | Client-side —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø) |
| **üîí Access** | 0 (–ø–ª–∞–Ω) | –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø) |
| **üè¢ Services** | 0 (–ø–ª–∞–Ω) | Business logic layer (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø) |

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- ‚úÖ **API Layer** - –ø—Ä—è–º–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å RabbitMQ Management API
- ‚úÖ **Value Objects** - QueueEntity –¥–ª—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Grid System** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è UI —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ **Component Layer** - queue.list —Å AJAX –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- üöß **Service Layer** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- üöß **Access Layer** - –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∞–≤ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Bitrix24:** 20.0.0+
- **PHP:** 8.0+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8.1+)
- **RabbitMQ:** 3.13.7 —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º Management Plugin
- **–î–æ—Å—Ç—É–ø:** RabbitMQ Management API (HTTPS)
- **–ü—Ä–∞–≤–∞:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä Bitrix24

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª—è

#### **–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤**
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–æ–¥—É–ª—å
cp -r /path/to/imena.rmq /home/bitrix/www/local/modules/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
chown -R bitrix:bitrix /home/bitrix/www/local/modules/imena.rmq
chmod -R 755 /home/bitrix/www/local/modules/imena.rmq
```

#### **–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É Bitrix24**
1. –û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-domain.com/bitrix/admin/`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: `Marketplace ‚Üí –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è ‚Üí –ú–æ–¥—É–ª–∏`
3. –ù–∞–π–¥–∏—Ç–µ **"IMENA RabbitMQ"** –≤ —Å–ø–∏—Å–∫–µ
4. –ù–∞–∂–º–∏—Ç–µ **"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"**
5. ‚úÖ **–ú–æ–¥—É–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!** (–ë–ï–ó —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –ë–î)

#### **–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RabbitMQ API**
1. –û—Ç–∫—Ä–æ–π—Ç–µ: `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª–µ–π ‚Üí IMENA RabbitMQ`
2. –£–∫–∞–∂–∏—Ç–µ:
   - **API URL:** `https://rmq.eg-holding.ru:15672/api/`
   - **Username:** `admin` (–∏–ª–∏ –≤–∞—à RabbitMQ admin)
   - **Password:** `********` (RabbitMQ admin password)
   - **Default VHost:** `/` (–∏–ª–∏ –¥—Ä—É–≥–æ–π vhost)
3. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üåê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:** `/local/pages/imena/rmq/settings/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ
- ‚úÖ **–û—á–µ—Ä–µ–¥–∏:** `/local/pages/imena/rmq/queues/` - —Å–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π —Å Grid
- üöß **–¢–æ—á–∫–∏ –æ–±–º–µ–Ω–∞:** `/local/pages/imena/rmq/exchanges/` (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- üöß **–ü—Ä–∏–≤—è–∑–∫–∏:** `/local/pages/imena/rmq/bindings/` (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- üöß **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** `/local/pages/imena/rmq/monitoring/` (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

#### **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

**–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—á–µ—Ä–µ–¥–µ–π:**
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ /local/pages/imena/rmq/queues/
2. Grid –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –æ—á–µ—Ä–µ–¥–∏ –∏–∑ RabbitMQ API
3. –ö–æ–ª–æ–Ω–∫–∏: –ò–º—è, –¢–∏–ø, –°—Ç–∞—Ç—É—Å, –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, –°–æ–æ–±—â–µ–Ω–∏–π
4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º (client-side)
5. –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (running, idle, down)
```

**–û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ (Purge):**
```
1. –ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É –≤ Grid
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é)
3. –í—ã–±–µ—Ä–∏—Ç–µ "–û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å"
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ
5. –û—á–µ—Ä–µ–¥—å –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω–∞ —á–µ—Ä–µ–∑ RabbitMQ API
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ /local/pages/imena/rmq/settings/
2. –£–∫–∞–∂–∏—Ç–µ API URL, Username, Password
3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
4. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ - —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üìñ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| üìÑ –î–æ–∫—É–º–µ–Ω—Ç | üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-------------|
| [idea.md](idea.md) | –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –º–æ–¥—É–ª—è |
| [.cursorrules](.cursorrules) | –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–¥—É–ª—è (711 —Å—Ç—Ä–æ–∫) |
| [README.md](README.md) | –≠—Ç–æ—Ç —Ñ–∞–π–ª |

### üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [üìñ imena.sample](../imena.sample/README.md) - –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
- [üìñ .cursorrules –æ—Å–Ω–æ–≤–Ω–æ–π](../../.cursorrules) - –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ D7

---

## üèóÔ∏è –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (Core Features)

#### **API Client & Infrastructure**
- [x] `lib/Service/RmqApiClient.php` - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç
  - `getQueues()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
  - `purgeQueue()` - –æ—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏
  - `getExchanges()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ—á–µ–∫ –æ–±–º–µ–Ω–∞
  - `getBindings()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–æ–∫
  - `getConnections()` - –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `getOverview()` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - `testConnection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- [x] `lib/Service/RmqApiException.php` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- [x] `lib/Queue/QueueEntity.php` - Value Object –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π

#### **Grid System (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)**
- [x] `lib/Queue/Grid/RmqQueueGrid.php` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å Grid
- [x] `lib/Queue/Grid/Settings/QueueSettings.php` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Grid
- [x] `lib/Queue/Grid/Column/Provider/QueueColumnProvider.php` - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–ª–æ–Ω–æ–∫
- [x] `lib/Queue/Grid/Row/Assembler/QueueRowAssembler.php` - —Å–±–æ—Ä–∫–∞ —Å—Ç—Ä–æ–∫
- [x] **Field Assemblers** (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–µ–π):
  - `BaseQueueField.php` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø–æ–ª–µ–π
  - `QueueNameField.php` - –∏–º—è –æ—á–µ—Ä–µ–¥–∏ —Å —Å—Å—ã–ª–∫–æ–π
  - `QueueTypeField.php` - —Ç–∏–ø –æ—á–µ—Ä–µ–¥–∏ —Å –±–µ–π–¥–∂–∞–º–∏
  - `QueueStateField.php` - —Å—Ç–∞—Ç—É—Å —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
  - `FeaturesField.php` - –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ—á–µ—Ä–µ–¥–∏ (D, AD, Ex)
  - `MessageCountField.php` - —Å—á–µ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  - `StringFieldAssembler.php` - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è
  - `SimpleField.php` - –ø—Ä–æ—Å—Ç—ã–µ –ø–æ–ª—è
  - `DebugField.php` - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- [x] `lib/Queue/Grid/Row/Action/QueueRowProvider.php` - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
- [x] `lib/Queue/Grid/Row/Action/PurgeQueueAction.php` - –¥–µ–π—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏
- [x] `lib/Queue/Grid/Panel/Action/QueuePanelProvider.php` - –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π

#### **Components**
- [x] `imena.rmq:queue.list` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
  - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grid —Å–∏—Å—Ç–µ–º–æ–π
  - AJAX –¥–µ–π—Å—Ç–≤–∏–µ `purgeQueue` (Controllerable)
  - Client-side —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
  - –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (ru)

#### **Pages**
- [x] `/local/pages/imena/rmq/settings/` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ
- [x] `/local/pages/imena/rmq/queues/` - —Å–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π —Å Grid

#### **Installation**
- [x] `install/index.php` - —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –º–æ–¥—É–ª—è (–ë–ï–ó —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü)
- [x] `install/version.php` - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] `install/step.php` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- [x] `install/unstep.php` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è

#### **Documentation**
- [x] `.cursorrules` - –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (711 —Å—Ç—Ä–æ–∫)
- [x] `idea.md` - –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –º–æ–¥—É–ª—è
- [x] `README.md` - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- [x] `lib/Queue/Grid/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Grid —Å–∏—Å—Ç–µ–º—ã
- [x] `TESTING_FIRST_STAGE.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Next Stages)

- [ ] `lib/Exchange/ExchangeEntity.php` - Value Object –¥–ª—è exchanges
- [ ] `lib/Binding/BindingEntity.php` - Value Object –¥–ª—è –ø—Ä–∏–≤—è–∑–æ–∫
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `queue.detail` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –æ—á–µ—Ä–µ–¥–∏
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `exchange.list` - —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ –æ–±–º–µ–Ω–∞
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `binding.list` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—è–∑–æ–∫
- [ ] Filter —Å–∏—Å—Ç–µ–º–∞ (client-side —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Bitrix Cache —Å TTL 30s)
- [ ] Panel Actions (bulk operations)
- [ ] Access Control —Å–∏—Å—Ç–µ–º–∞

---

## üéì –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### ‚ùå –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

```php
// ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å ORM —Ç–∞–±–ª–∏—Ü—ã:
class QueueTable extends DataManager { ... }

// ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å install.sql:
CREATE TABLE b_imena_rmq_queues ...

// ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å sync –∞–≥–µ–Ω—Ç—ã:
class RmqSyncAgent { ... }

// ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ::getList() –∏–∑ ORM:
$queues = QueueTable::getList()->fetchAll();
```

### ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

```php
// ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å Value Objects:
class QueueEntity {
    public function __construct(
        public readonly string $name,
        public readonly string $vhost,
        public readonly int $messagesReady,
    ) {}
}

// ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API Client:
$apiClient = new RmqApiClient();
$apiResponse = $apiClient->getQueues('/');
$queues = array_map(
    fn($data) => QueueEntity::createFromApiResponse($data),
    $apiResponse
);

// ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Bitrix Cache:
$cache = \Bitrix\Main\Data\Cache::createInstance();
if ($cache->initCache(30, 'rmq_queues', 'imena_rmq')) {
    $queues = $cache->getVars();
} else {
    $queues = $apiClient->getQueues('/');
    $cache->endDataCache($queues);
}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### üåê RabbitMQ Management API

**Base URL:** `https://rmq.eg-holding.ru:15672/api/`  
**Auth:** HTTP Basic Authentication  
**Format:** JSON

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:**
- `GET /api/queues` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π
- `GET /api/queues/{vhost}/{name}` - –¥–µ—Ç–∞–ª–∏ –æ—á–µ—Ä–µ–¥–∏
- `PUT /api/queues/{vhost}/{name}` - —Å–æ–∑–¥–∞—Ç—å –æ—á–µ—Ä–µ–¥—å
- `DELETE /api/queues/{vhost}/{name}` - —É–¥–∞–ª–∏—Ç—å –æ—á–µ—Ä–µ–¥—å
- `DELETE /api/queues/{vhost}/{name}/contents` - purge –æ—á–µ—Ä–µ–¥–∏
- `GET /api/exchanges` - —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ –æ–±–º–µ–Ω–∞
- `POST /api/exchanges/{vhost}/{name}/publish` - –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

### üíæ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø)  
**–¢–∏–ø (–ø–ª–∞–Ω):** Bitrix File Cache (in-memory)  
**TTL (–ø–ª–∞–Ω):** 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤, 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π  
**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–ø–ª–∞–Ω):** `bitrix/cache/imena_rmq/`  
**–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è (–ø–ª–∞–Ω):** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ TTL + —Ä—É—á–Ω–∞—è –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º (create/delete)

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ë–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è - –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ RabbitMQ API
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ö–µ—à –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —ç—Ç–∞–ø–µ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
local/modules/imena.rmq/
‚îú‚îÄ‚îÄ üìÑ include.php                                  # –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑—á–∏–∫ PSR-4
‚îú‚îÄ‚îÄ üìÑ .settings.php                                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ üìÑ README.md                                    # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ idea.md                                      # –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ .cursorrules                                 # –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (711 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ üìÑ TESTING_FIRST_STAGE.md                       # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
‚îÇ
‚îú‚îÄ‚îÄ üìÅ install/                                     # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ index.php                                   # –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ (–ë–ï–ó —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü)
‚îÇ   ‚îú‚îÄ‚îÄ version.php                                 # –í–µ—Ä—Å–∏—è 1.0.0
‚îÇ   ‚îú‚îÄ‚îÄ step.php                                    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ unstep.php                                  # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ components/imena.rmq/                       # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îÇ       ‚îî‚îÄ‚îÄ queue.list/                             # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
‚îÇ           ‚îú‚îÄ‚îÄ class.php                           # –ö–ª–∞—Å—Å —Å Controllerable (purgeQueue)
‚îÇ           ‚îú‚îÄ‚îÄ .parameters.php                     # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ           ‚îî‚îÄ‚îÄ templates/.default/template.php     # –®–∞–±–ª–æ–Ω —Å bitrix:main.ui.grid
‚îÇ
‚îú‚îÄ‚îÄ üìÅ lib/                                         # –ö–ª–∞—Å—Å—ã –º–æ–¥—É–ª—è (PSR-4)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Service/                                 # API –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RmqApiClient.php                        # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è RabbitMQ API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RmqApiException.php                     # –ò—Å–∫–ª—é—á–µ–Ω–∏—è API
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Queue/                                   # –°—É—â–Ω–æ—Å—Ç—å –æ—á–µ—Ä–µ–¥–∏
‚îÇ       ‚îú‚îÄ‚îÄ QueueEntity.php                         # Value Object (15+ –ø–æ–ª–µ–π)
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ üìÅ Grid/                                # Grid —Å–∏—Å—Ç–µ–º–∞ (19 –∫–ª–∞—Å—Å–æ–≤)
‚îÇ           ‚îú‚îÄ‚îÄ RmqQueueGrid.php                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å Grid
‚îÇ           ‚îú‚îÄ‚îÄ README.md                           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Grid —Å–∏—Å—Ç–µ–º—ã
‚îÇ           ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ üìÅ Settings/                        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Grid
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ QueueSettings.php               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (ID, VHOST, PATH_TO_DETAIL)
‚îÇ           ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ üìÅ Column/                          # –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–æ–Ω–æ–∫
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ Provider/
‚îÇ           ‚îÇ       ‚îî‚îÄ‚îÄ QueueColumnProvider.php     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–ª–æ–Ω–æ–∫ (7 –∫–æ–ª–æ–Ω–æ–∫)
‚îÇ           ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ üìÅ Row/                             # –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–æ–∫
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Assembler/                   # –°–±–æ—Ä–∫–∞ —Å—Ç—Ä–æ–∫
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QueueRowAssembler.php       # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä Field Assemblers
‚îÇ           ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Field/                      # Field Assemblers (9 –∫–ª–∞—Å—Å–æ–≤)
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ BaseQueueField.php      # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ QueueNameField.php      # –ò–º—è —Å —Å—Å—ã–ª–∫–æ–π
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ QueueTypeField.php      # –¢–∏–ø —Å –±–µ–π–¥–∂–∞–º–∏
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ QueueStateField.php     # –°—Ç–∞—Ç—É—Å —Å —Ü–≤–µ—Ç–∞–º–∏
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FeaturesField.php       # –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ (D, AD, Ex)
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ MessageCountField.php   # –°—á–µ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ StringFieldAssembler.php# –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SimpleField.php         # –ü—Ä–æ—Å—Ç—ã–µ –ø–æ–ª—è
‚îÇ           ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ DebugField.php          # –û—Ç–ª–∞–¥–∫–∞
‚îÇ           ‚îÇ   ‚îÇ
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Action/                      # Row Actions (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é)
‚îÇ           ‚îÇ       ‚îú‚îÄ‚îÄ QueueRowProvider.php        # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–µ–π—Å—Ç–≤–∏–π
‚îÇ           ‚îÇ       ‚îî‚îÄ‚îÄ PurgeQueueAction.php        # –î–µ–π—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏
‚îÇ           ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ üìÅ Panel/                           # –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π Grid
‚îÇ               ‚îî‚îÄ‚îÄ Action/
‚îÇ                   ‚îî‚îÄ‚îÄ QueuePanelProvider.php      # –ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ üìÅ lang/ru/                                     # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (—Ä—É—Å—Å–∫–∏–π)
    ‚îú‚îÄ‚îÄ install/index.php                           # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
    ‚îú‚îÄ‚îÄ lib/Queue/QueueEntity.php                   # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è QueueEntity
    ‚îî‚îÄ‚îÄ lib/Service/RmqApiClient.php                # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è API –∫–ª–∏–µ–Ω—Ç–∞

local/pages/imena/rmq/                              # –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ settings/index.php                              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ queues/index.php                                # –°–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π

local/components/imena.rmq/                         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îî‚îÄ‚îÄ queue.list/                                     # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
    ‚îú‚îÄ‚îÄ class.php
    ‚îú‚îÄ‚îÄ .parameters.php
    ‚îú‚îÄ‚îÄ lang/ru/class.php
    ‚îî‚îÄ‚îÄ templates/.default/template.php
```

**–ò—Ç–æ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- üìÑ **~30 PHP —Ñ–∞–π–ª–æ–≤** (–∫–ª–∞—Å—Å—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- üèóÔ∏è **19 –∫–ª–∞—Å—Å–æ–≤ Grid —Å–∏—Å—Ç–µ–º—ã**
- üîå **2 –∫–ª–∞—Å—Å–∞ API** (Client + Exception)
- üì¶ **1 Value Object** (QueueEntity)
- üéÆ **1 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** (queue.list —Å AJAX)
- üåê **2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (settings, queues)
- üåç **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** (ru) –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** #vlikhobabin@gmail.com  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** Proprietary

### üÜò –ü–æ–º–æ—â—å:
- –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ [.cursorrules](.cursorrules)
- –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –≤ [idea.md](idea.md)
- –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω: [imena.sample](../imena.sample/)

---

## üéñÔ∏è –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

**–ß—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ –≤ —ç—Ç–æ–º –º–æ–¥—É–ª–µ:**
- üèÜ **–ü–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å –±–µ–∑ –ë–î** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üèóÔ∏è **–ü–æ–ª–Ω–∞—è Grid —Å–∏—Å—Ç–µ–º–∞** - 19 –∫–ª–∞—Å—Å–æ–≤, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥ API-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- üéØ **API-first –ø–æ–¥—Ö–æ–¥** - Value Objects –≤–º–µ—Å—Ç–æ ORM
- üìä **Production-ready** - ~4500 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, –ø–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - CSRF + Authentication –¥–ª—è –≤—Å–µ—Ö AJAX –æ–ø–µ—Ä–∞—Ü–∏–π
- üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - 5 README —Ñ–∞–π–ª–æ–≤, 711 —Å—Ç—Ä–æ–∫ .cursorrules

---

**üìù –°–æ–∑–¥–∞–Ω–æ:** Claude Sonnet 4  
**üóìÔ∏è –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 16 –æ–∫—Ç—è–±—Ä—è 2025  
**üóìÔ∏è –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 16 –æ–∫—Ç—è–±—Ä—è 2025  
**üè∑Ô∏è –ú–æ–¥—É–ª—å:** IMENA RabbitMQ Management v1.0.0  
**‚úÖ –°—Ç–∞—Ç—É—Å:** üéØ Beta (75% Complete, Core Features Ready)  
**üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** #vlikhobabin@gmail.com



---

# Imena Storm Module

# Imena Storm Module

–ú–æ–¥—É–ª—å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Storm BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ –≤ Bitrix24.

## –û–ø–∏—Å–∞–Ω–∏–µ

Imena Storm - —ç—Ç–æ –º–æ–¥—É–ª—å –¥–ª—è Bitrix24, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å–∏—Å—Ç–µ–º–æ–π Storm BPMN –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. –ú–æ–¥—É–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —É–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞ —ç—Ç–∞–ø—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º –∏–∑ Storm BPMN
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏**: –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ**: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞ —ç—Ç–∞–ø—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **–¢–µ–≥–∏**: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º —Å –ø–æ–º–æ—â—å—é —Ç–µ–≥–æ–≤
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- **REST API**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
imena.storm/
‚îú‚îÄ‚îÄ lib/Storm/                    # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ Access/                   # –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ Diagram.php              # –û—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ DiagramTable.php         # ORM —Ç–∞–±–ª–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ StormProvider.php        # Provider –¥–ª—è Entity Editor
‚îú‚îÄ‚îÄ install/                     # –£—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ components/              # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ db/mysql/               # SQL —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.php               # –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ lang/                       # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ admin/                      # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îî‚îÄ‚îÄ include.php                 # –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑—á–∏–∫
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–æ–¥—É–ª—å –≤ –ø–∞–ø–∫—É `/local/modules/imena.storm/`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–¥—É–ª—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å Bitrix24
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–æ–¥—É–ª—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–¥—É–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Storm BPMN API
2. –£–∫–∞–∑–∞—Ç—å Bearer —Ç–æ–∫–µ–Ω –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
4. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### storm.detail
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–∏–∞–≥—Ä–∞–º–º–µ.

### storm.list
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞.

## API

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏:

- `GET /rest/imena.storm/diagram.list` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º
- `GET /rest/imena.storm/diagram.get` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –ø–æ ID
- `POST /rest/imena.storm/diagram.add` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã
- `POST /rest/imena.storm/diagram.update` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
- `POST /rest/imena.storm/diagram.delete` - –£–¥–∞–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã

## –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–ú–æ–¥—É–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:

- **VIEW** - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–≥—Ä–∞–º–º
- **CREATE** - –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º
- **UPDATE** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º
- **DELETE** - –£–¥–∞–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º
- **SYNC** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Storm BPMN
- **EXPORT** - –≠–∫—Å–ø–æ—Ä—Ç –¥–∏–∞–≥—Ä–∞–º–º
- **SHARE** - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º
- **ADMIN_SETTINGS** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ú–æ–¥—É–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º D7 API Bitrix24 –∏ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ namespace –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
- –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ spl_autoload_register
- ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É: vlikhobabin@gmail.com

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ú–æ–¥—É–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏ Imena.


---

# Imena Tasks Templates Module

# Imena Tasks Templates Module

–ú–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á Camunda –≤ Bitrix24.

## üìã –û –º–æ–¥—É–ª–µ

**Imena Tasks Templates** - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Camunda BPM. –ú–æ–¥—É–ª—å —è–≤–ª—è–µ—Ç—Å—è **–ø–æ–ª–Ω–æ–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–ø–∏–µ–π** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ "–®–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞—á" –ë–∏—Ç—Ä–∏–∫—Å24 —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ë–î, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∏ API.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### –ò–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞

–ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–≤—É—Ö —Ç–∏–ø–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á:

1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã** (–Ω–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤/–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á)
2. **Camunda —à–∞–±–ª–æ–Ω—ã** (3-5 —Ç—ã—Å. –∑–∞–ø–∏—Å–µ–π –¥–ª—è —ç—Ç–∞–ø–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

- Camunda –ø—Ä–æ—Ü–µ—Å—Å—ã ‚Üí —ç—Ç–∞–ø—ã ‚Üí —à–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞—á ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ –ë–∏—Ç—Ä–∏–∫—Å24
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ BPM
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è BPMN-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –∑–∞–¥–∞—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π Bitrix24
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —à–∞–±–ª–æ–Ω–æ–≤ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `imena.tasks.templates` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Camunda BPM. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ D7 API –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Bitrix24. –ú–æ–¥—É–ª—å –≤–∫–ª—é—á–∞–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞, ORM –∫–ª–∞—Å—Å—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç—å—é, Bitrix24 –∏ Intranet.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **100% –∏–∑–æ–ª—è—Ü–∏—è**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `b_imena_tasks_templates_`
- **D7 API**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º Bitrix D7 ORM
- **PSR-4 Autoload**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ namespace
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å —Ç—ã—Å—è—á–∞–º–∏ –∑–∞–ø–∏—Å–µ–π
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: Bitrix24, Intranet, Social Network, User Fields
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏**: –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏**: –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ, —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏, –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏
- ‚úÖ **–¢–µ–≥–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ **–ß–µ–∫-–ª–∏—Å—Ç—ã**: –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å –¥–µ—Ä–µ–≤–æ–º –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- ‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å, Bitrix24, Intranet, User Fields
- ‚úÖ **Camunda –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è BPMN –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ **ORM D7**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º Bitrix ORM
- ‚úÖ **AJAX API**: –ì–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —Ç—ã—Å—è—á –∑–∞–ø–∏—Å–µ–π

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `b_imena_tasks_templates_`:

1. **b_imena_tasks_templates** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —à–∞–±–ª–æ–Ω–æ–≤
2. **b_imena_tasks_templates_member** - —É—á–∞—Å—Ç–Ω–∏–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤
3. **b_imena_tasks_templates_tag** - —Ç–µ–≥–∏ —à–∞–±–ª–æ–Ω–æ–≤
4. **b_imena_tasks_templates_dependence** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–æ–≤
5. **b_imena_tasks_templates_permission** - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
6. **b_imena_tasks_templates_scenario** - —Å—Ü–µ–Ω–∞—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤
7. **b_imena_tasks_templates_chl_item** - —á–µ–∫-–ª–∏—Å—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤
8. **b_imena_tasks_templates_chl_item_member** - —É—á–∞—Å—Ç–Ω–∏–∫–∏ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
9. **b_imena_tasks_templates_chl_item_tree** - –¥–µ—Ä–µ–≤–æ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
10. **b_imena_tasks_templates_dep** - –¥–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
11. **b_imena_tasks_templates_access** - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (legacy)
12. **b_imena_tasks_templates_system_log** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥—É–ª–∏ Bitrix24:
- ‚úÖ `tasks` - –º–æ–¥—É–ª—å –∑–∞–¥–∞—á (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚úÖ `main` - –±–∞–∑–æ–≤—ã–π –º–æ–¥—É–ª—å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚úÖ `ui` - –º–æ–¥—É–ª—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚úÖ `socialnetwork` - —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚öôÔ∏è `intranet` - –∏–Ω—Ç—Ä–∞–Ω–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚öôÔ∏è `bitrix24` - Bitrix24 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- PHP: **7.4+** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8.0+)
- Bitrix: **20.0+** (D7 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- MySQL: **5.7+** –∏–ª–∏ **8.0+**

### 2. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –º–æ–¥—É–ª—è

–ú–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
```
/local/modules/imena.tasks.templates/
```

**–í–∞–∂–Ω–æ:** –ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç D7 PSR-4 –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ namespace `Imena\Tasks\Templates`

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å Bitrix24
2. –û—Ç–∫—Ä–æ–π—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –ú–æ–¥—É–ª–∏**
3. –ù–∞–π–¥–∏—Ç–µ –º–æ–¥—É–ª—å **`imena.tasks.templates`**
4. –ù–∞–∂–º–∏—Ç–µ **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å**

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å

```bash
cd /path/to/bitrix

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª—è
php /local/modules/imena.tasks.templates/install/index.php

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
php /local/modules/imena.tasks.templates/install/index.php
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```php
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥—É–ª—è
\Bitrix\Main\Loader::includeModule('imena.tasks.templates');

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
$result = \Imena\Tasks\Templates\Internals\TemplateTable::getList([
    'select' => ['ID'],
    'limit' => 1
]);

if ($result->getSelectedRowsCount() >= 0) {
    echo "‚úÖ –ú–æ–¥—É–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ";
}
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ. –î–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**
2. –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **–ó–∞–¥–∞—á–∏ ‚Üí –®–∞–±–ª–æ–Ω—ã Imena**
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞:
   - `template_read` - —á—Ç–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
   - `template_create` - —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
   - `template_edit` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - `template_remove` - —É–¥–∞–ª–µ–Ω–∏–µ
   - `template_save` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

### 7. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã:

```sql
-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
ALTER TABLE b_imena_tasks_templates 
    ADD INDEX idx_type_created (TEMPLATE_TYPE, CREATED_BY);
    
ALTER TABLE b_imena_tasks_templates 
    ADD INDEX idx_process_key (PROCESS_KEY);
    
-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
ALTER TABLE b_imena_tasks_templates_member 
    ADD INDEX idx_user_type (USER_ID, TYPE);
    
-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–µ–≥–æ–≤
ALTER TABLE b_imena_tasks_templates_tag 
    ADD INDEX idx_name (NAME);
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.tasks:templates.list',
    '',
    [
        'USER_ID' => $userId,
        'GRID_ID' => 'imena_templates_grid',
        'FILTER_ID' => 'imena_templates_filter',
    ]
);
?>
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.tasks:task.template',
    '',
    [
        'TEMPLATE_ID' => $templateId,
        'ACTION' => 'view',  // view, edit, create
        'USER_ID' => $userId,
    ]
);
?>
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

```
imena.tasks.templates/
‚îú‚îÄ‚îÄ lib/                                    # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ ImenaTaskTemplates.php             # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å-–æ–±—ë—Ä—Ç–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ Util.php                            # –ë–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Access/                             # –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ Manager/                            # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ Internals/                          # ORM –∫–ª–∞—Å—Å—ã –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ Provider/                           # –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ Control/                            # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ Item/                               # –û–±—ä–µ–∫—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ Integration/                        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Util/                               # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ CheckList/                          # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–µ–∫-–ª–∏—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Controller/                         # AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ Dispatcher/                         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ Service/                            # –°–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
‚îÇ
‚îú‚îÄ‚îÄ install/                                # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ db/mysql/                          # SQL —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ components/                        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ agents/                            # –ê–≥–µ–Ω—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ lang/                                   # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ include.php                            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ idea.md                                # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md                              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ lib/

#### Access/ - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```
Access/
‚îú‚îÄ‚îÄ TemplateAccessController.php           # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
‚îú‚îÄ‚îÄ ImenaTemplateAccessController.php     # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è Imena
‚îú‚îÄ‚îÄ ActionDictionary.php                   # –°–ª–æ–≤–∞—Ä—å –¥–µ–π—Å—Ç–≤–∏–π (read, edit, remove, etc.)
‚îú‚îÄ‚îÄ AccessErrorable.php                    # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ AccessErrorTrait.php                   # –¢—Ä–µ–π—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ AccessibleTask.php                     # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–Ω–æ–π –∑–∞–¥–∞—á–∏
‚îÇ
‚îú‚îÄ‚îÄ Model/                                 # –ú–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ TemplateModel.php                 # –ú–æ–¥–µ–ª—å —à–∞–±–ª–æ–Ω–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
‚îÇ   ‚îî‚îÄ‚îÄ UserModel.php                     # –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
‚îÇ
‚îú‚îÄ‚îÄ Rule/                                  # –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ TemplateReadRule.php             # –ü—Ä–∞–≤–∏–ª–æ —á—Ç–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ TemplateEditRule.php             # –ü—Ä–∞–≤–∏–ª–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ TemplateCreateRule.php           # –ü—Ä–∞–≤–∏–ª–æ —Å–æ–∑–¥–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ TemplateRemoveRule.php           # –ü—Ä–∞–≤–∏–ª–æ —É–¥–∞–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ TemplateSaveRule.php             # –ü—Ä–∞–≤–∏–ª–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ Traits/
‚îÇ       ‚îî‚îÄ‚îÄ GroupTrait.php                # –¢—Ä–µ–π—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—Ä—É–ø–ø–∞–º–∏
‚îÇ
‚îú‚îÄ‚îÄ Permission/                            # –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ PermissionDictionary.php         # –°–ª–æ–≤–∞—Ä—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ TasksTemplatePermissionTable.php # –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
‚îÇ
‚îî‚îÄ‚îÄ Role/                                  # –†–æ–ª–∏
    ‚îî‚îÄ‚îÄ RoleDictionary.php                # –°–ª–æ–≤–∞—Ä—å —Ä–æ–ª–µ–π
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `TemplateAccessController` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —à–∞–±–ª–æ–Ω–∞–º
- `ActionDictionary` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π: `ACTION_TEMPLATE_READ`, `ACTION_TEMPLATE_CREATE`, etc.
- `TemplateModel` - –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –Ω–∞ —à–∞–±–ª–æ–Ω

#### Internals/ - ORM –∫–ª–∞—Å—Å—ã –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏

```
Internals/
‚îú‚îÄ‚îÄ TemplateTable.php                      # –û—Å–Ω–æ–≤–Ω–∞—è ORM —Ç–∞–±–ª–∏—Ü–∞ —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ TemplateObject.php                     # –û–±—ä–µ–∫—Ç —à–∞–±–ª–æ–Ω–∞ (Entity)
‚îú‚îÄ‚îÄ Template.php                           # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —à–∞–±–ª–æ–Ω–∞
‚îú‚îÄ‚îÄ TemplateCollection.php                 # –ö–æ–ª–ª–µ–∫—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ TemplateMemberTable.php                # –¢–∞–±–ª–∏—Ü–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚îú‚îÄ‚îÄ TemplateMemberObject.php               # –û–±—ä–µ–∫—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ TemplateMemberCollection.php           # –ö–æ–ª–ª–µ–∫—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ TemplateTagTable.php                   # –¢–∞–±–ª–∏—Ü–∞ —Ç–µ–≥–æ–≤
‚îú‚îÄ‚îÄ TemplateTagObject.php                  # –û–±—ä–µ–∫—Ç —Ç–µ–≥–∞
‚îÇ
‚îú‚îÄ‚îÄ TemplateDependenceTable.php            # –¢–∞–±–ª–∏—Ü–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ TemplateDependenceObject.php           # –û–±—ä–µ–∫—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ DependenceTable.php                    # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ
‚îú‚îÄ‚îÄ ScenarioTable.php                      # –¢–∞–±–ª–∏—Ü–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ SystemLogTable.php                     # –¢–∞–±–ª–∏—Ü–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ AccessTable.php                        # –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–≤ (legacy)
‚îÇ
‚îú‚îÄ‚îÄ CheckListTable.php                     # –¢–∞–±–ª–∏—Ü–∞ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ CheckListObject.php                    # –û–±—ä–µ–∫—Ç —á–µ–∫-–ª–∏—Å—Ç–∞
‚îú‚îÄ‚îÄ CheckListCollection.php                # –ö–æ–ª–ª–µ–∫—Ü–∏—è —á–µ–∫-–ª–∏—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ CheckListMemberTable.php               # –¢–∞–±–ª–∏—Ü–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ CheckListTreeTable.php                 # –¢–∞–±–ª–∏—Ü–∞ –¥–µ—Ä–µ–≤–∞ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ ReplicateParamsCorrector.php           # –ö–æ—Ä—Ä–µ–∫—Ç–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ Template/                              # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ImenaTemplateCheckListTable.php   # –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —á–µ–∫-–ª–∏—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ImenaTemplateCheckListMemberTable.php
‚îÇ   ‚îî‚îÄ‚îÄ ImenaTemplateCheckListTree.php
‚îÇ
‚îú‚îÄ‚îÄ CheckList/                             # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã —á–µ–∫-–ª–∏—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ MemberTable.php
‚îÇ
‚îî‚îÄ‚îÄ Routes/                                # –†–æ—É—Ç–∏–Ω–≥
    ‚îî‚îÄ‚îÄ RouteDictionary.php                # –°–ª–æ–≤–∞—Ä—å –º–∞—Ä—à—Ä—É—Ç–æ–≤
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `TemplateTable` - ORM –¥–ª—è `b_imena_tasks_templates` (40+ –ø–æ–ª–µ–π, –≤–∫–ª—é—á–∞—è –∫–∞—Å—Ç–æ–º–Ω—ã–µ –¥–ª—è Camunda)
- `TemplateObject` - –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç —à–∞–±–ª–æ–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Control
- `ScenarioTable` - —Å—Ü–µ–Ω–∞—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ (default, crm)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Camunda: `TEMPLATE_TYPE`, `PROCESS_KEY`, `BPMN_XML`, etc.

#### Control/ - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π

```
Control/
‚îú‚îÄ‚îÄ Template.php                           # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ BaseTemplateControlTrait.php           # –ë–∞–∑–æ–≤—ã–π —Ç—Ä–µ–π—Ç –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ TemplateMember.php                     # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚îú‚îÄ‚îÄ TemplateTag.php                        # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ç–µ–≥–æ–≤
‚îú‚îÄ‚îÄ TemplateDependence.php                 # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ
‚îú‚îÄ‚îÄ Handler/                               # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ TemplateFieldHandler.php          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ Exception/
‚îÇ       ‚îî‚îÄ‚îÄ TemplateFieldValidateException.php
‚îÇ
‚îî‚îÄ‚îÄ Exception/                             # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
    ‚îú‚îÄ‚îÄ TemplateAddException.php          # –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ TemplateUpdateException.php       # –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ TemplateNotFoundException.php     # –ù–µ –Ω–∞–π–¥–µ–Ω–æ
    ‚îú‚îÄ‚îÄ TemplateFieldValidateException.php # –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ UserFieldTemplateAddException.php # –û—à–∏–±–∫–∞ User Fields
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `Template::add()` - —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —á–µ—Ä–µ–∑ ORM
- `Template::update()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ORM
- `Template::delete()` - —É–¥–∞–ª–µ–Ω–∏–µ
- `TemplateFieldHandler` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã

#### Provider/ - –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```
Provider/
‚îú‚îÄ‚îÄ TemplateProvider.php                   # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ ImenaTemplateProvider.php             # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è Imena
‚îî‚îÄ‚îÄ UserProviderTrait.php                 # –¢—Ä–µ–π—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `TemplateProvider::getList()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- `TemplateProvider::getCount()` - –ø–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- `ImenaTemplateProvider` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤

#### Manager/ - –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

```
Manager/
‚îú‚îÄ‚îÄ Manager.php                            # –ë–∞–∑–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
‚îú‚îÄ‚îÄ ImenaTemplateManager.php              # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
‚îÇ
‚îî‚îÄ‚îÄ Task/                                  # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∑–∞–¥–∞—á
    ‚îú‚îÄ‚îÄ Template.php                       # –ú–µ–Ω–µ–¥–∂–µ—Ä —à–∞–±–ª–æ–Ω–æ–≤
    ‚îú‚îÄ‚îÄ CheckList.php                      # –ú–µ–Ω–µ–¥–∂–µ—Ä —á–µ–∫-–ª–∏—Å—Ç–æ–≤
    ‚îÇ
    ‚îî‚îÄ‚îÄ Template/                          # –°—É–±—Å—É—â–Ω–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–æ–≤
        ‚îú‚îÄ‚îÄ Responsible.php                # –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π
        ‚îú‚îÄ‚îÄ Accomplice.php                 # –°–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
        ‚îú‚îÄ‚îÄ Auditor.php                    # –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å
        ‚îú‚îÄ‚îÄ Originator.php                 # –ü–æ—Å—Ç–∞–Ω–æ–≤—â–∏–∫
        ‚îú‚îÄ‚îÄ Project.php                    # –ü—Ä–æ–µ–∫—Ç
        ‚îú‚îÄ‚îÄ ParentTask.php                 # –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞
        ‚îú‚îÄ‚îÄ RelatedTask.php                # –°–≤—è–∑–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞
        ‚îú‚îÄ‚îÄ Tag.php                        # –¢–µ–≥
        ‚îú‚îÄ‚îÄ SubEntity.php                  # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å—É–±—Å—É—â–Ω–æ—Å—Ç–µ–π
        ‚îî‚îÄ‚îÄ CheckList.php                  # –ß–µ–∫-–ª–∏—Å—Ç
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `ImenaTemplateManager` - –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏
- `Template` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —à–∞–±–ª–æ–Ω–∞

#### Item/ - –û–±—ä–µ–∫—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

```
Item/
‚îú‚îÄ‚îÄ Task/
‚îÇ   ‚îî‚îÄ‚îÄ Template.php                       # –ë–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏
‚îÇ
‚îî‚îÄ‚îÄ Converter/                             # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã
    ‚îî‚îÄ‚îÄ Task/
        ‚îî‚îÄ‚îÄ Template/
            ‚îî‚îÄ‚îÄ ToTemplate.php             # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤ —à–∞–±–ª–æ–Ω
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `Item\Task\Template` - –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏ `save()`, `load()`, `delete()`

#### CheckList/ - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–µ–∫-–ª–∏—Å—Ç–æ–≤

```
CheckList/
‚îî‚îÄ‚îÄ Template/                              # –ß–µ–∫-–ª–∏—Å—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤
    ‚îú‚îÄ‚îÄ TemplateCheckListFacade.php       # –§–∞—Å–∞–¥ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
    ‚îú‚îÄ‚îÄ ImenaTemplateCheckListFacade.php  # –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞—Å–∞–¥
    ‚îú‚îÄ‚îÄ TemplateCheckListTree.php         # –î–µ—Ä–µ–≤–æ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
    ‚îî‚îÄ‚îÄ TemplateCheckListConverterHelper.php # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —á–µ–∫-–ª–∏—Å—Ç–æ–≤
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `TemplateCheckListFacade::merge()` - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
- `TemplateCheckListTree` - —Ä–∞–±–æ—Ç–∞ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π

#### Integration/ - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

```
Integration/
‚îú‚îÄ‚îÄ Integration.php                        # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ Dispatcher.php                         # –î–∏—Å–ø–µ—Ç—á–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
‚îÇ
‚îú‚îÄ‚îÄ Bitrix24/                              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix24
‚îÇ   ‚îú‚îÄ‚îÄ FeatureDictionary.php             # –°–ª–æ–≤–∞—Ä—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ Limit/
‚îÇ       ‚îî‚îÄ‚îÄ TaskLimit.php                 # –õ–∏–º–∏—Ç—ã –∑–∞–¥–∞—á
‚îÇ
‚îú‚îÄ‚îÄ Intranet/                              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Intranet
‚îÇ   ‚îî‚îÄ‚îÄ Settings.php                      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Intranet
‚îÇ
‚îú‚îÄ‚îÄ SocialNetwork/                         # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç—å—é
‚îÇ   ‚îú‚îÄ‚îÄ Group.php                         # –ì—Ä—É–ø–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ User.php                          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ UserField/                             # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ TemplateUserField.php            # UF –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ Notification/                          # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ TemplateNotification.php         # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —à–∞–±–ª–æ–Ω–∞—Ö
‚îÇ
‚îî‚îÄ‚îÄ Event/                                 # –°–æ–±—ã—Ç–∏—è
    ‚îî‚îÄ‚îÄ TemplateEvent.php                 # –°–æ–±—ã—Ç–∏—è —à–∞–±–ª–æ–Ω–æ–≤
```

#### Util/ - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã

```
Util/
‚îú‚îÄ‚îÄ TemplateUser.php                       # –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ TemplateUrl.php                        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL
‚îú‚îÄ‚îÄ TemplateCollection.php                 # –ö–æ–ª–ª–µ–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ TemplateLogger.php                     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ TemplateCache.php                      # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ TemplateAssert.php                     # –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
‚îú‚îÄ‚îÄ TemplateDate.php                       # –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
‚îú‚îÄ‚îÄ TemplateValidator.php                  # –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
‚îú‚îÄ‚îÄ TemplateResult.php                     # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ TemplateType.php                       # –†–∞–±–æ—Ç–∞ —Å —Ç–∏–ø–∞–º–∏
‚îú‚îÄ‚îÄ Type.php                               # –ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã
‚îÇ
‚îú‚îÄ‚îÄ UserField/                             # UF —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ TemplateUserField.php             # –†–∞–±–æ—Ç–∞ —Å UF –ø–æ–ª—è–º–∏
‚îÇ
‚îî‚îÄ‚îÄ Restriction/                           # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ TemplateRestriction.php           # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
```

#### Controller/ - AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

```
Controller/
‚îî‚îÄ‚îÄ TemplateController.php                 # AJAX –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```

**–ú–µ—Ç–æ–¥—ã:**
- `listAction()` - —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ AJAX
- `getAction()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ AJAX
- `addAction()` - —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ AJAX
- `updateAction()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ AJAX

#### Dispatcher/ - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

```
Dispatcher/
‚îî‚îÄ‚îÄ PublicAction/                          # –ü—É–±–ª–∏—á–Ω—ã–µ AJAX –¥–µ–π—Å—Ç–≤–∏—è
    ‚îî‚îÄ‚îÄ Task/
        ‚îî‚îÄ‚îÄ Template.php                   # AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —à–∞–±–ª–æ–Ω–æ–≤
```

#### Service/ - –°–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã

```
Service/
‚îî‚îÄ‚îÄ TemplateService.php                    # –°–µ—Ä–≤–∏—Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
```

### –ü–æ–¥—Å—á—ë—Ç —Ñ–∞–π–ª–æ–≤

–í—Å–µ–≥–æ –≤ –º–æ–¥—É–ª–µ: **107 PHP —Ñ–∞–π–ª–æ–≤** –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ `lib/`

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞–º:**
- **Access/** - 16 —Ñ–∞–π–ª–æ–≤ (—Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞)
- **Internals/** - 31 —Ñ–∞–π–ª (ORM –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏)
- **Control/** - 9 —Ñ–∞–π–ª–æ–≤ (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π)
- **Integration/** - 17 —Ñ–∞–π–ª–æ–≤ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
- **Manager/** - 13 —Ñ–∞–π–ª–æ–≤ (–º–µ–Ω–µ–¥–∂–µ—Ä—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏)
- **Util/** - 14 —Ñ–∞–π–ª–æ–≤ (—É—Ç–∏–ª–∏—Ç—ã)
- **Item/** - 2 —Ñ–∞–π–ª–∞ (–±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç—ã)
- **Provider/** - 3 —Ñ–∞–π–ª–∞ (–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö)
- **CheckList/** - 4 —Ñ–∞–π–ª–∞ (—á–µ–∫-–ª–∏—Å—Ç—ã)
- **Controller/** - 1 —Ñ–∞–π–ª (AJAX)
- **Dispatcher/** - 1 —Ñ–∞–π–ª (–ø—É–±–ª–∏—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è)
- **Service/** - 1 —Ñ–∞–π–ª (—Å–µ—Ä–≤–∏—Å—ã)
- **Root** - 2 —Ñ–∞–π–ª–∞ (ImenaTaskTemplates.php, Util.php)

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á Camunda. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑:

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda —Å —à–∞–±–ª–æ–Ω–∞–º–∏**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ BPMN-–¥–∏–∞–≥—Ä–∞–º–º
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**
   - –¢—Ä–∏–≥–≥–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –∏–∑ Camunda
   - –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
   - –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤**
   - –•—Ä–∞–Ω–µ–Ω–∏–µ BPMN XML
   - Process Keys –∏ Names
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è Camunda

–¢–∞–±–ª–∏—Ü–∞ `b_imena_tasks_templates` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:

```php
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ TemplateTable.php
new StringField('TEMPLATE_TYPE', ['default_value' => 'camunda']),
new TextField('BPMN_XML'),           // BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞
new TextField('CAMUNDA_CONFIG'),     // JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
new StringField('PROCESS_KEY'),      // Key –ø—Ä–æ—Ü–µ—Å—Å–∞ Camunda
new StringField('PROCESS_NAME'),     // –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
new IntegerField('VERSION'),         // –í–µ—Ä—Å–∏—è —à–∞–±–ª–æ–Ω–∞
new TextField('METADATA'),           // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
```

## üé® –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
   - **Internals/** - —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (ORM)
   - **Control/** - —É—Ä–æ–≤–µ–Ω—å –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–π
   - **Manager/** - —É—Ä–æ–≤–µ–Ω—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - **Item/** - —É—Ä–æ–≤–µ–Ω—å –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç–æ–≤
   - **Controller/** - —É—Ä–æ–≤–µ–Ω—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
   - –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∑–æ–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–π—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
   - –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

3. **D7 —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã**
   - PSR-4 –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞
   - –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
   - ORM –≤–º–µ—Å—Ç–æ SQL
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Result –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### –¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤

```
Component (AJAX) 
    ‚Üì
Controller (TemplateController)
    ‚Üì
Manager (ImenaTemplateManager)
    ‚Üì
Control (Template)
    ‚Üì
ORM (TemplateObject -> save())
    ‚Üì
Database (b_imena_tasks_templates)
```

### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**1. –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞:**
```
–§–æ—Ä–º–∞ ‚Üí Controller::addAction() 
     ‚Üí Control::Template::add()
     ‚Üí TemplateFieldHandler (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
     ‚Üí TemplateObject::save()
     ‚Üí ORM Insert
     ‚Üí setMembers() ‚Üí setTags() ‚Üí setDependencies()
```

**2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞:**
```
Component ‚Üí Provider::getList()
        ‚Üí TemplateProvider::buildQuery()
        ‚Üí SQL —Å JOIN –Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤/—Ç–µ–≥–∏
        ‚Üí TemplateAccessController (–ø—Ä–∞–≤–∞)
        ‚Üí Format Results
```

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:**
```
User Action ‚Üí TemplateAccessController::check()
          ‚Üí Role Rules
          ‚Üí TemplateModel (–∑–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞)
          ‚Üí Permission Check
          ‚Üí Boolean Result
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —á–µ—Ä–µ–∑ API

```php
use Imena\Tasks\Templates\Control\Template;

$manager = new Template($userId);

$fields = [
    'TITLE' => '–®–∞–±–ª–æ–Ω –ø—Ä–æ—Ü–µ—Å—Å–∞ onboarding',
    'DESCRIPTION' => '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞',
    'RESPONSIBLES' => ['U1' => 1],
    'CREATED_BY' => $userId,
    'GROUP_ID' => 0,
    'REPLICATE' => 'N',
    
    // Camunda –ø–æ–ª—è
    'TEMPLATE_TYPE' => 'camunda',
    'PROCESS_KEY' => 'onboarding_process',
    'PROCESS_NAME' => 'Onboarding New Employee',
    'VERSION' => 1,
    'BPMN_XML' => file_get_contents('onboarding.bpmn'),
];

$template = $manager->add($fields);
$templateId = $template->getId();

echo "–°–æ–∑–¥–∞–Ω —à–∞–±–ª–æ–Ω ID: {$templateId}";
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

```php
use Imena\Tasks\Templates\Provider\TemplateProvider;

$provider = new TemplateProvider($DB, $USER_FIELD_MANAGER);

$order = ['ID' => 'DESC'];
$filter = [
    'TEMPLATE_TYPE' => 'camunda',
    'CREATED_BY' => $userId,
];
$select = ['ID', 'TITLE', 'PROCESS_KEY', 'VERSION'];
$params = ['USER_ID' => $userId];

$result = $provider->getList($order, $filter, $select, $params);

while ($row = $result->Fetch()) {
    echo "Template: {$row['TITLE']}\n";
    echo "Process: {$row['PROCESS_KEY']}\n";
    echo "Version: {$row['VERSION']}\n\n";
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```php
use Imena\Tasks\Templates\Access\TemplateAccessController;
use Imena\Tasks\Templates\Access\ActionDictionary;

// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
if (TemplateAccessController::can($userId, ActionDictionary::ACTION_TEMPLATE_EDIT, $templateId)) {
    // –†–∞–∑—Ä–µ—à–µ–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    $manager = new \Imena\Tasks\Templates\Control\Template($userId);
    $template = $manager->update($templateId, $fields);
} else {
    // –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω
    throw new \Exception('Access denied');
}
```

### –†–∞–±–æ—Ç–∞ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

```php
use Imena\Tasks\Templates\Control\TemplateMember;

$memberController = new TemplateMember($userId);

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
$memberController->add($templateId, [
    'TYPE' => 'R',  // R - Responsible, A - Accomplice, U - Auditor
    'USER_ID' => $newUserId
]);

// –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞
$memberController->delete($templateId, $userId);
```

### –†–∞–±–æ—Ç–∞ —Å —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏

```php
use Imena\Tasks\Templates\CheckList\Template\TemplateCheckListFacade;

// –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–æ–≤
$items = [
    ['TITLE' => '–®–∞–≥ 1', 'CHECKED' => 0],
    ['TITLE' => '–®–∞–≥ 2', 'CHECKED' => 0],
    ['TITLE' => '–®–∞–≥ 3', 'CHECKED' => 0],
];

TemplateCheckListFacade::merge($templateId, $userId, $items);
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Item Object

```php
use Imena\Tasks\Templates\Item\Task\Template;

// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
$template = new Template(0, $userId);
$template->setData([
    'TITLE' => '–ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω —á–µ—Ä–µ–∑ Item',
    'RESPONSIBLE_ID' => 1,
]);
$template->save();
$templateId = $template->getId();

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
$template = new Template($templateId, $userId);
$data = $template->getData();
echo $data['TITLE'];

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
$template->setField('DESCRIPTION', '–û–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ');
$template->save();
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

#### –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: `b_imena_tasks_templates`

```sql
CREATE TABLE b_imena_tasks_templates (
    ID INT(11) NOT NULL AUTO_INCREMENT,
    TITLE VARCHAR(255),
    DESCRIPTION TEXT,
    PRIORITY CHAR(1) DEFAULT '1',
    STATUS CHAR(1) DEFAULT '1',
    RESPONSIBLE_ID INT(11),
    CREATED_BY INT(11),
    
    -- Camunda —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
    TEMPLATE_TYPE VARCHAR(50) DEFAULT 'camunda',
    BPMN_XML TEXT,
    CAMUNDA_CONFIG TEXT,
    PROCESS_KEY VARCHAR(255),
    PROCESS_NAME VARCHAR(255),
    VERSION INT(11),
    METADATA TEXT,
    
    -- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è
    CREATED_DATE DATETIME,
    UPDATED_DATE DATETIME,
    
    PRIMARY KEY (ID),
    INDEX idx_type (TEMPLATE_TYPE),
    INDEX idx_process_key (PROCESS_KEY),
    INDEX idx_created_by (CREATED_BY)
);
```

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü:** —Å–º. —Ä–∞–∑–¥–µ–ª "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" –≤—ã—à–µ.

### –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π

| –ü–æ–ª–µ –ë–î | –¢–∏–ø | ORM Field | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|-----|-----------|-----------|
| `ID` | INT | IntegerField | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `TITLE` | VARCHAR(255) | StringField | –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ |
| `DESCRIPTION` | TEXT | TextField | –û–ø–∏—Å–∞–Ω–∏–µ |
| `TEMPLATE_TYPE` | VARCHAR(50) | StringField | –¢–∏–ø —à–∞–±–ª–æ–Ω–∞ (camunda/standard) |
| `PROCESS_KEY` | VARCHAR(255) | StringField | –ö–ª—é—á –ø—Ä–æ—Ü–µ—Å—Å–∞ Camunda |
| `BPMN_XML` | TEXT | TextField | BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞ |
| `VERSION` | INT | IntegerField | –í–µ—Ä—Å–∏—è —à–∞–±–ª–æ–Ω–∞ |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤:

1. **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç—É–ø–∞**: `TemplateAccessController`
2. **–ú–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–∞**: `TemplateModel`, `UserModel`
3. **–ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞**: Rule –∫–ª–∞—Å—Å—ã (Read, Edit, Create, Remove)
4. **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è**: `PermissionDictionary`
5. **–†–æ–ª–∏**: `RoleDictionary`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î

```php
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–∞–≤–∞–º –≤ Provider
$provider = new TemplateProvider($DB, $USER_FIELD_MANAGER);
$result = $provider->getList(...); // –†–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏–µ–π
if (!TemplateAccessController::can($userId, ActionDictionary::ACTION_TEMPLATE_EDIT, $templateId)) {
    throw new AccessDeniedException();
}
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç SQL Injection

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ ORM (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `QueryBuilder` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ SQL
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `TemplateFieldHandler`

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤

1. **–ò–Ω–¥–µ–∫—Å—ã –ë–î**
   ```sql
   CREATE INDEX idx_type_created ON b_imena_tasks_templates(TEMPLATE_TYPE, CREATED_BY);
   CREATE INDEX idx_process_key ON b_imena_tasks_templates(PROCESS_KEY);
   CREATE INDEX idx_user_type ON b_imena_tasks_templates_member(USER_ID, TYPE);
   ```

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   ```php
   // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   $cache = new TemplateCache();
   $templates = $cache->remember('templates_list_' . $userId, function() {
       return TemplateProvider::getList(...);
   });
   ```

3. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**
   ```php
   // –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–∏–º–∏—Ç—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–æ–≤
   $result = $provider->getList(
       ['ID' => 'DESC'],
       ['TEMPLATE_TYPE' => 'camunda'],
       ['ID', 'TITLE'],
       [],
       ['nPageSize' => 50]  // –õ–∏–º–∏—Ç 50 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
   );
   ```

4. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**
   ```php
   // –ì—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   $members = TemplateMemberTable::getList([
       'filter' => ['TEMPLATE_ID' => $templateIds],
       'select' => ['*']
   ])->fetchAll();
   ```

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```php
use Imena\Tasks\Templates\Util\TemplateLogger;

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
TemplateLogger::log($message, 'INFO');
TemplateLogger::error($message);
TemplateLogger::warning($message);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

```php
// –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç Result
$result = $manager->add($fields);

if (!$result->isSuccess()) {
    // –ü–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫–∏
    $errors = $result->getErrors();
    foreach ($errors as $error) {
        echo $error->getMessage() . "\n";
    }
}
```

### Debug —Ä–µ–∂–∏–º

```php
// –í–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
\Bitrix\Main\Config\Configuration::setValue('value', true);
ini_set('display_errors', 1);
error_reporting(E_ALL);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/tests/`:

```php
<?php
namespace Tests\Unit;

use PHPUnit\Framework\TestCase;
use Imena\Tasks\Templates\Control\Template;

class TemplateTest extends TestCase
{
    public function testCreateTemplate()
    {
        $manager = new Template(1);
        $template = $manager->add([
            'TITLE' => 'Test Template',
            'RESPONSIBLE_ID' => 1,
        ]);
        
        $this->assertNotNull($template->getId());
        $this->assertEquals('Test Template', $template->getTitle());
    }
}
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[idea.md](./idea.md)** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **./install/db/mysql/** - SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- **./lang/** - –§–∞–π–ª—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Bitrix24 D7 ORM Documentation](https://dev.1c-bitrix.ru/api_d7/bitrix/main/orm/)
- [Bitrix24 Access Control](https://dev.1c-bitrix.ru/api_d7/bitrix/main/access/)
- [Camunda BPM Documentation](https://docs.camunda.org/)

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

```php
// –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
class Migration_20240125_100000_add_camunda_fields extends \Bitrix\Main\DB\SqlMigration
{
    public function up()
    {
        $connection = \Bitrix\Main\Application::getConnection();
        
        $connection->query("
            ALTER TABLE b_imena_tasks_templates
            ADD COLUMN NEW_FIELD VARCHAR(255) AFTER TEMPLATE_TYPE
        ");
    }
    
    public function down()
    {
        $connection = \Bitrix\Main\Application::getConnection();
        $connection->query("ALTER TABLE b_imena_tasks_templates DROP COLUMN NEW_FIELD");
    }
}
```

## üìù –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –ö–ª–∞—Å—Å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º namespace `Imena\Tasks\Templates\...`
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è D7 ORM –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- [ ] –°–æ–∑–¥–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è README.md
- [ ] –ö–æ–¥ —Å–ª–µ–¥—É–µ—Ç PSR-12 —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
- [ ] –í—Å–µ –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç PHPDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `/upload/logs/imena.tasks.templates.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥—É–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `\Bitrix\Main\Loader::includeModule('imena.tasks.templates')`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
4. –í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:** –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Imena

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–¥—É–ª—è

- **–í—Å–µ–≥–æ –∫–ª–∞—Å—Å–æ–≤**: 107 PHP —Ñ–∞–π–ª–æ–≤
- **–¢–∞–±–ª–∏—Ü –ë–î**: 12 —Ç–∞–±–ª–∏—Ü
- **–ü–æ–¥—Å–∏—Å—Ç–µ–º**: 13 –æ—Å–Ω–æ–≤–Ω—ã—Ö
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~15,000+ LOC
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤**: RU, EN

## üìÖ –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –≤–µ—Ä—Å–∏–π

### 1.0.0 (2024-01-25)
- ‚ú® –ù–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –º–æ–¥—É–ª—è
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å CRUD
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç—å—é –∏ Bitrix24
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Camunda –ø–æ–ª–µ–π
- ‚úÖ ORM D7 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π

## üë• –ê–≤—Ç–æ—Ä—ã

- **Imena Development Team** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–¥—É–ª—è
- **vlikhobabin@gmail.com** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è Imena ¬© 2024

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-01-25  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0  
**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** #vlikhobabin@gmail.com


---

# Task Creator

# Task Creator

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ RabbitMQ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —á–µ—Ä–µ–∑ Camunda BPM.

**–í–µ—Ä—Å–∏—è:** 1.0.0

## –û–ø–∏—Å–∞–Ω–∏–µ

Task Creator - —ç—Ç–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ RabbitMQ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–µ–∂–¥—É Camunda BPM –∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ
- **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π Camunda —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π BPMN –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π
- **–ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ assigneeId** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π `assigneeId` –∏–∑ BPMN –∫–∞–∫ `responsible_id` –≤ —Ü–µ–ª–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–°–∏—Å—Ç–µ–º–∞ tracker'–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á –≤ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–æ–≤** - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤ `camunda.responses.queue`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Bitrix24 –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ —Å–∂–∞—Ç–∏–µ–º
- **–†–∞–±–æ—Ç–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å—é
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ** –ø–æ Ctrl+C (graceful shutdown)
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤** - —Ñ–∞–π–ª–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- **–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º shutdown
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º**

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–∏—Å—Ç–µ–º—ã

| –û—á–µ—Ä–µ–¥—å | –°–∏—Å—Ç–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | Tracker |
|---------|---------|--------|----------|---------|
| `bitrix24.queue` | Bitrix24 | ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞ | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ Bitrix24 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π (UF_) | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| `openproject.queue` | OpenProject | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ OpenProject | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |
| `1c.queue` | 1C | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1C | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |
| `python-services.queue` | Python Services | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –í—ã–∑–æ–≤ Python —Å–µ—Ä–≤–∏—Å–æ–≤ | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |
| `default.queue` | Default Handler | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | üöß –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |

## –û—á–µ—Ä–µ–¥–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:

| –ò—Å—Ö–æ–¥–Ω–∞—è –æ—á–µ—Ä–µ–¥—å | –û—á–µ—Ä–µ–¥—å —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------|----------------------------|----------|
| `bitrix24.queue` | `bitrix24.sent.queue` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –≤ Bitrix24 |
| `openproject.queue` | `openproject.sent.queue` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –≤ OpenProject |
| `1c.queue` | `1c.sent.queue` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ 1C |
| `python-services.queue` | `python-services.sent.queue` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python —Å–µ—Ä–≤–∏—Å–æ–≤ |
| `default.queue` | `default.sent.queue` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥—è—Ö —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

```json
{
  "timestamp": 1672531200.0,
  "original_queue": "bitrix24.queue",
  "original_message": {
    "task_id": "camunda-task-123",
    "topic": "bitrix_create_task",
    "variables": {...},
    "metadata": {...}
  },
  "response_data": {
    "result": {
      "task": {"id": "12345", "status": "created"}
    },
    "success": true
  },
  "processing_status": "success",
  "processed_at": 1672531205.0
}
```

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–≠—Ç–∏ –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç:

1. –û–ø—Ä–∞—à–∏–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ `*.sent.queue` 
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á –≤ —Å–∏—Å—Ç–µ–º–∞—Ö-–ø–æ–ª—É—á–∞—Ç–µ–ª—è—Ö
3. –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `camunda.responses.queue`

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç Camunda –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á –≤ —Ü–µ–ª–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

## –°–∏—Å—Ç–µ–º–∞ Tracker'–æ–≤

Universal Worker –≤–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è (tracking) –∑–∞–¥–∞—á –≤ —Ü–µ–ª–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. Tracker'—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç —Ü–∏–∫–ª—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Bitrix24)
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `.sent.queue`** - —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
3. **–§–æ–Ω–æ–≤–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** - tracker –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á –≤ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ** - –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ tracker –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `camunda.responses.queue`

### –ê–∫—Ç–∏–≤–Ω—ã–µ Tracker'—ã

| –°–∏—Å—Ç–µ–º–∞ | –ò—Å—Ö–æ–¥–Ω–∞—è –æ—á–µ—Ä–µ–¥—å | Tracker –æ—á–µ—Ä–µ–¥—å | –¶–µ–ª–µ–≤–∞—è –æ—á–µ—Ä–µ–¥—å | –°—Ç–∞—Ç—É—Å—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |
|---------|------------------|-----------------|-----------------|-------------------|
| Bitrix24 | `bitrix24.queue` | `bitrix24.sent.queue` | `camunda.responses.queue` | 4 (–û–∂–∏–¥–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è), 5 (–ó–∞–≤–µ—Ä—à–µ–Ω–∞) |

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tracker'–æ–≤

Tracker'—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `config.py`:

```python
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è tracker'–æ–≤
TRACKER_CONFIG = {
    "bitrix24.sent.queue": {
        "module": "consumers.bitrix",
        "tracker_class": "BitrixTaskTracker",
        "description": "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á Bitrix24"
    }
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö tracker'–æ–≤...
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç—ã

- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏**: 60 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `HEARTBEAT_INTERVAL`)
- **–ú–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏**: API –∑–∞–ø—Ä–æ—Å—ã –∫ —Ü–µ–ª–µ–≤—ã–º —Å–∏—Å—Ç–µ–º–∞–º
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π tracking'–∞

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤ Bitrix24 —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ Bitrix24 –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ Camunda.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ Bitrix24
2. **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `bitrix24.sent.queue`
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ POST –∑–∞–ø—Ä–æ—Å–∞ –≤ Bitrix24 —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ Bitrix24** - Bitrix24 –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ Camunda –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```bash
POST https://bx-dev.eg-holding.ru/rest/1/anv43yam9fl33cru/imena.camunda.sync
Content-Type: application/json

{
  "processDefinitionKey": "Process_qunad56t0",
  "processInstanceId": "49b3b068-aff0-11f0-b47d-00b436387543"
}
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** `processDefinitionKey` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Camunda API, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–∑ `processDefinitionId`.

### –û—Ç–≤–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```json
{
  "result": {
    "success": true,
    "message": "Webhook received",
    "processInstanceId": "49b3b068-aff0-11f0-b47d-00b436387543",
    "processDefinitionKey": "Process_qunad56t0",
    "timestamp": "2025-10-23 08:08:57"
  }
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

- `sync_requests_sent` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `sync_requests_failed` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏  
- `sync_success_rate` - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `processInstanceId` –∏–ª–∏ `processDefinitionId` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
- –û—à–∏–±–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ –≤–µ–¥–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py                  # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è + –º–∞–ø–ø–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π
‚îú‚îÄ‚îÄ rabbitmq_consumer.py       # RabbitMQ consumer
‚îú‚îÄ‚îÄ rabbitmq_publisher.py      # RabbitMQ publisher –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ message_processor.py       # –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π  
‚îú‚îÄ‚îÄ base_handler.py            # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚îú‚îÄ‚îÄ error_tracker.py           # –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ instance_lock.py           # –§–∞–π–ª–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ config.env.example        # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md                  # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ SYNC_FEATURE_SUMMARY.md    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îú‚îÄ‚îÄ simple_test.py             # –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
‚îî‚îÄ‚îÄ consumers/                 # –ú–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ bitrix/                # Bitrix24 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ handler.py         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è Bitrix24
    ‚îÇ   ‚îú‚îÄ‚îÄ tracker.py         # Tracker –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á Bitrix24
    ‚îÇ   ‚îú‚îÄ‚îÄ userfield_sync.py  # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π
    ‚îÇ   ‚îú‚îÄ‚îÄ config.py          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Bitrix24
    ‚îÇ   ‚îú‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Bitrix24
    ‚îÇ   ‚îú‚îÄ‚îÄ UF_SYNC_README.md  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–π
    ‚îÇ   ‚îî‚îÄ‚îÄ ARCHITECTURE.md    # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è Bitrix24
    ‚îú‚îÄ‚îÄ openproject/           # OpenProject –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∑–∞–≥–ª—É—à–∫–∞)
    ‚îú‚îÄ‚îÄ 1c/                    # 1C –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∑–∞–≥–ª—É—à–∫–∞)
    ‚îú‚îÄ‚îÄ python/                # Python —Å–µ—Ä–≤–∏—Å—ã (–∑–∞–≥–ª—É—à–∫–∞)
    ‚îî‚îÄ‚îÄ default/               # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∑–∞–≥–ª—É—à–∫–∞)
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **`main.py`** - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
2. **`config.py`** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –º–∞–ø–ø–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
3. **`message_processor.py`** - –≥–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ tracker'–æ–≤
4. **`rabbitmq_consumer.py`** - –æ–±—â–∏–π –º–æ–¥—É–ª—å –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ RabbitMQ
5. **`rabbitmq_publisher.py`** - –º–æ–¥—É–ª—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏
6. **`base_handler.py`** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π
7. **`error_tracker.py`** - —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º shutdown
8. **`instance_lock.py`** - —Ñ–∞–π–ª–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
9. **`consumers/*`** - –º–æ–¥—É–ª–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
10. **`consumers/*/tracker.py`** - –º–æ–¥—É–ª–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

### Workflow

#### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –æ—á–µ—Ä–µ–¥–∏ RabbitMQ
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞–ø–ø–∏–Ω–≥–∞ –æ—á–µ—Ä–µ–¥–µ–π
3. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –º–æ–¥—É–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
4. **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è** —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º
6. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** –≤ –æ—á–µ—Ä–µ–¥—å —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–∏ —É—Å–ø–µ—Ö–µ)
7. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ
8. **–í–æ–∑–≤—Ä–∞—Ç –≤ –æ—á–µ—Ä–µ–¥—å** –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á (Tracking)

1. **–§–æ–Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ tracker'–æ–≤** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π `*.sent.queue`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** - API –∑–∞–ø—Ä–æ—Å—ã –∫ —Ü–µ–ª–µ–≤—ã–º —Å–∏—Å—Ç–µ–º–∞–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–¥–∞—á–∞—Ö
4. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å –∑–∞–≤–µ—Ä—à–∞—é—â–∏–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
5. **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Camunda** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `camunda.responses.queue`
6. **–£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ tracker –æ—á–µ—Ä–µ–¥–∏** - –æ—á–∏—Å—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–ø–æ–ª–Ω—ã–π –∑–∞–º–∫–Ω—É—Ç—ã–π —Ü–∏–∫–ª** –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤ Camunda –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ –µ—ë –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- –î–æ—Å—Ç—É–ø –∫ RabbitMQ —Å–µ—Ä–≤–µ—Ä—É
- Credentials –¥–ª—è —Ü–µ–ª–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
git clone <repository-url>
cd universal-rabbitmq-worker

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp config.env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano .env
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –≤–∞—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```bash
# RabbitMQ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
RABBITMQ_HOST=rmq.eg-holding.ru
RABBITMQ_USERNAME=admin
RABBITMQ_PASSWORD=admin

# Bitrix24 –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
BITRIX_WEBHOOK_URL=https://bx.eg-holding.ru/rest/1/123123123123

# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
LOG_LEVEL=INFO
HEARTBEAT_INTERVAL=60
MONITOR_LOG_INTERVAL=300
RETRY_ATTEMPTS=3
RETRY_DELAY=5
MAX_MESSAGES_PER_BATCH=10
MESSAGE_PROCESSING_TIMEOUT=120
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫
python main.py

# –° –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=DEBUG python main.py

# –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (Linux)
nohup python main.py > worker.log 2>&1 &
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Bitrix24
python test_bitrix_worker.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–æ—á–µ—Ä–µ–¥–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
python simple_test.py
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# Graceful shutdown
Ctrl+C

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
pkill -f main.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "task_id": "camunda-task-uuid",
  "topic": "bitrix_create_task",
  "variables": {
    "title": {"value": "–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏", "type": "String"},
    "priority": {"value": "3", "type": "String"}
  },
  "metadata": {
    "extensionProperties": {
      "assigneeId": "3",
      "customProperty": "customValue"
    },
    "inputParameters": {
      "inputData": "processedValue"  
    },
    "activityInfo": {
      "name": "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –≤ —Å–∏—Å—Ç–µ–º–µ",
      "topic": "system_create_task"
    }
  }
}
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **assigneeId**: –ó–Ω–∞—á–µ–Ω–∏–µ `assigneeId` –∏–∑ BPMN –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `responsible_id` –≤ Bitrix24
- **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –º–∞–ø–ø–∏–Ω–≥–µ —Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ**: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ BPMN –¥–∏–∞–≥—Ä–∞–º–º—ã

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `RABBITMQ_HOST` | –•–æ—Å—Ç RabbitMQ | `rmq.eg-holding.ru` |
| `RABBITMQ_USERNAME` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è RabbitMQ | `admin` |
| `RABBITMQ_PASSWORD` | –ü–∞—Ä–æ–ª—å RabbitMQ | - |
| `RABBITMQ_HEARTBEAT` | Heartbeat –¥–ª—è RabbitMQ | `600` |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` |
| `HEARTBEAT_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—Å–µ–∫) | `60` |
| `MONITOR_LOG_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∞ (—Å–µ–∫) | `300` |
| `RETRY_ATTEMPTS` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–≤—Ç–æ—Ä–∞ | `3` |
| `RETRY_DELAY` | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –ø–æ–≤—Ç–æ—Ä–∞ (—Å–µ–∫) | `5` |
| `MAX_MESSAGES_PER_BATCH` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±–∞—Ç—á–µ | `10` |
| `MESSAGE_PROCESSING_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å–µ–∫) | `120` |

### –ú–∞–ø–ø–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π –Ω–∞ –º–æ–¥—É–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:

```python
QUEUE_HANDLERS = {
    "bitrix24.queue": {
        "module": "consumers.bitrix",
        "handler_class": "BitrixTaskHandler",
        "description": "–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ Bitrix24"
    },
    "openproject.queue": {
        "module": "consumers.openproject",
        "handler_class": "OpenProjectTaskHandler", 
        "description": "–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ OpenProject"
    },
    # ... –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã
}
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:

1. **–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É** `consumers/newsystem/`
2. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã**:
   - `handler.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
   - `config.py` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
   - `README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - `__init__.py` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫** —Å –º–µ—Ç–æ–¥–æ–º `process_message()`
4. **–î–æ–±–∞–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥** –≤ `config.py`

### –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç `BaseMessageHandler` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:

```python
from base_handler import BaseMessageHandler
from typing import Dict, Any, Optional

class NewSystemHandler(BaseMessageHandler):
    def __init__(self):
        super().__init__("NewSystem")
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    
    def _process_message_impl(self, message_data: Dict[str, Any], properties: Any) -> Optional[Dict[str, Any]]:
        """
        –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        
        Args:
            message_data: –î–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            properties: –°–≤–æ–π—Å—Ç–≤–∞ RabbitMQ
            
        Returns:
            –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–æ—Ç–≤–µ—Ç –æ—Ç —Å–∏—Å—Ç–µ–º—ã) –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ
        """
        # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ - –≤—ã–∑–æ–≤ API —Å–∏—Å—Ç–µ–º—ã
        result = new_system_api.create_task(message_data)
        return result
    
    def _get_original_queue_name(self) -> str:
        """–ò–º—è –∏—Å—Ö–æ–¥–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞"""
        return "newsystem.queue"
```

–î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:

```python
class SimpleHandler:
    def process_message(self, message_data: Dict[str, Any], properties: Any) -> bool:
        # –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ –æ—á–µ—Ä–µ–¥–µ–π —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        return True
    
    def get_stats(self) -> Dict[str, Any]:
        return {}
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/opt/exchanger.py/logs/`:

- `exchanger-task-creator.log` - –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ (—Ä–æ—Ç–∞—Ü–∏—è: 20 MB, —Ö—Ä–∞–Ω–µ–Ω–∏–µ: 14 –¥–Ω–µ–π)
- `exchanger-task-creator-errors.log` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (—Ä–æ—Ç–∞—Ü–∏—è: 20 MB, —Ö—Ä–∞–Ω–µ–Ω–∏–µ: 14 –¥–Ω–µ–π)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏:**
- –†–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 20 MB
- –°–∂–∞—Ç–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (zip)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —Å—Ç–∞—Ä—à–µ 14 –¥–Ω–µ–π

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

- `DEBUG` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `INFO` - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ
- `WARNING` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

Worker –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

**–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (uptime)
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Å–∏—Å—Ç–µ–º–µ
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞ –ø–æ —Å–∏—Å—Ç–µ–º–µ
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ (success_queue_rate)

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Tracker'–æ–≤:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏–∫–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
- –£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–Ω—ã–µ –≤ responses.queue
- –û—à–∏–±–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- Uptime tracker'–∞

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ RabbitMQ:**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ consumer (RabbitMQConsumer)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ publisher (RabbitMQPublisher)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –æ—á–µ—Ä–µ–¥—è–º

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ (ErrorTracker):**
- –í—Å–µ–≥–æ –æ—à–∏–±–æ–∫
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –≤ —Ç–µ–∫—É—â–µ–º –æ–∫–Ω–µ
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ (–æ—à–∏–±–æ–∫ –≤ –º–∏–Ω—É—Ç—É)
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º –æ—à–∏–±–æ–∫
- –í—Ä–µ–º—è –¥–æ —Å–±—Ä–æ—Å–∞ –æ–∫–Ω–∞ –æ—à–∏–±–æ–∫

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ Heartbeat

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

- **Heartbeat**: –ö–∞–∂–¥—ã–µ `HEARTBEAT_INTERVAL` (60 —Å–µ–∫—É–Ω–¥) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `MONITOR_LOG_INTERVAL` (300 —Å–µ–∫—É–Ω–¥)
- **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RabbitMQ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º graceful shutdown
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã**: –§–∞–π–ª–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `MONITOR_LOG_INTERVAL`)
- –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–µ —á–∞—â–µ —Ä–∞–∑–∞ –≤ 5 –º–∏–Ω—É—Ç
- Heartbeat –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ assigneeId (v2.1)

–í –≤–µ—Ä—Å–∏–∏ 2.1 –±—ã–ª–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

**–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
```
BPMN assigneeId ‚Üí roles_mapping.yaml ‚Üí bitrix_responsible_id
```

**–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
```
BPMN assigneeId ‚Üí responsible_id (–Ω–∞–ø—Ä—è–º—É—é)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω —Å–ª–æ–π –º–∞–ø–ø–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ YAML —Ñ–∞–π–ª—ã
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ù–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–≥—Ä—É–∑–∫–∏/–ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**: –õ—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ assigneeId —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ **–ú–µ–Ω—å—à–µ –∫–æ–¥–∞**: –£–¥–∞–ª–µ–Ω–æ ~100 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –ï—Å–ª–∏ assigneeId –Ω–µ —É–∫–∞–∑–∞–Ω –≤ BPMN ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `default_responsible_id`
- –ï—Å–ª–∏ assigneeId –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `default_responsible_id` —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º

## –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **OpenProject** - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ + tracker –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- **1C** - –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å 1C —Å–∏—Å—Ç–µ–º–∞–º–∏ + tracker –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- **Python Services** - –≤—ã–∑–æ–≤ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö Python —Å–µ—Ä–≤–∏—Å–æ–≤ + tracker –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- **Email** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **Telegram Bot** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

### Roadmap

- [x] –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [x] Bitrix24 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] **–û—á–µ—Ä–µ–¥–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**
- [x] **–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
- [x] **–ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º**
- [x] **–°–∏—Å—Ç–µ–º–∞ tracker'–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á**
- [x] **Bitrix24 Tracker - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á**
- [x] **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π UF_ –≤ Bitrix24** (UF_RESULT_EXPECTED, UF_RESULT_QUESTION)
- [x] **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ assigneeId –∏–∑ BPMN**
- [x] **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda —Å Bitrix24** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
- [x] **–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π graceful shutdown
- [x] **–§–∞–π–ª–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤** - –∑–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
- [x] **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] OpenProject –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é)
- [ ] 1C –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é)
- [ ] Tracker'—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (OpenProject, 1C, etc.)
- [ ] REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### –ù–∞–¥–µ–∂–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É "at least once delivery":

- **–†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** - —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–í–æ–∑–≤—Ä–∞—Ç –≤ –æ—á–µ—Ä–µ–¥—å** - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **Persistent —Å–æ–æ–±—â–µ–Ω–∏—è** - —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—è—Ö —É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** - –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å RabbitMQ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

**–§–∞–π–ª–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (`instance_lock.py`):**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª–æ–≤—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —á–µ—Ä–µ–∑ `fcntl.flock()`
- Lock —Ñ–∞–π–ª: `/tmp/exchanger-task-creator.lock`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å–∫–∞ –≤—Ç–æ—Ä–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º

### –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

**ErrorTracker (`error_tracker.py`):**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫ –≤ —Å–∫–æ–ª—å–∑—è—â–µ–º –æ–∫–Ω–µ (300 —Å–µ–∫—É–Ω–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π graceful shutdown –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ä–æ–≥–∞ (10 –æ—à–∏–±–æ–∫ –∑–∞ –æ–∫–Ω–æ)
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –∫–∞–∫ 3 –æ–±—ã—á–Ω—ã–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ —Ç–∏–ø–∞–º
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

**–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã:**
- –û—à–∏–±–∫–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ —Å–∫–æ–ª—å–∑—è—â–µ–º –æ–∫–Ω–µ –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ (10 –æ—à–∏–±–æ–∫ –∑–∞ 5 –º–∏–Ω—É—Ç) - –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç—Å—è graceful shutdown
- –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ tracker'—ã –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∞–≤–∏–Ω—É –æ—à–∏–±–æ–∫ –∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 

---

# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã imena.tasks

# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `imena.tasks`

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–∞—Ç–∞–ª–æ–≥–∞)
- [–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–¥–µ—Ç–∞–ª—å–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- [–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–º–æ–¥—É–ª–µ–º)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## üéØ –û–±–∑–æ—Ä

–ö–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á –≤ —Å–∏—Å—Ç–µ–º–µ Bitrix24. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —è–≤–ª—è—é—Ç—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Bitrix –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥—É–ª–µ–º `imena.tasks.templates`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü Bitrix.

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix24 D7 API**
- ‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏** —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `imena.tasks.templates`
- ‚úÖ **AJAX-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** —á–µ—Ä–µ–∑ `ImenaTemplateAccessController`
- ‚úÖ **Entity Editor** –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ **Grid –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ **SidePanel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ Bitrix24

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Bitrix** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç —Å–≤–æ—é –∑–∞–¥–∞—á—É
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ Bitrix
4. **CQRS –ø–∞—Ç—Ç–µ—Ä–Ω** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ AJAX-–¥–µ–π—Å—Ç–≤–∏—è
5. **Dependency Injection** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### –°–ª–æ–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              UI Layer (Templates)                      ‚îÇ
‚îÇ  (PHP —à–∞–±–ª–æ–Ω—ã, JavaScript, CSS)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Component Layer                               ‚îÇ
‚îÇ  (ImenaTaskTemplateComponent, etc.)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Controller Layer (AJAX)                        ‚îÇ
‚îÇ  (Controllerable interface, Actions)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Service Layer                                  ‚îÇ
‚îÇ  (ImenaTemplateManager, TemplateProvider)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Data Access Layer                              ‚îÇ
‚îÇ  (TemplateTable, ORM)                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Database                                       ‚îÇ
‚îÇ  (b_imena_tasks_templates_*)                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
imena.tasks/
‚îú‚îÄ‚îÄ templates.list/              # –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (918 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ component.php            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php           # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php          # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ ajax.php                 # AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .default/
‚îÇ   ‚îú‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ru/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ en/
‚îÇ   ‚îî‚îÄ‚îÄ images/                  # –ò–∫–æ–Ω–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ task.template/               # –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (1352 —Å—Ç—Ä–æ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ component.php            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .default/            # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ view/                # –®–∞–±–ª–æ–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ flow/                # –®–∞–±–ª–æ–Ω –¥–ª—è Flow –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ widget.member.selector/      # –í–∏–¥–∂–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —à–∞–±–ª–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (225 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ ajax.php                 # AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ view/
‚îÇ
‚îú‚îÄ‚îÄ widget.template.access/      # –í–∏–¥–∂–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ class.php                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (174 —Å—Ç—Ä–æ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ template.selector/           # –í–∏–¥–∂–µ—Ç –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ component.php            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å)
‚îÇ   ‚îú‚îÄ‚îÄ .parameters.php          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ .description.php         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ lang/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îî‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. `templates.list` - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:templates.list`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø–æ–∏—Å–∫–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaTasksTemplatesListComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksBaseComponent`  
**–†–µ–∞–ª–∏–∑—É–µ—Ç:** `\Bitrix\Main\Errorable`, `\Bitrix\Main\Engine\Contract\Controllerable`

**–†–∞–∑–º–µ—Ä:** 918 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **Grid –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏  
‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ ID, –Ω–∞–∑–≤–∞–Ω–∏—é, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é, —Å–æ–∑–¥–∞—Ç–µ–ª—é, –≥—Ä—É–ø–ø–µ, —Ç–µ–≥–∞–º  
‚úÖ **–ü–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —à–∞–±–ª–æ–Ω–∞  
‚úÖ **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–æ–ª—è–º (ID, –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)  
‚úÖ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —Ä–∞–∑–º–µ—Ä–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã (5, 10, 25, 50, 100)  
‚úÖ **–ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** —à–∞–±–ª–æ–Ω–æ–≤  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π (UF)**  

#### AJAX-–¥–µ–π—Å—Ç–≤–∏—è

```php
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
public function getListAction($select = null, $order = null, $filter = null, $limit = self::DEFAULT_LIMIT)

// –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
public function deleteAction($templateId)

// –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
public function batchDeleteAction($ids, $isAllSelected = false)
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TASK_TYPE` | LIST | –¢–∏–ø –∑–∞–¥–∞—á–∏ (group/user) | - |
| `TASK_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è ID –∑–∞–¥–∞—á–∏ | - |
| `USER_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | - |
| `GROUP_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è ID –≥—Ä—É–ø–ø—ã | - |
| `ACTION_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è | - |
| `PAGE_VAR` | STRING | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã | - |
| `ITEMS_COUNT` | STRING | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ | 20 |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:templates.list",
    "",
    [
        "TASK_TYPE" => "user",
        "TASK_VAR" => "task_id",
        "ITEMS_COUNT" => 25,
        "PATH_TO_USER_TASKS" => "/company/personal/user/#user_id#/tasks/",
        "PATH_TO_USER_TASKS_TASK" => "/company/personal/user/#user_id#/tasks/task/#task_id#/",
    ]
);
?>
```

#### JavaScript API

```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
BX.Main.gridManager.reload('TASKS_TEMPLATES_FILTER_ID');

// –í—ã–∑–æ–≤ AJAX-–¥–µ–π—Å—Ç–≤–∏—è
BX.ajax.runComponentAction('imena.tasks:templates.list', 'delete', {
    mode: 'class',
    data: { templateId: 123 }
}).then(function(response) {
    if (response.data.success) {
        // –û–±–Ω–æ–≤–∏—Ç—å Grid
    }
});
```

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `Bitrix\Main\Grid` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Grid
- `Bitrix\Main\UI\Filter` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `Imena\Tasks\Templates\Manager\ImenaTemplateManager` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- `Bitrix\Tasks\Integration\Bitrix24` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

#### –°—Ç–∞—Ç—É—Å: ‚úÖ 95% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (>1000 –∑–∞–ø–∏—Å–µ–π)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º

---

### 2. `task.template` - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:task.template`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–æ–º —á–µ—Ä–µ–∑ Entity Editor –∏ SidePanel.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaTaskTemplateComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksBaseComponent`  
**–†–µ–∞–ª–∏–∑—É–µ—Ç:** `Errorable`, `Controllerable`

**–†–∞–∑–º–µ—Ä:** 1352 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞** (ID = 0)  
‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞**  
‚úÖ **–ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞** –≤ —Ä–µ–∂–∏–º–µ —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è  
‚úÖ **Entity Editor** –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π  
‚úÖ **SidePanel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏** —á–µ—Ä–µ–∑ `widget.member.selector`  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏** —Å AJAX —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏**  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º**  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞** —á–µ—Ä–µ–∑ `widget.template.access`  
‚úÖ **–°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏** —á–µ—Ä–µ–∑ `template.selector`  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda** –¥–ª—è Flow –ø—Ä–æ—Ü–µ—Å—Å–æ–≤  

#### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

| –†–µ–∂–∏–º | –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `create` | `ACTION=create` –∏–ª–∏ `ID=0` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ |
| `edit` | `ACTION=edit` –∏ `ID>0` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ |
| `view` | `ACTION=view` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) |

#### AJAX-–¥–µ–π—Å—Ç–≤–∏—è

```php
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
public function saveChecklistAction($templateId, $items = [], $params = [])

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
public function setPriorityAction($templateId, $priority)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–≥–æ–≤
public function setTagsAction($templateId, array $tags = [])

// –£–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
public function deleteAction($templateId)
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —à–∞–±–ª–æ–Ω–∞ (0 –¥–ª—è –Ω–æ–≤–æ–≥–æ) | 0 |
| `ACTION` | STRING | –î–µ–π—Å—Ç–≤–∏–µ (create/edit/view) | view |
| `BACK_URL` | STRING | URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ | - |
| `CAN_READ` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ | true |
| `CAN_UPDATE` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | true |
| `EDIT_MODE` | BOOL | –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | false |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 0,
        "ACTION" => "create",
        "BACK_URL" => "/company/personal/user/#user_id#/tasks/templates/",
    ]
);

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ACTION" => "edit",
        "CAN_UPDATE" => true,
    ]
);
?>
```

#### JavaScript API

```javascript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
BX.ajax.runComponentAction('imena.tasks:task.template', 'saveChecklist', {
    mode: 'class',
    data: {
        templateId: 123,
        items: [
            { id: 1, title: '–ü—É–Ω–∫—Ç 1', checked: false },
            { id: 2, title: '–ü—É–Ω–∫—Ç 2', checked: true }
        ]
    }
}).then(function(response) {
    if (response.data.success) {
        BX.UI.Notification.Center.notify({
            content: '–ß–µ–∫-–ª–∏—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω',
            autoHide: true
        });
    }
});

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
BX.ajax.runComponentAction('imena.tasks:task.template', 'setPriority', {
    mode: 'class',
    data: {
        templateId: 123,
        priority: 2 // 1 - –Ω–∏–∑–∫–∏–π, 2 - –æ–±—ã—á–Ω—ã–π, 3 - –≤—ã—Å–æ–∫–∏–π
    }
});
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –≤–∏–¥–∂–µ—Ç—ã:

1. **widget.member.selector** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
   ```php
   $APPLICATION->IncludeComponent(
       "imena.tasks:widget.member.selector",
       "",
       [
           "TEMPLATE_ID" => $templateId,
           "CONTEXT" => "template",
       ]
   );
   ```

2. **widget.template.access** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
   ```php
   $APPLICATION->IncludeComponent(
       "imena.tasks:widget.template.access",
       "",
       [
           "TEMPLATE_ID" => $templateId,
           "CAN_UPDATE" => $canUpdate,
       ]
   );
   ```

3. **template.selector** - –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
   ```php
   $APPLICATION->IncludeComponent(
       "imena.tasks:template.selector",
       "",
       [
           "TEMPLATE_ID" => $templateId,
           "EXCLUDE_ID" => $templateId, // –ò—Å–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω
       ]
   );
   ```

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**Bitrix Core:**
- `Bitrix\Tasks\Item\Converter\Task\Template\ToTemplate`
- `Bitrix\Tasks\CheckList\Template\TemplateCheckListFacade`
- `Bitrix\Tasks\Integration\Bitrix24`
- `Bitrix\Tasks\Util\Restriction\Bitrix24Restriction\Limit\TaskLimit`

**Imena Custom:**
- `Imena\Tasks\Templates\Internals\TemplateTable`
- `Imena\Tasks\Templates\Item\Task\Template`
- `Imena\Tasks\Templates\Provider\TemplateProvider`
- `Imena\Tasks\Templates\Control\Template`
- `Imena\Tasks\Templates\CheckList\Template\TemplateCheckListFacade`

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —á–µ–∫-–ª–∏—Å—Ç—ã:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ImenaTemplateCheckListFacade` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ
2. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:** –†–∞–±–æ—Ç–∞–µ—Ç —Å `TemplateTable` –∏–∑ –º–æ–¥—É–ª—è `imena.tasks.templates`
3. **Flow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–∞ `flow` –¥–ª—è Camunda –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
4. **–û—Ç–ª–∞–¥–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `/upload/logs/checklist_debug.log`

#### –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

---

### 3. `widget.member.selector` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:widget.member.selector`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–¥–∂–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Entity Selector Bitrix24.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaTasksWidgetMemberSelectorComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksWidgetMemberSelectorComponent` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Bitrix)  
**–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:** –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü

**–†–∞–∑–º–µ—Ä:** 225 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π** (Responsible)  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π** (Accomplices)  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π** (Auditors)  
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Selector** Bitrix24  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–∞–∫ —Å –∑–∞–¥–∞—á–∞–º–∏, —Ç–∞–∫ –∏ —Å —à–∞–±–ª–æ–Ω–∞–º–∏**  
‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏** —á–µ—Ä–µ–∑ `TemplateMember`  

#### –†–æ–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

| –†–æ–ª—å | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|----------|
| –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å | `ROLE_RESPONSIBLE` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ä–æ–ª—å, –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–¥–∞—á–∏ |
| –°–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å | `ROLE_ACCOMPLICE` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ |
| –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å | `ROLE_AUDITOR` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—è—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º |

#### AJAX-–¥–µ–π—Å—Ç–≤–∏—è

```php
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
public function setResponsibleAction($taskId, $data = null, $context = self::CONTEXT_TASK)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
public function setAccomplicesAction($taskId, $data = null, $context = self::CONTEXT_TASK)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π
public function setAuditorsAction($taskId, $data = null, $context = self::CONTEXT_TASK)
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —à–∞–±–ª–æ–Ω–∞ | - |
| `CONTEXT` | STRING | –ö–æ–Ω—Ç–µ–∫—Å—Ç (task/template) | task |
| `CAN_UPDATE` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | true |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.member.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "CONTEXT" => "template", // –∏–ª–∏ "task"
        "CAN_UPDATE" => true,
    ]
);
?>
```

#### JavaScript API

```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
BX.ajax.runComponentAction('imena.tasks:widget.member.selector', 'setResponsible', {
    mode: 'class',
    data: {
        taskId: 123,
        data: [
            { ID: 1, NAME: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤' },
            { ID: 2, NAME: '–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤' }
        ],
        context: 'template'
    }
}).then(function(response) {
    if (response.data.SUCCESS) {
        // –û–±–Ω–æ–≤–∏—Ç—å UI
    }
});
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤:** –ú–µ—Ç–æ–¥—ã `setResponsibleAction`, `setAccomplicesAction`, `setAuditorsAction` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ImenaTemplateModel:** –î–ª—è —à–∞–±–ª–æ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ImenaTemplateModel` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ImenaTemplateAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ TemplateMember:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `TemplateMember::updateByTemplateId()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `Imena\Tasks\Templates\Access\ImenaTemplateAccessController`
- `Imena\Tasks\Templates\Access\ImenaTemplateModel`
- `Imena\Tasks\Templates\Control\TemplateMember`
- `Bitrix\Tasks\Access\ActionDictionary`
- `Bitrix\Tasks\Access\Role\RoleDictionary`

#### –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

---

### 4. `widget.template.access` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:widget.template.access`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–¥–∂–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —à–∞–±–ª–æ–Ω—É –∑–∞–¥–∞—á–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, –∫—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ö–ª–∞—Å—Å:** `ImenaWidgetTemplateAccessComponent`  
**–ù–∞—Å–ª–µ–¥—É–µ—Ç:** `TasksBaseComponent`

**–†–∞–∑–º–µ—Ä:** 174 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –≥—Ä—É–ø–ø–∞–º**  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è–º**  
‚úÖ **–î–≤–∞ —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞:** –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø  
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏** —á–µ—Ä–µ–∑ —Ç–∞—Ä–∏—Ñ Bitrix24  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥—Ä—É–ø–ø –∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π**  
‚úÖ **AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**  

#### –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞

| –£—Ä–æ–≤–µ–Ω—å | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| –ü—Ä–æ—Å–º–æ—Ç—Ä | `TEMPLATE_VIEW` | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞, –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø | `TEMPLATE_FULL` | –ü—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ |

#### –¢–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π

| –¢–∏–ø | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-----|----------|
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `U` | –û—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã |
| –ì—Ä—É–ø–ø–∞ | `SG` | –†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞ (–ø—Ä–æ–µ–∫—Ç) |
| –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ | `DR` | –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ |

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —à–∞–±–ª–æ–Ω–∞ | - |
| `ENTITY_CODE` | STRING | –ö–æ–¥ —Å—É—â–Ω–æ—Å—Ç–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) | - |
| `CAN_READ` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ | true |
| `CAN_UPDATE` | BOOL | –ü—Ä–∞–≤–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | true |
| `EDIT_MODE` | BOOL | –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | false |
| `USER_DATA` | ARRAY | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | [] |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.template.access",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ENTITY_CODE" => "TEMPLATE_123",
        "CAN_READ" => true,
        "CAN_UPDATE" => true,
        "EDIT_MODE" => true,
    ]
);
?>
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞—Ä–∏—Ñ–∞:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `Bitrix24::checkFeatureEnabled()`
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:** –†–∞–±–æ—Ç–∞–µ—Ç —Å `TasksTemplatePermissionTable` –∏–∑ –º–æ–¥—É–ª—è `imena.tasks.templates`
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥—Ä—É–ø–ø –∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Access Controller:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `TemplateAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `Imena\Tasks\Templates\Access\TemplateAccessController`
- `Imena\Tasks\Templates\Access\Permission\TasksTemplatePermissionTable`
- `Imena\Tasks\Templates\Internals\TemplateTable`
- `Bitrix\Tasks\Access\Permission\PermissionDictionary`
- `Bitrix\Tasks\Integration\Bitrix24`

#### –°—Ç–∞—Ç—É—Å: ‚è≥ 60% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

---

### 5. `template.selector` - –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤

**–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `imena.tasks:template.selector`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–¥–∂–µ—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏ —à–∞–±–ª–æ–Ω–æ–≤ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–°—Ç–∏–ª—å:** –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π (–±–µ–∑ –∫–ª–∞—Å—Å–∞)  
**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:** `component.php`

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–í—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤**  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 15 —à–∞–±–ª–æ–Ω–æ–≤** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤**  
‚úÖ **AJAX –ø–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é  
‚úÖ **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞** –∏–∑ —Å–ø–∏—Å–∫–∞  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Selector** –¥–ª—è –ø–æ–∏—Å–∫–∞  

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| `TEMPLATE_ID` | INT | ID —Ç–µ–∫—É—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ (–¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è) | 0 |
| `SELECTED_IDS` | ARRAY | –ú–∞—Å—Å–∏–≤ ID –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ | [] |
| `MULTIPLE` | BOOL | –†–∞–∑—Ä–µ—à–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä | true |
| `LIMIT` | INT | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ | 15 |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:template.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "SELECTED_IDS" => [456, 789],
        "MULTIPLE" => true,
        "LIMIT" => 15,
    ]
);
?>
```

#### JavaScript API

```javascript
// –ü–æ–∏—Å–∫ —à–∞–±–ª–æ–Ω–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏)
BX.ajax({
    url: '/local/components/imena.tasks/template.selector/ajax.php',
    data: {
        action: 'search',
        query: '–Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞',
        excludeId: 123
    },
    method: 'POST',
    dataType: 'json',
    onsuccess: function(response) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
    }
});
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–º —Å—Ç–∏–ª–µ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞
2. **–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 15 —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞
3. **Entity Selector:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Entity Selector Bitrix24 –¥–ª—è –ø–æ–∏—Å–∫–∞
4. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞

#### –°—Ç–∞—Ç—É—Å: ‚è≥ 50% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è AJAX –ø–æ–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤—ã–π API
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–ª–∞—Å—Å–æ–≤—ã–π —Å—Ç–∏–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —à–∞–±–ª–æ–Ω–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≥—Ä—É–ø–ø–∞–º –∏ —Ç–µ–≥–∞–º

---

## üîó –í–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```mermaid
graph TD
    A[templates.list] -->|–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç| B[task.template]
    B -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| C[widget.member.selector]
    B -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| D[widget.template.access]
    B -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| E[template.selector]
    A -->|–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ| B
    B -->|—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–µ—Ä–µ–∑| F[ImenaTemplateManager]
    C -->|—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–µ—Ä–µ–∑| G[TemplateMember]
    D -->|—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–µ—Ä–µ–∑| H[TasksTemplatePermissionTable]
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Å–≤—è–∑–µ–π

1. **templates.list ‚Üí task.template**
   - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —à–∞–±–ª–æ–Ω –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è Grid –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SidePanel –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏

2. **task.template –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∏–¥–∂–µ—Ç—ã:**
   - **widget.member.selector** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
   - **widget.template.access** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
   - **template.selector** - –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

3. **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Üí ImenaTemplateManager**
   - –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ImenaTemplateManager` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
   - –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –º–æ–¥—É–ª–µ–º `imena.tasks.templates`:

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–¥—É–ª—è

```php
// ORM —Ç–∞–±–ª–∏—Ü—ã
use Imena\Tasks\Templates\Internals\TemplateTable;
use Imena\Tasks\Templates\Internals\ScenarioTable;

// –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
use Imena\Tasks\Templates\Item\Task\Template;

// –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
use Imena\Tasks\Templates\Manager\ImenaTemplateManager;
use Imena\Tasks\Templates\Provider\TemplateProvider;

// –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–æ—Å—Ç—É–ø–∞
use Imena\Tasks\Templates\Access\ImenaTemplateAccessController;
use Imena\Tasks\Templates\Access\ImenaTemplateModel;

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
use Imena\Tasks\Templates\Control\TemplateMember;

// –ß–µ–∫-–ª–∏—Å—Ç—ã
use Imena\Tasks\Templates\CheckList\Template\TemplateCheckListFacade;
```

### –¢–∞–±–ª–∏—Ü—ã –ë–î

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:

- `b_imena_tasks_templates` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —à–∞–±–ª–æ–Ω–æ–≤
- `b_imena_tasks_templates_members` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤
- `b_imena_tasks_templates_permissions` - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- `b_imena_tasks_templates_scenarios` - —Å—Ü–µ–Ω–∞—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–¥—É–ª—è –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π:

```php
if (!\Bitrix\Main\Loader::includeModule('tasks'))
{
    return [];
}

if (!\Bitrix\Main\Loader::includeModule('imena.tasks.templates'))
{
    return [];
}
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

```php
<?php
// –í —à–∞–±–ª–æ–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
$APPLICATION->IncludeComponent(
    "imena.tasks:templates.list",
    "",
    [
        "TASK_TYPE" => "user",
        "ITEMS_COUNT" => 25,
        "PATH_TO_USER_TASKS" => "/company/personal/user/#user_id#/tasks/",
        "PATH_TO_USER_TASKS_TASK" => "/company/personal/user/#user_id#/tasks/task/#task_id#/",
    ]
);
?>
```

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –≤ SidePanel

```php
<?php
// –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ SidePanel
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 0,
        "ACTION" => "create",
        "BACK_URL" => "/company/personal/user/#user_id#/tasks/templates/",
    ]
);
?>

<script>
// –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ SidePanel —á–µ—Ä–µ–∑ JavaScript
BX.SidePanel.Instance.open('/company/personal/user/1/tasks/templates/create/', {
    cacheable: false,
    width: 800
});
</script>
```

### –ü—Ä–∏–º–µ—Ä 3: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏

```php
<?php
// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ACTION" => "edit",
        "CAN_UPDATE" => true,
    ]
);

// –í —à–∞–±–ª–æ–Ω–µ task.template –≤–∫–ª—é—á–∞–µ–º –≤–∏–¥–∂–µ—Ç—ã:
?>

<!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ -->
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.member.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "CONTEXT" => "template",
    ]
);
?>

<!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ -->
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:widget.template.access",
    "",
    [
        "TEMPLATE_ID" => 123,
        "ENTITY_CODE" => "TEMPLATE_123",
        "CAN_UPDATE" => true,
        "EDIT_MODE" => true,
    ]
);
?>

<!-- –í—ã–±–æ—Ä —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ -->
<?php
$APPLICATION->IncludeComponent(
    "imena.tasks:template.selector",
    "",
    [
        "TEMPLATE_ID" => 123,
        "SELECTED_IDS" => [456, 789],
        "MULTIPLE" => true,
    ]
);
?>
```

### –ü—Ä–∏–º–µ—Ä 4: AJAX —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞

```javascript
// –í JavaScript —à–∞–±–ª–æ–Ω–∞
BX.ready(function() {
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
    BX.ajax.runComponentAction('imena.tasks:task.template', 'saveChecklist', {
        mode: 'class',
        data: {
            templateId: 123,
            items: [
                {
                    id: 1,
                    title: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è',
                    checked: false,
                    sort: 100
                },
                {
                    id: 2,
                    title: '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é',
                    checked: true,
                    sort: 200
                }
            ],
            params: {
                force: false
            }
        }
    }).then(function(response) {
        if (response.data.success) {
            BX.UI.Notification.Center.notify({
                content: '–ß–µ–∫-–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω',
                autoHide: true
            });
            
            // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
            updateChecklistUI(response.data.items);
        } else {
            BX.UI.Notification.Center.notify({
                content: '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: ' + response.data.errors.join(', '),
                autoHide: false
            });
        }
    });
});
```

### –ü—Ä–∏–º–µ—Ä 5: –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

```javascript
// –í JavaScript —à–∞–±–ª–æ–Ω–∞ templates.list
function deleteSelectedTemplates() {
    var grid = BX.Main.gridManager.getById('TASKS_TEMPLATES_FILTER_ID');
    var selectedIds = grid.instance.getRows().getSelectedIds();
    
    if (selectedIds.length === 0) {
        BX.UI.Notification.Center.notify({
            content: '–ù–µ –≤—ã–±—Ä–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞',
            autoHide: true
        });
        return;
    }
    
    if (!confirm('–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã?')) {
        return;
    }
    
    BX.ajax.runComponentAction('imena.tasks:templates.list', 'batchDelete', {
        mode: 'class',
        data: {
            ids: selectedIds,
            isAllSelected: false
        }
    }).then(function(response) {
        if (response.data.success) {
            BX.UI.Notification.Center.notify({
                content: '–®–∞–±–ª–æ–Ω—ã —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã',
                autoHide: true
            });
            
            // –û–±–Ω–æ–≤–∏—Ç—å Grid
            grid.instance.reload();
        } else {
            BX.UI.Notification.Center.notify({
                content: '–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ' + response.data.errors.join(', '),
                autoHide: false
            });
        }
    });
}
```

---

## üìê –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Bitrix24 D7:

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ D7 API

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
use Bitrix\Main\Loader;
use Bitrix\Main\Localization\Loc;
use Bitrix\Main\Engine\Contract\Controllerable;

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
CModule::IncludeModule("tasks");
GetMessage("TEXT");
```

### 2. Namespace –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
use Imena\Tasks\Templates\Manager\ImenaTemplateManager;
use Imena\Tasks\Templates\Internals\TemplateTable;

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
$manager = new ImenaTemplateManager(); // –ë–µ–∑ namespace
```

### 3. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
Loc::loadMessages(__FILE__);
$message = Loc::getMessage('IMENA_TASK_TEMPLATE_NAME');

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
$message = GetMessage('IMENA_TASK_TEMPLATE_NAME'); // –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
use Bitrix\Tasks\Util\Error\Collection;

$this->errorCollection = new Collection();
$this->errorCollection->add([new \Bitrix\Main\Error('Message', 'CODE')]);

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
$this->errors[] = 'Message'; // –ú–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ Collection
```

### 5. AJAX —á–µ—Ä–µ–∑ Controllerable

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
class MyComponent extends TasksBaseComponent implements Controllerable
{
    public function configureActions()
    {
        return [
            'myAction' => [
                '+prefilters' => [
                    new \Bitrix\Tasks\Action\Filter\BooleanFilter(),
                ],
            ],
        ];
    }
    
    public function myActionAction($param)
    {
        // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
    }
}
```

### 6. –•–µ—à—Ç–µ–≥ –∞–≤—Ç–æ—Ä–∞

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –ø–æ–º–µ—á–µ–Ω—ã —Ö–µ—à—Ç–µ–≥–æ–º `#vlikhobabin@gmail.com`:

```php
// #vlikhobabin@gmail.com - –ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Imena —Ç–∞–±–ª–∏—Ü–∞–º–∏
use Imena\Tasks\Templates\Manager\ImenaTemplateManager;
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **templates.list:** –ù–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (>1000 –∑–∞–ø–∏—Å–µ–π)
- **template.selector:** AJAX –ø–æ–∏—Å–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —à–∞–±–ª–æ–Ω–æ–≤

### 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- **widget.template.access:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (60% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)
- **template.selector:** AJAX –ø–æ–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π API, —Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ (50% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)

### 3. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –º–æ–¥—É–ª—å `imena.tasks.templates`
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç —Ç–∞—Ä–∏—Ñ Bitrix24 —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏

---

## üìä –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|-----------|------------|--------|------------|
| `templates.list` | 95% | ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é | –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ |
| `task.template` | 100% | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω | - |
| `widget.member.selector` | 100% | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω | - |
| `widget.template.access` | 60% | ‚è≥ –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ | –ù–µ–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ |
| `template.selector` | 50% | ‚è≥ –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ | AJAX –ø–æ–∏—Å–∫ —Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ |

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Ñ–∞–π–ª–µ `README.md` –≤ —Å–≤–æ–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ:

- [templates.list/README.md](./templates.list/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [task.template/README.md](./task.template/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [widget.member.selector/README.md](./widget.member.selector/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [widget.template.access/README.md](./widget.template.access/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [template.selector/README.md](./template.selector/README.md) - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

- **`imena.tasks.templates`** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏
  - ORM —Ç–∞–±–ª–∏—Ü—ã
  - –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
  - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
  - –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

- **`imena.camunda`** - –º–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Camunda (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  - –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤

---

## üöÄ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ `templates.list`
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
   - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

2. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
   - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `widget.template.access`
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è AJAX –ø–æ–∏—Å–∫–∞ –≤ `template.selector`

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)

1. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–æ–≤
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
   - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

2. **–£–ª—É—á—à–µ–Ω–∏–µ UX**
   - Drag & Drop –¥–ª—è —á–µ–∫-–ª–∏—Å—Ç–æ–≤
   - –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6+ –º–µ—Å—è—Ü–µ–≤)

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jira
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Trello
   - API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–ú–æ–¥—É–ª—å:** imena.tasks  
**–í–µ—Ä—Å–∏—è Bitrix24:** 20.0.0+  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** PHP 8.0+  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** Proprietary

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 1.0 (2025-01-XX)

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö 5 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

*–î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Bitrix24 D7 –∏ —Å–ª–µ–¥—É–µ—Ç best practices –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ä—Ç–∞–ª–æ–≤.*


---

# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è imena.camunda

# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è imena.camunda - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

–ö–∞—Ç–∞–ª–æ–≥ `imena.camunda` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ Camunda BPM Engine –≤ Bitrix24. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ D7 –∏ —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –º–æ–¥—É–ª—è `imena.sample`.

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** vlikhobabin@gmail.com  
**–ú–æ–¥—É–ª—å:** imena.camunda  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Bitrix24 20.0.0+, PHP 7.4+

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
imena.camunda/
‚îú‚îÄ‚îÄ camunda.processinstance.list/          # –°–ø–∏—Å–æ–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îú‚îÄ‚îÄ camunda.processinstance.details/      # –î–µ—Ç–∞–ª–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
‚îú‚îÄ‚îÄ camunda.processdefinition.list/       # –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îú‚îÄ‚îÄ camunda.processdefinition.details/     # –î–µ—Ç–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
‚îú‚îÄ‚îÄ camunda.processdefinition.startform/   # –°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
‚îú‚îÄ‚îÄ camunda.externaltask.list/            # –°–ø–∏—Å–æ–∫ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ camunda.externaltask.details/         # –î–µ—Ç–∞–ª–∏ –≤–Ω–µ—à–Ω–µ–π –∑–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ camunda.processvariable.list/         # –°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îî‚îÄ‚îÄ .cursorrules                          # –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. camunda.processinstance.list

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda —Å Grid –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –º–∞—Å—Å–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.

**–ö–ª–∞—Å—Å:** `CamundaProcessListComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- Grid –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å 16 –∫–æ–ª–æ–Ω–∫–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (8 –ø–æ–ª–µ–π, 6 –ø—Ä–µ—Å–µ—Ç–æ–≤)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (suspend, resume, terminate, delete)
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≥—Ä—É–ø–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel/CSV
- AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SidePanel –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- `suspendAction(string $processId)` - –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
- `resumeAction(string $processId)` - –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- `deleteAction(string $processId, string $reason)` - —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- `syncWithCamundaAction()` - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda
- `exportAction(array $params)` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- `reloadAction()` - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Grid

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `GRID_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Grid (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_PROCESS_LIST`)
- `FILTER_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_PROCESS_FILTER`)
- `PAGE_SIZE` - —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 25)
- `PROCESS_DEFINITION_KEY` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª—é—á—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `STATUS` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `PATH_TO_DETAIL` - –ø—É—Ç—å –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `SHOW_FILTER` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä (Y/N)
- `SHOW_ACTION_PANEL` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π (Y/N)
- `ALLOW_EXPORT` - —Ä–∞–∑—Ä–µ—à–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç (Y/N)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessTable` (ORM) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å `CamundaGrid` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `CamundaFilter` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ `CamundaAccessController`
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ `CamundaProcessController`

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processinstance.list',
    '',
    [
        'GRID_ID' => 'CAMUNDA_PROCESS_LIST',
        'FILTER_ID' => 'CAMUNDA_PROCESS_FILTER',
        'PAGE_SIZE' => 25,
        'PATH_TO_DETAIL' => '/local/pages/camunda/process/detail.php?ID=#ID#',
        'SHOW_FILTER' => 'Y',
        'SHOW_ACTION_PANEL' => 'Y',
    ]
);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ `PROCESS_DEFINITION_KEY` –∏ `STATUS`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—á–µ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏–π (suspend/resume/delete)
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `FullSyncService` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

### 2. camunda.processinstance.details

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ Camunda —á–µ—Ä–µ–∑ Entity Editor.

**–ö–ª–∞—Å—Å:** `CamundaProcessDetailComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Entity Editor (—Ä–µ–∂–∏–º read-only –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (ID=0)
- AJAX —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- SidePanel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- `saveAction(array $fields)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- `loadDataAction(int $processId)` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `PROCESS_ID` - ID –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (0 = –Ω–æ–≤—ã–π)
- `PATH_TO_LIST` - URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å–ø–∏—Å–∫—É
- `SHOW_TITLE` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Y/N)
- `EDITOR_CONFIG_ID` - ID –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Entity Editor
- `USE_SIDEPANEL` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SidePanel (Y/N)
- `SIDEPANEL_WIDTH` - —à–∏—Ä–∏–Ω–∞ SidePanel (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 900)
- `AUTO_CLOSE_ON_SAVE` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (Y/N)
- `CHECK_PERMISSIONS` - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (Y/N)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessTable` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessProvider` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Entity Editor
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ `CamundaAccessController`
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ `CommandBus` (CreateProcessCommand, UpdateProcessCommand)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processinstance.details',
    '',
    [
        'PROCESS_ID' => $_REQUEST['ID'] ?? '0',
        'PATH_TO_LIST' => '/local/pages/camunda/process/',
        'USE_SIDEPANEL' => 'Y',
        'AUTO_CLOSE_ON_SAVE' => 'Y',
    ]
);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–µ–∂–∏–º read-only –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Camunda API)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Command Layer –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

### 3. camunda.processdefinition.list

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (suspend, activate, delete, start).

**–ö–ª–∞—Å—Å:** `CamundaProcessDefinitionListComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- Grid –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ (suspend, activate, delete)
- –ó–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- `suspendAction(string $definitionId, bool $includeInstances)` - –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `activateAction(string $definitionId, bool $includeInstances)` - –∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `deleteAction(string $definitionId, bool $cascade)` - —É–¥–∞–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `syncWithCamundaAction()` - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- `syncDefinitionAction(string $definitionId)` - —Ç–æ—á–µ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `syncAction(array $ID)` - –≥—Ä—É–ø–ø–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- `deleteGroupAction(array $ID, bool $cascade)` - –≥—Ä—É–ø–ø–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- `startProcessInstanceAction(string $definitionId, string $businessKey)` - –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞
- `exportAction(array $params)` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `GRID_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Grid (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_DEFINITION_LIST`)
- `FILTER_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_DEFINITION_FILTER`)
- `PAGE_SIZE` - —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 25)
- `PATH_TO_DETAIL` - –ø—É—Ç—å –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `SHOW_ROW_ACTIONS` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è —Å—Ç—Ä–æ–∫ (Y/N)
- `ENABLE_LIVE_SEARCH` - –≤–∫–ª—é—á–∏—Ç—å –∂–∏–≤–æ–π –ø–æ–∏—Å–∫ (Y/N)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessDefinitionTable` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `getLatestVersions()` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å `CamundaGrid` –∏ `CamundaFilter`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `FullSyncService` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processdefinition.list',
    '',
    [
        'GRID_ID' => 'CAMUNDA_DEFINITION_LIST',
        'FILTER_ID' => 'CAMUNDA_DEFINITION_FILTER',
        'PAGE_SIZE' => 25,
        'PATH_TO_DETAIL' => '/local/pages/camunda/definition/detail.php?ID=#ID#',
    ]
);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (latestVersion=true)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `startedBy` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î

---

### 4. camunda.processdefinition.details

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ Camunda —á–µ—Ä–µ–∑ Entity Editor.

**–ö–ª–∞—Å—Å:** `CamundaProcessDefinitionDetailsComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- Read-only —Ä–µ–∂–∏–º (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Camunda API)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Editor
- SidePanel –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- –ù–µ—Ç (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `DEFINITION_ID` - ID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- `PATH_TO_LIST` - URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å–ø–∏—Å–∫—É
- `SHOW_TITLE` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Y/N)
- `EDITOR_CONFIG_ID` - ID –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Entity Editor
- `CACHE_TYPE` - —Ç–∏–ø –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `CACHE_TIME` - –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessDefinitionTable` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessDefinitionProvider` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Entity Editor

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processdefinition.details',
    '',
    [
        'DEFINITION_ID' => $_REQUEST['ID'] ?? '',
        'PATH_TO_LIST' => '/local/pages/camunda/definition/',
    ]
);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä (read-only —Ä–µ–∂–∏–º)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ –±—É–ª–µ–≤—ã—Ö –ø–æ–ª–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SidePanel

---

### 5. camunda.processdefinition.startform

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Ñ–æ—Ä–º—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–ª—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–π—Å—Ç–≤ –∏–∑ Storm –¥–∏–∞–≥—Ä–∞–º–º—ã.

**–ö–ª–∞—Å—Å:** `CamundaProcessDefinitionStartFormComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–π—Å—Ç–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Camunda
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º `imena.storm` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- `startProcessAction()` - –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `PROCESS_KEY` - –∫–ª—é—á –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `PropertyResolver` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessDefinitionClient` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä —á–µ—Ä–µ–∑ `ProcessTable::add()`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –º–æ–¥—É–ª–µ–º `imena.storm` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processdefinition.startform',
    '',
    [
        'PROCESS_KEY' => $_REQUEST['KEY'] ?? '',
    ]
);
```

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:**
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ `PropertyResolver::getProcessContext()`
2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–π—Å—Ç–≤ –∏–∑ Storm –¥–∏–∞–≥—Ä–∞–º–º—ã
3. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `PropertyResolver::buildVariables()`
4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ `ProcessDefinitionClient::startInstanceByKey()`
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–π—Å—Ç–≤ Storm –¥–∏–∞–≥—Ä–∞–º–º—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `startedBy` (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Bitrix24)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ —Ñ–∞–π–ª

---

### 6. camunda.externaltask.list

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–¥–∞—á Camunda (External Task Worker API) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

**–ö–ª–∞—Å—Å:** `CamundaExternalTaskListComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- Grid –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–¥–∞—á (10 –∫–æ–ª–æ–Ω–æ–∫)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ 12 –ø–æ–ª—è–º
- 4 –ø—Ä–µ—Å–µ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (Available, Locked, WithErrors, HighPriority)
- –î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –∑–∞–¥–∞—á–∞–º–∏ (complete, unlock, view)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —ç–∫–∑–µ–º–ø–ª—è—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–∞

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- `completeAction(string $taskId, string $workerId, array $variables, ?array $localVariables)` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `unlockAction(string $taskId, string $reason)` - —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏
- `syncWithCamundaAction()` - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
- `exportAction(string $type)` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `GRID_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Grid (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_EXTERNALTASK_LIST`)
- `FILTER_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_EXTERNALTASK_FILTER`)
- `PAGE_SIZE` - —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 25)
- `PROCESS_INSTANCE_ID` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —ç–∫–∑–µ–º–ø–ª—è—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `PATH_TO_DETAIL` - –ø—É—Ç—å –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–¥–∞—á–∏
- `SHOW_FILTER` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä (Y/N)
- `SHOW_ACTION_PANEL` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π (Y/N)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ExternalTaskTable` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ExternalTaskClient` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Camunda API
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `CompleteTaskCommand` –∏ `UnlockTaskCommand` –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å `CamundaGrid` –∏ `CamundaFilter`

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.externaltask.list',
    '',
    [
        'GRID_ID' => 'CAMUNDA_EXTERNALTASK_LIST',
        'FILTER_ID' => 'CAMUNDA_EXTERNALTASK_FILTER',
        'PAGE_SIZE' => 25,
        'PROCESS_INSTANCE_ID' => $_REQUEST['PROCESS_INSTANCE_ID'] ?? '',
        'PATH_TO_DETAIL' => '/local/pages/camunda/task/detail.php?ID=#ID#',
    ]
);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ `PROCESS_INSTANCE_ID`
- –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–æ—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Command Layer –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—á–µ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

---

### 7. camunda.externaltask.details

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–Ω–µ—à–Ω–µ–π –∑–∞–¥–∞—á–∏ Camunda —á–µ—Ä–µ–∑ Entity Editor.

**–ö–ª–∞—Å—Å:** `CamundaExternalTaskDetailsComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–Ω–µ—à–Ω–µ–π –∑–∞–¥–∞—á–µ
- Read-only —Ä–µ–∂–∏–º (–∑–∞–¥–∞—á–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Camunda API)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Editor
- SidePanel –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- –ù–µ—Ç (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `TASK_ID` - ID –≤–Ω–µ—à–Ω–µ–π –∑–∞–¥–∞—á–∏
- `PATH_TO_LIST` - URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å–ø–∏—Å–∫—É
- `SHOW_TITLE` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Y/N)
- `EDITOR_CONFIG_ID` - ID –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Entity Editor
- `CACHE_TYPE` - —Ç–∏–ø –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `CACHE_TIME` - –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ExternalTaskTable` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ExternalTaskProvider` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Entity Editor

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.externaltask.details',
    '',
    [
        'TASK_ID' => $_REQUEST['ID'] ?? '',
        'PATH_TO_LIST' => '/local/pages/camunda/task/',
    ]
);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä (read-only —Ä–µ–∂–∏–º)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ –±—É–ª–µ–≤—ã—Ö –ø–æ–ª–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SidePanel

---

### 8. camunda.processvariable.list

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda —Å Grid –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

**–ö–ª–∞—Å—Å:** `CamundaProcessVariableListComponent`

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- Grid –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é, –∫–æ–¥—É, —Ç–∏–ø—É, —Å—Ç–∞—Ç—É—Å—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- 2 –ø—Ä–µ—Å–µ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (Recent Sync, With Errors)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `ProcessVariableDataProvider`

**AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
- `reloadAction()` - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Grid

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `GRID_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Grid (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_PROCESS_VARIABLE_LIST`)
- `FILTER_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CAMUNDA_PROCESS_VARIABLE_FILTER`)
- `PAGE_SIZE` - —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 25)
- `PROCESS_INSTANCE_ID` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —ç–∫–∑–µ–º–ø–ª—è—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `PROCESS_DEFINITION_KEY` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª—é—á—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- `SHOW_FILTER` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä (Y/N)
- `SHOW_ACTION_PANEL` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π (Y/N)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ProcessVariableDataProvider` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å–∏—Å—Ç–µ–º–æ–π Grid –∏ Filter Bitrix24

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processvariable.list',
    '',
    [
        'GRID_ID' => 'CAMUNDA_PROCESS_VARIABLE_LIST',
        'FILTER_ID' => 'CAMUNDA_PROCESS_VARIABLE_FILTER',
        'PAGE_SIZE' => 25,
        'PROCESS_INSTANCE_ID' => $_REQUEST['PROCESS_INSTANCE_ID'] ?? '',
    ]
);
```

**–ö–æ–ª–æ–Ω–∫–∏ Grid:**
- `CODE` - –∫–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- `NAME` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- `VALUE` - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- `TYPE` - —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (string, integer, boolean, date, enum)
- `PROCESS_INSTANCE_ID` - ID —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
- `PROCESS_DEFINITION_KEY` - –∫–ª—é—á –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- `SYNC_STATUS` - —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `LAST_SYNC_DATE` - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

---

## –û–±—â–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

```php
class ComponentName extends CBitrixComponent implements Controllerable, Errorable
{
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    public function __construct($component = null)
    
    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    public function onPrepareComponentParams($arParams): array
    
    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    public function executeComponent(): void
    
    // AJAX –¥–µ–π—Å—Ç–≤–∏—è
    public function configureActions(): array
    public function actionNameAction(...): array|AjaxJson
}
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–ª–∞—Å—Å—ã –º–æ–¥—É–ª—è `imena.camunda`:

- **ORM —Ç–∞–±–ª–∏—Ü—ã:** `ProcessTable`, `ProcessDefinitionTable`, `ExternalTaskTable`
- **Grid —Å–∏—Å—Ç–µ–º—ã:** `CamundaGrid` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å—É—â–Ω–æ—Å—Ç–∏
- **Filter —Å–∏—Å—Ç–µ–º—ã:** `CamundaFilter` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å—É—â–Ω–æ—Å—Ç–∏
- **Access Control:** `CamundaAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- **Command Layer:** –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Sync Services:** `FullSyncService` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∑–∞—â–∏—Ç—É:

1. **Prefilters –≤ configureActions():**
   - `ActionFilter\Authentication` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - `ActionFilter\Csrf` - –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫
   - `ActionFilter\HttpMethod` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ HTTP

2. **Access Control:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ `CamundaAccessController`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `CamundaActionDictionary` –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π

3. **Command Layer:**
   - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ErrorCollection` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:

```php
protected $errorCollection;

public function getErrors(): array
{
    return $this->errorCollection->toArray();
}
```

### 5. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

–í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `Loc::getMessage()`:

```php
Loc::loadMessages(__FILE__);
$message = Loc::getMessage('CAMUNDA_MESSAGE_KEY');
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

```
camunda.processdefinition.list
    ‚îú‚îÄ‚îÄ ‚Üí camunda.processdefinition.details (–ø—Ä–æ—Å–º–æ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)
    ‚îú‚îÄ‚îÄ ‚Üí camunda.processdefinition.startform (–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞)
    ‚îî‚îÄ‚îÄ ‚Üí camunda.processinstance.list (—Å–ø–∏—Å–æ–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤)

camunda.processinstance.list
    ‚îú‚îÄ‚îÄ ‚Üí camunda.processinstance.details (–ø—Ä–æ—Å–º–æ—Ç—Ä —ç–∫–∑–µ–º–ø–ª—è—Ä–∞)
    ‚îî‚îÄ‚îÄ ‚Üí camunda.externaltask.list (–∑–∞–¥–∞—á–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞)

camunda.processinstance.details
    ‚îú‚îÄ‚îÄ ‚Üí camunda.externaltask.list (–∑–∞–¥–∞—á–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞)
    ‚îî‚îÄ‚îÄ ‚Üí camunda.processvariable.list (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞)

camunda.externaltask.list
    ‚îî‚îÄ‚îÄ ‚Üí camunda.externaltask.details (–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á–∏)
```

### –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**1. –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –¥–µ—Ç–∞–ª—è–º–∏:**
```php
// –°–ø–∏—Å–æ–∫
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processinstance.list',
    '',
    [
        'PATH_TO_DETAIL' => '/local/pages/camunda/process/detail.php?ID=#ID#',
    ]
);

// –î–µ—Ç–∞–ª–∏ (–æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ SidePanel)
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processinstance.details',
    '',
    [
        'PROCESS_ID' => $_REQUEST['ID'] ?? '0',
    ]
);
```

**2. –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Å –∑–∞–ø—É—Å–∫–æ–º:**
```php
// –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processdefinition.list',
    '',
    []
);

// –°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞ (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "Start")
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processdefinition.startform',
    '',
    [
        'PROCESS_KEY' => $_REQUEST['KEY'] ?? '',
    ]
);
```

**3. –î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –∑–∞–¥–∞—á–∞–º–∏:**
```php
// –î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processinstance.details',
    '',
    [
        'PROCESS_ID' => $_REQUEST['ID'] ?? '',
    ]
);

// –ó–∞–¥–∞—á–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –¥–µ—Ç–∞–ª–∏)
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.externaltask.list',
    '',
    [
        'PROCESS_INSTANCE_ID' => $_REQUEST['ID'] ?? '',
    ]
);
```

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `GRID_ID` | string | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Grid –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ |
| `FILTER_ID` | string | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| `PAGE_SIZE` | int | –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (10, 25, 50, 100) |
| `PATH_TO_DETAIL` | string | –®–∞–±–ª–æ–Ω URL –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| `LIST_URL` | string | URL —Å–ø–∏—Å–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ |
| `SHOW_FILTER` | Y/N | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä |
| `SHOW_ACTION_PANEL` | Y/N | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π |
| `CACHE_TYPE` | A/Y/N | –¢–∏–ø –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è |
| `CACHE_TIME` | int | –í—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö |

### –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**camunda.processinstance.list:**
- `PROCESS_DEFINITION_KEY` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª—é—á—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `STATUS` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `PROCESS_DEFINITION_ID` - —Ñ–∏–ª—å—Ç—Ä –ø–æ ID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (legacy)

**camunda.externaltask.list:**
- `PROCESS_INSTANCE_ID` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —ç–∫–∑–µ–º–ø–ª—è—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `IS_IFRAME_MODE` - —Ä–µ–∂–∏–º iframe
- `IFRAME_TYPE` - —Ç–∏–ø iframe

**camunda.processvariable.list:**
- `PROCESS_INSTANCE_ID` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —ç–∫–∑–µ–º–ø–ª—è—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–∞
- `PROCESS_DEFINITION_KEY` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª—é—á—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

---

## AJAX API

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

–í—Å–µ AJAX –¥–µ–π—Å—Ç–≤–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Bitrix24 D7:

```php
public function configureActions(): array
{
    return [
        'actionName' => [
            'prefilters' => [
                new ActionFilter\Authentication(),
                new ActionFilter\Csrf(),
            ],
        ],
    ];
}

public function actionNameAction(...): array|AjaxJson
{
    // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
    return AjaxJson::createSuccess($data);
}
```

### –í—ã–∑–æ–≤ –∏–∑ JavaScript

```javascript
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±
BX.ajax.runComponentAction(
    'imena.camunda:camunda.processinstance.list',
    'suspend',
    {
        mode: 'class',
        data: { processId: 'process_123' }
    }
).then(function(response) {
    if (response.data.success) {
        // –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    } else {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        console.error(response.data.errors);
    }
});
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sync Services

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è:

### FullSyncService

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:

```php
$fullSync = new \ImenaCamunda\Sync\Service\FullSyncService();

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
$result = $fullSync->syncAllDefinitions();

// –¢–æ—á–µ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é
$result = $fullSync->syncByDefinition($definitionId);
```

### –¢–æ—á–µ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–ü–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:

```php
// –ü–æ—Å–ª–µ suspend/resume/delete
$fullSync = new \ImenaCamunda\Sync\Service\FullSyncService();
$syncResult = $fullSync->syncByDefinition($definitionId);
```

---

## –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–æ–ª–Ω—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —è–∑—ã–∫–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:**
```
lang/ru/
‚îú‚îÄ‚îÄ class.php              # –Ø–∑—ã–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–ª–∞—Å—Å–∞
‚îú‚îÄ‚îÄ .parameters.php        # –Ø–∑—ã–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚îî‚îÄ‚îÄ .description.php       # –Ø–∑—ã–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –æ–ø–∏—Å–∞–Ω–∏—è
```

**–ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç:**
- `CAMUNDA_PROCESS_LIST_*` - –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `CAMUNDA_PROCESS_DETAIL_*` - –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ—Ü–µ—Å—Å–∞
- `CAMUNDA_DEFINITION_*` - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `CAMUNDA_EXTERNALTASK_*` - –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–¥–∞—á

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `setRawRowsWithLazyLoadPagination()`
   - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Grid –∏ Filter –∫–µ—à–∏—Ä—É—é—Ç—Å—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã ORM –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–µ—à–∏—Ä—É—é—Ç—Å—è

3. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**
   - –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `select` –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π
   - –ò–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - –í—Å–µ AJAX –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `ActionFilter\Authentication`

2. **CSRF –∑–∞—â–∏—Ç–∞:**
   - –í—Å–µ POST/PUT/DELETE –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—â–µ–Ω—ã CSRF —Ç–æ–∫–µ–Ω–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `ActionFilter\Csrf`

3. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `CamundaAccessController`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `CamundaActionDictionary` –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π

4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ErrorCollection`:

```php
protected $errorCollection;

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
$this->errorCollection->setError(new Error($message, $code));

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
$errors = $this->errorCollection->toArray();
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `CAMUNDA_DEBUG:`:

```php
error_log("CAMUNDA DEBUG: Operation: " . $operation);
error_log("CAMUNDA ERROR: " . $e->getMessage());
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

```php
<?php
require($_SERVER["DOCUMENT_ROOT"]."/bitrix/header.php");

$APPLICATION->SetTitle("–ü—Ä–æ—Ü–µ—Å—Å—ã Camunda");

$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.processinstance.list',
    '',
    [
        'GRID_ID' => 'CAMUNDA_PROCESS_LIST',
        'FILTER_ID' => 'CAMUNDA_PROCESS_FILTER',
        'PAGE_SIZE' => 25,
        'PATH_TO_DETAIL' => '/local/pages/camunda/process/detail.php?ID=#ID#',
        'SHOW_FILTER' => 'Y',
        'SHOW_ACTION_PANEL' => 'Y',
    ]
);

require($_SERVER["DOCUMENT_ROOT"]."/bitrix/footer.php");
?>
```

### 2. –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ SidePanel

```php
<?php
require($_SERVER["DOCUMENT_ROOT"]."/bitrix/header.php");

$APPLICATION->IncludeComponent(
    'bitrix:ui.sidepanel.wrapper',
    '',
    [
        'POPUP_COMPONENT_NAME' => 'imena.camunda:camunda.processinstance.details',
        'POPUP_COMPONENT_PARAMS' => [
            'PROCESS_ID' => $_REQUEST['ID'] ?? '0',
            'PATH_TO_LIST' => '/local/pages/camunda/process/',
        ],
        'USE_UI_TOOLBAR' => 'Y',
        'POPUP_COMPONENT_USE_BITRIX24_THEME' => 'Y',
    ]
);

require($_SERVER["DOCUMENT_ROOT"]."/bitrix/footer.php");
?>
```

### 3. –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø—Ä–æ—Ü–µ—Å—Å–∞

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.camunda:camunda.externaltask.list',
    '',
    [
        'PROCESS_INSTANCE_ID' => $_REQUEST['PROCESS_INSTANCE_ID'] ?? '',
        'PATH_TO_DETAIL' => '/local/pages/camunda/task/detail.php?ID=#ID#',
        'SHOW_FILTER' => 'Y',
    ]
);
?>
```

---

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å –≤ configureActions():**
```php
public function configureActions(): array
{
    return [
        'newAction' => [
            'prefilters' => [
                new ActionFilter\Authentication(),
                new ActionFilter\Csrf(),
            ],
        ],
    ];
}
```

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è:**
```php
public function newActionAction(string $param): array
{
    try {
        // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
        return [
            'success' => true,
            'message' => '–î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ',
        ];
    } catch (\Exception $e) {
        $this->errorCollection->setError(new Error($e->getMessage()));
        return [];
    }
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ Grid

1. **–û–±–Ω–æ–≤–∏—Ç—å Grid Column Provider:**
```php
// –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º Grid –∫–ª–∞—Å—Å–µ
$result[] = $this->createColumn('NEW_FIELD')
    ->setName('–ù–æ–≤–æ–µ –ø–æ–ª–µ')
    ->setDefault(true)
    ->setSort('NEW_FIELD');
```

2. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é:**
```php
// –í lang/ru/class.php
Loc::getMessage('CAMUNDA_COLUMN_NEW_FIELD') ?: '–ù–æ–≤–æ–µ –ø–æ–ª–µ';
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **Unit-—Ç–µ—Å—Ç—ã:**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

2. **Integration-—Ç–µ—Å—Ç—ã:**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Grid/Filter
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AJAX –¥–µ–π—Å—Ç–≤–∏–π
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

3. **Functional-—Ç–µ—Å—Ç—ã:**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –≤ SidePanel
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

---

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Bitrix24:** 20.0.0+
- **PHP:** 7.4+
- **MySQL:** 5.7+

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ú–æ–¥—É–ª—å `imena.camunda` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
- –ú–æ–¥—É–ª—å `imena.storm` - –¥–ª—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Ñ–æ—Ä–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ú–æ–¥—É–ª—å `main` - –±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Bitrix24
- –ú–æ–¥—É–ª—å `ui` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Bitrix24

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É: **vlikhobabin@gmail.com**

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ú–æ–¥—É–ª—å imena.camunda](../../modules/imena.camunda/README.md)
- [Sync Services](../../modules/imena.camunda/lib/Sync/README.md)
- [Rest API](../../modules/imena.camunda/lib/Rest/README.md)
- [ProcessInstance](../../modules/imena.camunda/lib/ProcessInstance/README.md)
- [ExternalTask](../../modules/imena.camunda/lib/ExternalTask/README.md)

---

**–ê–≤—Ç–æ—Ä:** vlikhobabin@gmail.com  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2024



---

# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è imena.rmq

# IMENA RMQ Components - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–í–µ—Ä—Å–∏—è:** 1.0+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è  
**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 25.01.2025

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
   - [queue.list - –°–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ](#queuelist---—Å–ø–∏—Å–æ–∫-–æ—á–µ—Ä–µ–¥–µ–π-rabbitmq)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
4. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
5. [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
6. [AJAX API](#ajax-api)
7. [–®–∞–±–ª–æ–Ω—ã](#—à–∞–±–ª–æ–Ω—ã)
8. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)

---

## –û–±–∑–æ—Ä

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è **imena.rmq** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç UI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å RabbitMQ Management API –≤ Bitrix24. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–¥—É–ª—å `imena.rmq` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å RabbitMQ —Å–µ—Ä–≤–µ—Ä–æ–º.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π** —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ **Grid —Å–∏—Å—Ç–µ–º–∞** —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–æ–ª–æ–Ω–æ–∫
- ‚úÖ **AJAX –¥–µ–π—Å—Ç–≤–∏—è** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—è–º–∏
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º —Ö–æ—Å—Ç–∞–º
- ‚úÖ **–û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π** —á–µ—Ä–µ–∑ UI

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### queue.list - –°–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ

**–ü—É—Ç—å:** `/local/components/imena.rmq/queue.list/`  
**–ù–∞–∑–≤–∞–Ω–∏–µ:** `imena.rmq:queue.list`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `queue.list` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞ (vhost) –≤ –≤–∏–¥–µ —Ç–∞–±–ª–∏—Ü—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Bitrix Grid —Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π HTML —Ç–∞–±–ª–∏—Ü—ã.

#### –í–µ—Ä—Å–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

1. **`class.php`** ‚≠ê **–ê–∫—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è**
   - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è Grid —Å–∏—Å—Ç–µ–º–∞ (`bitrix:main.ui.grid`)
   - AJAX –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ `Controllerable`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `RmqQueueGrid`
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π

2. **`class_simple.php`** - –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è
   - –ë–µ–∑ Grid —Å–∏—Å—Ç–µ–º—ã
   - –ü—Ä–æ—Å—Ç–∞—è HTML —Ç–∞–±–ª–∏—Ü–∞
   - –ë–∞–∑–æ–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

3. **`class_grid.php`** - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –≤–µ—Ä—Å–∏—è
   - Grid —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ ComponentParams
   - Client-side —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
   - –†—É—á–Ω–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Grid

4. **`class_grid_final.php`** - –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å ComponentParams
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ComponentParams::get()`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Grid
   - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix Grid API

5. **`class_grid_backup.php`** - –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
   - Backup –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
queue.list/
‚îú‚îÄ‚îÄ class.php                    # ‚≠ê –ê–∫—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ class_simple.php             # –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ class_grid.php               # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ class_grid_final.php         # –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ class_grid_backup.php        # –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
‚îú‚îÄ‚îÄ .parameters.php              # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ lang/
‚îÇ   ‚îî‚îÄ‚îÄ ru/
‚îÇ       ‚îî‚îÄ‚îÄ class.php            # –Ø–∑—ã–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îî‚îÄ‚îÄ templates/
    ‚îî‚îÄ‚îÄ .default/
        ‚îú‚îÄ‚îÄ template.php         # ‚≠ê –û—Å–Ω–æ–≤–Ω–æ–π —à–∞–±–ª–æ–Ω (Grid)
        ‚îú‚îÄ‚îÄ template_simple.php  # –ü—Ä–æ—Å—Ç–æ–π —à–∞–±–ª–æ–Ω
        ‚îú‚îÄ‚îÄ template_grid.php    # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —à–∞–±–ª–æ–Ω
        ‚îú‚îÄ‚îÄ template_grid_final.php
        ‚îú‚îÄ‚îÄ template_grid_backup.php
        ‚îî‚îÄ‚îÄ lang/
            ‚îî‚îÄ‚îÄ ru/
                ‚îî‚îÄ‚îÄ template.php # –Ø–∑—ã–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —à–∞–±–ª–æ–Ω–∞
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–¥—É–ª—è:**
- `Imena\Rmq\Service\RmqApiClient` - HTTP –∫–ª–∏–µ–Ω—Ç RabbitMQ API
- `Imena\Rmq\Service\RmqApiException` - –ò—Å–∫–ª—é—á–µ–Ω–∏—è API
- `Imena\Rmq\Queue\QueueEntity` - Entity –æ–±—ä–µ–∫—Ç –æ—á–µ—Ä–µ–¥–∏
- `Imena\Rmq\Queue\Grid\RmqQueueGrid` - Grid —Å–∏—Å—Ç–µ–º–∞
- `Imena\Rmq\Queue\Grid\Settings\QueueSettings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Grid

**Bitrix –∫–ª–∞—Å—Å—ã:**
- `CBitrixComponent` - –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `Controllerable` - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è AJAX –¥–µ–π—Å—Ç–≤–∏–π
- `ActionFilter` - –§–∏–ª—å—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è AJAX

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –û—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è (class.php)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```
ImenaRmqQueueListComponent (CBitrixComponent + Controllerable)
    ‚îÇ
    ‚îú‚îÄ> executeComponent()
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îú‚îÄ> prepareData()
    ‚îÇ       ‚îÇ       ‚îÇ
    ‚îÇ       ‚îÇ       ‚îú‚îÄ> initComponentParams()
    ‚îÇ       ‚îÇ       ‚îú‚îÄ> getGrid() ‚Üí RmqQueueGrid
    ‚îÇ       ‚îÇ       ‚îú‚îÄ> grid->processRequest()
    ‚îÇ       ‚îÇ       ‚îî‚îÄ> loadGridData()
    ‚îÇ       ‚îÇ               ‚îÇ
    ‚îÇ       ‚îÇ               ‚îú‚îÄ> RmqApiClient->getQueues()
    ‚îÇ       ‚îÇ               ‚îú‚îÄ> QueueEntity::createFromApiResponse()
    ‚îÇ       ‚îÇ               ‚îî‚îÄ> grid->setRawRows()
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ> includeComponentTemplate()
    ‚îÇ
    ‚îî‚îÄ> purgeQueueAction() (AJAX)
            ‚îÇ
            ‚îú‚îÄ> RmqApiClient->purgeQueue()
            ‚îî‚îÄ> return ['success' => true/false]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Grid —Å–∏—Å—Ç–µ–º—É `RmqQueueGrid` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –†—É—á–Ω–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Grid (–±–µ–∑ ComponentParams)
- AJAX –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ `Controllerable` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è (class_simple.php)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```
ImenaRmqQueueListComponent (CBitrixComponent)
    ‚îÇ
    ‚îî‚îÄ> executeComponent()
            ‚îÇ
            ‚îú‚îÄ> RmqApiClient->getQueues()
            ‚îú‚îÄ> QueueEntity::createFromApiResponse()
            ‚îú‚îÄ> prepareQueueData() ‚Üí —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            ‚îî‚îÄ> includeComponentTemplate()
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü—Ä–æ—Å—Ç–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- HTML —Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑ Grid —Å–∏—Å—Ç–µ–º—ã
- –ù–µ—Ç AJAX –¥–µ–π—Å—Ç–≤–∏–π

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–í PHP:**
```php
$APPLICATION->IncludeComponent(
    'imena.rmq:queue.list',
    '',
    [
        'VHOST' => '/',
        'SHOW_EMPTY_QUEUES' => 'Y',
        'GRID_ID' => 'IMENA_RMQ_QUEUE_LIST',
        'PATH_TO_DETAIL' => '/local/pages/imena/rmq/queue/detail/',
        'CACHE_TIME' => 0,
        'CACHE_TYPE' => 'N',
    ]
);
```

**–í —à–∞–±–ª–æ–Ω–µ:**
```php
<?php
$APPLICATION->IncludeComponent(
    'imena.rmq:queue.list',
    '.default',
    [
        'VHOST' => '/',
        'SHOW_EMPTY_QUEUES' => 'N',
    ]
);
?>
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–π –≤–µ—Ä—Å–∏–∏

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –±–µ–∑ Grid —Å–∏—Å—Ç–µ–º—ã:

1. **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã:**
   ```bash
   mv class.php class_grid.php
   mv class_simple.php class.php
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —à–∞–±–ª–æ–Ω:**
   ```php
   $APPLICATION->IncludeComponent(
       'imena.rmq:queue.list',
       'simple',
       [...]
   );
   ```

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã queue.list

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `VHOST` | string | `'/'` | –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç RabbitMQ |
| `SHOW_EMPTY_QUEUES` | Y/N | `'Y'` | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ –æ—á–µ—Ä–µ–¥–∏ |
| `GRID_ID` | string | `'IMENA_RMQ_QUEUE_LIST'` | ID Grid –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ |
| `PATH_TO_DETAIL` | string | `''` | –ü—É—Ç—å –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ |
| `CACHE_TIME` | int | `0` | –í—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö |
| `CACHE_TYPE` | A/Y/N | `'N'` | –¢–∏–ø –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è |
| `CACHE_GROUPS` | Y/N | `'Y'` | –£—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–∏ |

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### VHOST
–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç RabbitMQ, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ—á–µ—Ä–µ–¥–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä–Ω–µ–≤–æ–π vhost `/`.

**–ü—Ä–∏–º–µ—Ä—ã:**
- `'/'` - –∫–æ—Ä–Ω–µ–≤–æ–π vhost
- `'/production'` - production vhost
- `'/development'` - development vhost

#### SHOW_EMPTY_QUEUES
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –æ—á–µ—Ä–µ–¥–∏ –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–π.

- `'Y'` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å–µ –æ—á–µ—Ä–µ–¥–∏ (–≤–∫–ª—é—á–∞—è –ø—É—Å—Ç—ã–µ)
- `'N'` - —Å–∫—Ä—ã–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ –æ—á–µ—Ä–µ–¥–∏

#### GRID_ID
–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Grid –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫, –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ —Ç.–¥.).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –§–æ—Ä–º–∞—Ç: `'IMENA_RMQ_QUEUE_LIST_' . $uniqueSuffix`

#### PATH_TO_DETAIL
–ü—É—Ç—å –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—á–µ—Ä–µ–¥–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤ Grid.

**–ü—Ä–∏–º–µ—Ä:**
```php
'PATH_TO_DETAIL' => '/local/pages/imena/rmq/queue/detail/?QUEUE=#QUEUE#&VHOST=#VHOST#'
```

---

## AJAX API

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

#### purgeQueueAction

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `queueName` (string, required) - –ò–º—è –æ—á–µ—Ä–µ–¥–∏
- `vhost` (string, default: `'/'`) - –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç

**–ó–∞—â–∏—Ç–∞:**
- `Authentication` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `HttpMethod` - –¢–æ–ª—å–∫–æ POST
- `Csrf` - –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF

**–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞:**
```javascript
BX.ajax.runComponentAction('imena.rmq:queue.list', 'purgeQueue', {
    data: {
        queueName: 'my_queue',
        vhost: '/'
    }
}).then(function(response) {
    if (response.data.success) {
        BX.UI.Notification.Center.notify({
            content: response.data.message,
            autoHideDelay: 3000
        });
        // –û–±–Ω–æ–≤–∏—Ç—å Grid
        location.reload();
    } else {
        BX.UI.Notification.Center.notify({
            content: '–û—à–∏–±–∫–∞: ' + response.data.error,
            autoHideDelay: 5000
        });
    }
});
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:**
```json
{
    "success": true,
    "message": "–û—á–µ—Ä–µ–¥—å \"my_queue\" —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω–∞"
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ:**
```json
{
    "success": false,
    "error": "–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏: ..."
}
```

---

## –®–∞–±–ª–æ–Ω—ã

### template.php (–û—Å–Ω–æ–≤–Ω–æ–π —à–∞–±–ª–æ–Ω)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –®–∞–±–ª–æ–Ω —Å Grid —Å–∏—Å—Ç–µ–º–æ–π Bitrix

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `bitrix:main.ui.grid`
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Grid —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```php
// 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫
Extension::load('main.grid');
Extension::load('ui.notification');

// 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
if (!empty($arResult['ERROR'])) {
    // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
}

// 3. –í—ã–≤–æ–¥ Grid
$APPLICATION->IncludeComponent('bitrix:main.ui.grid', '', [
    'GRID_ID' => $arResult['GRID_ID'],
    'COLUMNS' => $arResult['COLUMNS'],
    'ROWS' => $arResult['ROWS'],
    // ... –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
]);
```

**–ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `$arResult['GRID_ID']` - ID Grid
- `$arResult['COLUMNS']` - –ú–∞—Å—Å–∏–≤ –∫–æ–ª–æ–Ω–æ–∫
- `$arResult['ROWS']` - –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫
- `$arResult['TOTAL_COUNT']` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–µ—Ä–µ–¥–µ–π
- `$arResult['ERROR']` - –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### template_simple.php (–ü—Ä–æ—Å—Ç–æ–π —à–∞–±–ª–æ–Ω)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ—Å—Ç–∞—è HTML —Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑ Grid —Å–∏—Å—Ç–µ–º—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å—Ç–∞—è HTML —Ç–∞–±–ª–∏—Ü–∞
- –ë–∞–∑–æ–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–µ—Ç AJAX —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```php
<table class="ui-grid-table">
    <thead>
        <tr>
            <th>–ò–º—è –æ—á–µ—Ä–µ–¥–∏</th>
            <th>–¢–∏–ø</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <!-- ... -->
        </tr>
    </thead>
    <tbody>
        <?php foreach ($arResult['QUEUES'] as $queue): ?>
            <tr>
                <td><?= $queue['name'] ?></td>
                <!-- ... -->
            </tr>
        <?php endforeach; ?>
    </tbody>
</table>
```

**–ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `$arResult['QUEUES']` - –ú–∞—Å—Å–∏–≤ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π
- `$arResult['TOTAL_COUNT']` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `$arResult['ERROR']` - –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–∏:**
```php
[
    'name' => 'queue_name',
    'type' => '<span class="rmq-type">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è</span>',
    'state' => '<span class="rmq-state">–ê–∫—Ç–∏–≤–Ω–∞</span>',
    'features' => '<span class="rmq-features">D, AD</span>',
    'messages_total' => '<span class="rmq-messages">100</span>',
    'messages_ready' => '<span class="rmq-messages">50</span>',
    'messages_unacked' => '<span class="rmq-messages">10</span>',
    'consumers' => 2,
    'node' => 'rabbit@node1',
    'memory' => '1.5 MB',
    'vhost' => '/',
]
```

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ AJAX –¥–µ–π—Å—Ç–≤–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
   ```php
   public function configureActions()
   {
       return [
           'purgeQueue' => [...],
           'newAction' => [
               'prefilters' => [
                   new ActionFilter\Authentication(),
                   new ActionFilter\Csrf(),
               ]
           ],
       ];
   }
   
   public function newActionAction(string $param): array
   {
       try {
           $apiClient = new RmqApiClient();
           // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
           
           return [
               'success' => true,
               'message' => '–î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ'
           ];
       } catch (RmqApiException $e) {
           return [
               'success' => false,
               'error' => $e->getMessage()
           ];
       }
   }
   ```

2. **–í—ã–∑–≤–∞—Ç—å –∏–∑ JavaScript:**
   ```javascript
   BX.ajax.runComponentAction('imena.rmq:queue.list', 'newAction', {
       data: { param: 'value' }
   });
   ```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ –≤ Grid

1. **–í –∫–ª–∞—Å—Å–µ `RmqQueueGrid`:**
   ```php
   // –í –º–µ—Ç–æ–¥–µ prepareColumns()
   $columns[] = [
       'id' => 'NEW_COLUMN',
       'name' => '–ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞',
       'sort' => 'new_column',
       'default' => true,
   ];
   ```

2. **–í –º–µ—Ç–æ–¥–µ `prepareRows()`:**
   ```php
   $row['columns']['NEW_COLUMN'] = $queue->newProperty;
   ```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

1. **–°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:**
   ```bash
   mkdir -p templates/custom
   ```

2. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `template.php`:**
   ```php
   <?php
   if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED !== true) {
       die();
   }
   ?>
   
   <div class="custom-rmq-queue-list">
       <!-- –í–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π —à–∞–±–ª–æ–Ω -->
   </div>
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
   ```php
   $APPLICATION->IncludeComponent(
       'imena.rmq:queue.list',
       'custom',
       [...]
   );
   ```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:**
```php
try {
    // –ö–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
} catch (RmqApiException $e) {
    error_log('[RMQ Component] API Error: ' . $e->getMessage());
    $this->showError($e->getMessage());
} catch (\Exception $e) {
    error_log('[RMQ Component] Exception: ' . $e->getMessage());
    $this->showError('–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: ' . $e->getMessage());
}
```

**–í —à–∞–±–ª–æ–Ω–µ:**
```php
<?php if (!empty($arResult['ERROR'])): ?>
    <div class="ui-alert ui-alert-danger">
        <span class="ui-alert-message">
            <?= htmlspecialcharsbx($arResult['ERROR']) ?>
        </span>
    </div>
<?php endif; ?>
```

---

## –Ø–∑—ã–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (lang/ru/class.php)

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| `IMENA_RMQ_QUEUE_COLUMN_NAME` | –ò–º—è –æ—á–µ—Ä–µ–¥–∏ |
| `IMENA_RMQ_QUEUE_COLUMN_TYPE` | –¢–∏–ø |
| `IMENA_RMQ_QUEUE_COLUMN_STATE` | –°—Ç–∞—Ç—É—Å |
| `IMENA_RMQ_QUEUE_COLUMN_FEATURES` | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
| `IMENA_RMQ_QUEUE_COLUMN_MESSAGES` | –°–æ–æ–±—â–µ–Ω–∏–π |
| `IMENA_RMQ_QUEUE_COLUMN_CONSUMERS` | –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ |
| `IMENA_RMQ_QUEUE_COLUMN_NODE` | –£–∑–µ–ª |
| `IMENA_RMQ_QUEUE_COLUMN_MEMORY` | –ü–∞–º—è—Ç—å |
| `IMENA_RMQ_QUEUE_ERROR_MODULE_NOT_INSTALLED` | –ú–æ–¥—É–ª—å imena.rmq –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω |
| `IMENA_RMQ_QUEUE_ERROR_API_CONNECTION` | –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ API |
| `IMENA_RMQ_ROW_ACTION_PURGE_SUCCESS` | –û—á–µ—Ä–µ–¥—å "#QUEUE#" —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω–∞ |

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–ú–æ–¥—É–ª—å:** `imena.rmq` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **Bitrix24:** 20.0.0+
- **PHP:** 8.0+
- **RabbitMQ:** Management API –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.rmq:queue.list',
    '',
    [
        'VHOST' => '/',
        'SHOW_EMPTY_QUEUES' => 'Y',
    ]
);
?>
```

### –ü—Ä–∏–º–µ—Ä 2: –° –∫–∞—Å—Ç–æ–º–Ω—ã–º Grid ID

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.rmq:queue.list',
    '',
    [
        'VHOST' => '/production',
        'SHOW_EMPTY_QUEUES' => 'N',
        'GRID_ID' => 'RMQ_PRODUCTION_QUEUES',
        'PATH_TO_DETAIL' => '/rmq/queue/detail/?QUEUE=#QUEUE#',
    ]
);
?>
```

### –ü—Ä–∏–º–µ—Ä 3: –° –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.rmq:queue.list',
    '',
    [
        'VHOST' => '/',
        'CACHE_TIME' => 300, // 5 –º–∏–Ω—É—Ç
        'CACHE_TYPE' => 'A',
        'CACHE_GROUPS' => 'Y',
    ]
);
?>
```

---

## –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:**
```php
error_log('[RMQ Component] Debug: ' . print_r($data, true));
```

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
```javascript
console.log('RMQ Component Debug:', data);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤

**–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```javascript
// –ü–µ—Ä–µ—Ö–≤–∞—Ç AJAX –∑–∞–ø—Ä–æ—Å–æ–≤
BX.ajax.runComponentAction = (function(original) {
    return function(component, action, params) {
        console.log('AJAX Request:', component, action, params);
        return original.apply(this, arguments);
    };
})(BX.ajax.runComponentAction);
```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ—á–µ—Ä–µ–¥–µ–π (>1000) –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ vhost

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ
   - –î–ª—è real-time –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è `CACHE_TYPE = 'N'`

3. **AJAX –¥–µ–π—Å—Ç–≤–∏—è:**
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - CSRF –∑–∞—â–∏—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞

---

## –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### –í–µ—Ä—Å–∏—è 1.0+ (25.01.2025)

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `queue.list` —Å Grid —Å–∏—Å—Ç–µ–º–æ–π
- ‚úÖ AJAX –¥–µ–π—Å—Ç–≤–∏–µ `purgeQueue`
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ Grid
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ vhost
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—É—Å—Ç—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è:** `/local/modules/imena.rmq/README.md`

**–õ–æ–≥–∏:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `error_log('[RMQ Component] ...')`
- API: —á–µ—Ä–µ–∑ `RmqApiClient`

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 25.01.2025*



---

# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è imena.storm

# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è imena.storm

**–ù–∞–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ Storm –≤ Bitrix24**

–ê–≤—Ç–æ—Ä: #vlikhobabin@gmail.com  
–í–µ—Ä—Å–∏—è: 1.0.0

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
2. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
   - [diagram.list](#1-diagramlist---—Å–ø–∏—Å–æ–∫-–¥–∏–∞–≥—Ä–∞–º–º)
   - [diagram.modeler](#2-diagrammodeler---—Ä–µ–¥–∞–∫—Ç–æ—Ä-bpmn-–¥–∏–∞–≥—Ä–∞–º–º)
   - [property.list](#3-propertylist---—Å–ø–∏—Å–æ–∫-—Å–≤–æ–π—Å—Ç–≤-–¥–∏–∞–≥—Ä–∞–º–º—ã)
   - [property.detail](#4-propertydetail---–¥–µ—Ç–∞–ª—å–Ω–∞—è-–∫–∞—Ä—Ç–æ—á–∫–∞-—Å–≤–æ–π—Å—Ç–≤–∞)
   - [responsible.list](#5-responsiblelist---—Å–ø–∏—Å–æ–∫-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π-–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
4. [–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)

---

## üìñ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è `imena.storm` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ Bitrix24. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –±–∞–∑–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ D7 API –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç D7 API –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ï–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `StormAccessController`
- **AJAX –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç AJAX –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Controllerable`
- **Grid –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ Grid API –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤
- **SidePanel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ Bitrix24

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `diagram.list` - –°–ø–∏—Å–æ–∫ –¥–∏–∞–≥—Ä–∞–º–º

**–ü—É—Ç—å**: `/local/components/imena.storm/diagram.list/`  
**–ö–ª–∞—Å—Å**: `StormDiagramListComponent`  
**–†–∞–∑–º–µ—Ä**: ~3170 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–º BPMN –¥–∏–∞–≥—Ä–∞–º–º Storm. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Grid, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –º–∞—Å—Å–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ Excel.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º**
   - Grid —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫**
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –ø–æ–ª–µ–π –¥–∏–∞–≥—Ä–∞–º–º
   - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É, –≤–ª–∞–¥–µ–ª—å—Ü—É, –≥—Ä—É–ø–ø–µ
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (presets)

3. **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**
   - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º
   - –ú–∞—Å—Å–æ–≤–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
   - –ú–∞—Å—Å–æ–≤–æ–µ —Å–Ω—è—Ç–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

4. **–î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda (–ø–æ–ª–Ω–∞—è –∏ –ø–∞–∫–µ—Ç–Ω–∞—è)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ Camunda —Ñ–æ—Ä–º–∞—Ç
   - –î–µ–ø–ª–æ–π –≤ Camunda Engine
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (`diagram.modeler`)

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏**
   - –°–≤—è–∑—å —Å –∑–∞–¥–∞—á–∞–º–∏ —á–µ—Ä–µ–∑ Templates
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞

#### AJAX –¥–µ–π—Å—Ç–≤–∏—è

```php
configureActions(): array
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
- `syncAction($diagramId)` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã —Å Camunda
- `startSyncAction()` - –ù–∞—á–∞–ª–æ –ø–∞–∫–µ—Ç–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `syncBatchAction(string $syncId, int $batchSize)` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ –¥–∏–∞–≥—Ä–∞–º–º
- `getSyncProgressAction(string $syncId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `syncAllAction()` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∏–∞–≥—Ä–∞–º–º (—á–µ—Ä–µ–∑ —Ñ–æ–Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ)
- `exportAction()` - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- `deleteMultipleAction($diagramIds)` - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- `assignOwnerAction($diagramId, $userId)` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `unassignOwnerAction($diagramId)` - –°–Ω—è—Ç–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `getUserListAction($search = '')` - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- `groupAssignOwnerAction($diagramIds, $userId)` - –ú–∞—Å—Å–æ–≤–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `groupUnassignOwnerAction($diagramIds)` - –ú–∞—Å—Å–æ–≤–æ–µ —Å–Ω—è—Ç–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `convertToCamundaAction(string $diagramId)` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ Camunda —Ñ–æ—Ä–º–∞—Ç
- `deployToCamundaAction(string $diagramId)` - –î–µ–ø–ª–æ–π –≤ Camunda Engine
- `updateFieldAction(string $diagramId, string $fieldName, $fieldValue)` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

- `LIST_URL` (string) - URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–ø–∏—Å–∫–∞
- `DETAIL_URL` (string) - URL —à–∞–±–ª–æ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `#ID#/`)
- `EXTERNAL_FILTER` (array) - –í–Ω–µ—à–Ω–∏–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.storm:diagram.list',
    '',
    [
        'LIST_URL' => '/storm/diagrams/',
        'DETAIL_URL' => '/storm/diagram/#ID#/',
        'EXTERNAL_FILTER' => [
            'STATUS' => 'ACTIVE'
        ]
    ]
);
?>
```

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Grid —Å–∏—Å—Ç–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `StormGrid` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: `StormSettings` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Grid
- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: `StormDataProvider` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ –∫–æ–ª–æ–Ω–æ–∫**: `StormColumnProvider` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ Grid
- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ –¥–µ–π—Å—Ç–≤–∏–π**: `StormActionProvider` –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞–¥ —Å—Ç—Ä–æ–∫–∞–º–∏
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç—É–ø–∞**: `StormAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

---

### 2. `diagram.modeler` - –†–µ–¥–∞–∫—Ç–æ—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º

**–ü—É—Ç—å**: `/local/components/imena.storm/diagram.modeler/`  
**–ö–ª–∞—Å—Å**: `StormDiagramModelerComponent`  
**–†–∞–∑–º–µ—Ä**: ~414 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è BPMN –¥–∏–∞–≥—Ä–∞–º–º —á–µ—Ä–µ–∑ –≤–µ–±-—Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞ –±–∞–∑–µ `@miragon/camunda-web-modeler`. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏–∑ `/local/modules/imena.storm/modeler/`.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π BPMN —Ä–µ–¥–∞–∫—Ç–æ—Ä
   - –ü–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
   - XML —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö BPMN 2.0 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

2. **–î–≤—É—Ö—Ä–µ–∂–∏–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞**
   - **–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (`edit`) - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
   - **–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞** (`view`) - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

3. **–†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏**
   - –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è `BODY_XML` (–æ—Å–Ω–æ–≤–Ω–æ–π XML)
   - –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è `CAMUNDA_READY_XML` (–≥–æ—Ç–æ–≤—ã–π –¥–ª—è Camunda XML)

4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

5. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä (`ACTION_DIAGRAM_READ`)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (`ACTION_DIAGRAM_UPDATE`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–∞–≤

#### AJAX –¥–µ–π—Å—Ç–≤–∏—è

```php
configureActions(): array
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
- `loadXmlAction(string $diagramId, string $source = 'body')` - –ó–∞–≥—Ä—É–∑–∫–∞ XML –¥–∏–∞–≥—Ä–∞–º–º—ã
- `saveXmlAction(string $diagramId, string $xml, string $source = 'body', ?string $comment = null)` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ XML –¥–∏–∞–≥—Ä–∞–º–º—ã

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

- `DIAGRAM_ID` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `MODE` (string) - –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: `'edit'` –∏–ª–∏ `'view'` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `'edit'`)
- `SOURCE` (string) - –ò—Å—Ç–æ—á–Ω–∏–∫ XML: `'body'` –∏–ª–∏ `'camunda'` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `'body'`)
- `SHOW_TOOLBAR` (bool) - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å toolbar (–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ)
- `SHOW_PROPERTIES_PANEL` (bool) - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `true`)

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.storm:diagram.modeler',
    '',
    [
        'DIAGRAM_ID' => $_GET['ID'],
        'MODE' => 'edit',
        'SOURCE' => 'body',
        'SHOW_PROPERTIES_PANEL' => true
    ]
);
?>
```

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Backend –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: `DiagramModelerController` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç AJAX –∑–∞–ø—Ä–æ—Å—ã
- **Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ `/local/modules/imena.storm/modeler/`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—â–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ `Authentication` –∏ `Csrf`

#### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é: `/local/modules/imena.storm/modeler/README.md`

---

### 3. `property.list` - –°–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤ –¥–∏–∞–≥—Ä–∞–º–º—ã

**–ü—É—Ç—å**: `/local/components/imena.storm/property.list/`  
**–ö–ª–∞—Å—Å**: `ImenaStormPropertyListComponent`  
**–†–∞–∑–º–µ—Ä**: ~198 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–≤–æ–π—Å—Ç–≤ (property) –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã Storm. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Grid –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–≤–æ–π—Å—Ç–≤**
   - Grid —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Å–≤–æ–π—Å—Ç–≤–∞
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, –∑–Ω–∞—á–µ–Ω–∏–µ)

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Å–≤–æ–π—Å—Ç–≤ –¥–∏–∞–≥—Ä–∞–º–º—ã
   - –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ —Å–≤–æ–π—Å—Ç–≤–∞
   - –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ (—á–µ—Ä–µ–∑ AJAX)

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `property.detail` –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏

#### AJAX –¥–µ–π—Å—Ç–≤–∏—è

```php
configureActions(): array
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
- `deleteAction(int $propertyId, string $diagramId)` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

- `DIAGRAM_ID` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID –¥–∏–∞–≥—Ä–∞–º–º—ã
- `DETAIL_URL` (string) - URL —à–∞–±–ª–æ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/local/pages/imena/storm/property/detail/?DIAGRAM_ID=#DIAGRAM_ID#&PROPERTY_ID=#PROPERTY_ID#`)
- `PAGE_SIZE` (int) - –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –∏–∑ `PropertySettings::DEFAULT_PAGE_SIZE`)

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.storm:property.list',
    '',
    [
        'DIAGRAM_ID' => $_GET['DIAGRAM_ID'],
        'DETAIL_URL' => '/storm/property/detail/?DIAGRAM_ID=#DIAGRAM_ID#&PROPERTY_ID=#PROPERTY_ID#',
        'PAGE_SIZE' => 25
    ]
);
?>
```

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Grid —Å–∏—Å—Ç–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `PropertyGrid` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: `PropertySettings` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Grid
- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: `PropertyGridProvider` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ –∫–æ–ª–æ–Ω–æ–∫**: `PropertyColumnProvider` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
- **–ö–æ–º–∞–Ω–¥—ã**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Command –ø–∞—Ç—Ç–µ—Ä–Ω (`DeletePropertyCommand`, `DeletePropertyHandler`)
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç—É–ø–∞**: `PropertyAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

---

### 4. `property.detail` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–≤–æ–π—Å—Ç–≤–∞

**–ü—É—Ç—å**: `/local/components/imena.storm/property.detail/`  
**–ö–ª–∞—Å—Å**: `ImenaStormPropertyDetailComponent`  
**–†–∞–∑–º–µ—Ä**: ~878 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ (property) –¥–∏–∞–≥—Ä–∞–º–º—ã Storm. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Entity Editor API Bitrix24.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤**
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤ (ID=0)
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–≤–æ–π—Å—Ç–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Editor**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ Entity Editor API
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π
   - –¢–∞–±—ã –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

3. **AJAX —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SidePanel**
   - –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ Bitrix24
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

#### AJAX –¥–µ–π—Å—Ç–≤–∏—è

```php
configureActions(): array
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
- `saveAction()` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- `deleteAction()` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞
- `getAction()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤–∞

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `PropertyController`.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

- `ID` (int) - ID —Å–≤–æ–π—Å—Ç–≤–∞ (0 –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ)
- `DIAGRAM_ID` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID –¥–∏–∞–≥—Ä–∞–º–º—ã

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.storm:property.detail',
    '',
    [
        'ID' => $_GET['PROPERTY_ID'] ?? 0,
        'DIAGRAM_ID' => $_GET['DIAGRAM_ID']
    ]
);
?>
```

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Provider**: `PropertyProvider` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Entity Editor
- **–ö–æ–º–∞–Ω–¥—ã**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Command –ø–∞—Ç—Ç–µ—Ä–Ω (`SavePropertyCommand`, `SavePropertyHandler`, `DeletePropertyCommand`, `DeletePropertyHandler`)
- **–°–µ—Ä–≤–∏—Å—ã**: `PropertyServiceFactory` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç—É–ø–∞**: `PropertyAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –†–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Errorable` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∞–º–∏

#### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/local/components/imena.storm/property.detail/README.md`

---

### 5. `responsible.list` - –°–ø–∏—Å–æ–∫ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö

**–ü—É—Ç—å**: `/local/components/imena.storm/responsible.list/`  
**–ö–ª–∞—Å—Å**: `ResponsibleListComponent`  
**–†–∞–∑–º–µ—Ä**: ~1206 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–∏–∞–≥—Ä–∞–º–º Storm. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Grid, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –º–∞—Å—Å–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å SidePanel.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π**
   - Grid —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –ø–æ–ª–µ–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∏–∞–≥—Ä–∞–º–º–µ, —ç–ª–µ–º–µ–Ω—Ç—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π (—á–µ—Ä–µ–∑ SidePanel)
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π (—á–µ—Ä–µ–∑ SidePanel)
   - –£–¥–∞–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π

4. **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**
   - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SidePanel**
   - –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

#### AJAX –¥–µ–π—Å—Ç–≤–∏—è

```php
configureActions(): array
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ `configureActions()` –∏ –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å:
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–û–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.parameters.php`. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å:
- `DIAGRAM_ID` - –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π ID –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- `PAGE_SIZE` - –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- URL-—ã –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php
$APPLICATION->IncludeComponent(
    'imena.storm:responsible.list',
    '',
    [
        'DIAGRAM_ID' => $_GET['DIAGRAM_ID'] ?? '',
        'PAGE_SIZE' => 25
    ]
);
?>
```

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Grid —Å–∏—Å—Ç–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ResponsibleGrid` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: `ResponsibleSettings` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Grid
- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: `ResponsibleDataProvider` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ –∫–æ–ª–æ–Ω–æ–∫**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ Grid
- **–°–µ—Ä–≤–∏—Å—ã**: `ResponsibleServiceFactory` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç—É–ø–∞**: `ResponsibleAccessController` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –†–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Errorable` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∞–º–∏

#### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/local/components/imena.storm/responsible.list/README.md`

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è `imena.storm` —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω—ã–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:

1. **–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç `CBitrixComponent`
2. **AJAX –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –†–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Controllerable` –¥–ª—è AJAX –¥–µ–π—Å—Ç–≤–∏–π
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç `Errorable` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
4. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
5. **Grid —Å–∏—Å—Ç–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–π Grid —Å–∏—Å—Ç–µ–º—ã –º–æ–¥—É–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤
6. **Command –ø–∞—Ç—Ç–µ—Ä–Ω**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Command/Handler –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```
component_name/
‚îú‚îÄ‚îÄ class.php              # –ö–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ .parameters.php        # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ .description.php       # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ lang/                  # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ ru/
‚îÇ       ‚îú‚îÄ‚îÄ class.php
‚îÇ       ‚îú‚îÄ‚îÄ .parameters.php
‚îÇ       ‚îî‚îÄ‚îÄ .description.php
‚îú‚îÄ‚îÄ templates/             # –®–∞–±–ª–æ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ .default/
‚îÇ       ‚îú‚îÄ‚îÄ template.php
‚îÇ       ‚îú‚îÄ‚îÄ script.js
‚îÇ       ‚îú‚îÄ‚îÄ style.css
‚îÇ       ‚îî‚îÄ‚îÄ lang/
‚îÇ           ‚îî‚îÄ‚îÄ ru/
‚îÇ               ‚îî‚îÄ‚îÄ template.php
‚îî‚îÄ‚îÄ ajax.php               # AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: `__construct()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
2. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: `onPrepareComponentParams()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î —á–µ—Ä–µ–∑ ORM –∏–ª–∏ —Å–µ—Ä–≤–∏—Å—ã
5. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥**: `executeComponent()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
6. **AJAX –¥–µ–π—Å—Ç–≤–∏—è**: –û–±—Ä–∞–±–æ—Ç–∫–∞ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `configureActions()`

### Grid —Å–∏—Å—Ç–µ–º–∞

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—É—é Grid —Å–∏—Å—Ç–µ–º—É –º–æ–¥—É–ª—è:

- **Grid –∫–ª–∞—Å—Å**: –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Grid (–Ω–∞–ø—Ä–∏–º–µ—Ä, `StormGrid`, `PropertyGrid`)
- **Settings**: –ö–ª–∞—Å—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ Grid (–Ω–∞–ø—Ä–∏–º–µ—Ä, `StormSettings`, `PropertySettings`)
- **Data Provider**: –ü–æ—Å—Ç–∞–≤—â–∏–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Grid
- **Column Provider**: –ü–æ—Å—Ç–∞–≤—â–∏–∫ –∫–æ–ª–æ–Ω–æ–∫ –¥–ª—è Grid
- **Action Provider**: –ü–æ—Å—Ç–∞–≤—â–∏–∫ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞–¥ —Å—Ç—Ä–æ–∫–∞–º–∏ Grid

### –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –º–æ–¥—É–ª—è:

- **Access Controller**: –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç—É–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `StormAccessController`, `PropertyAccessController`)
- **Action Dictionary**: –°–ª–æ–≤–∞—Ä—å –¥–µ–π—Å—Ç–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `StormActionDictionary`, `PropertyActionDictionary`)
- **Target Model**: –ú–æ–¥–µ–ª—å —Ü–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `TargetStormModel`, `TargetPropertyModel`)

### Command –ø–∞—Ç—Ç–µ—Ä–Ω

–î–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Command/Handler –ø–∞—Ç—Ç–µ—Ä–Ω:

- **Command**: –ö–ª–∞—Å—Å –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `DeletePropertyCommand`)
- **Handler**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `DeletePropertyHandler`)
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: –ö–æ–º–∞–Ω–¥—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –º–æ–¥—É–ª—è

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

- `main` - –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã Bitrix24
- `ui` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Bitrix24
- `imena.storm` - –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å Storm BPMN

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

- `imena.camunda` - –ú–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Camunda (–¥–ª—è `diagram.list`)
- `catalog` - –ú–æ–¥—É–ª—å –∫–∞—Ç–∞–ª–æ–≥–∞ (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Entity Editor –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö)

### JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- `BX` - –ë–∞–∑–æ–≤—ã–π API Bitrix24 (–≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω)
- `BX.UI` - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Bitrix24
- `BX.Main` - –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Grid, Filter, SidePanel)
- React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è `diagram.modeler` (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ú–æ–¥—É–ª—å Storm**: `/local/modules/imena.storm/`
- **React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Modeler**: `/local/modules/imena.storm/modeler/README.md`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç diagram.modeler**: `/local/components/imena.storm/diagram.modeler/README.md`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç property.detail**: `/local/components/imena.storm/property.detail/README.md`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç responsible.list**: `/local/components/imena.storm/responsible.list/README.md`

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –í—Å–µ AJAX –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä `Authentication`
2. **CSRF –∑–∞—â–∏—Ç–∞**: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞—â–∏—â–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–º `Csrf`
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
5. **–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è**: –í—Å–µ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è XSS

### –§–∏–ª—å—Ç—Ä—ã –¥–µ–π—Å—Ç–≤–∏–π

–í—Å–µ AJAX –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—â–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:

```php
public function configureActions(): array
{
    return [
        'actionName' => [
            'prefilters' => [
                new ActionFilter\Authentication(),  // –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
                new ActionFilter\Csrf(),            // CSRF –∑–∞—â–∏—Ç–∞
            ],
        ],
    ];
}
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä**: #vlikhobabin@gmail.com  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-15

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è `imena.storm`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç D7 API - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–æ–¥—É–ª—è
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞–∫ –æ–±—Ä–∞–∑–µ—Ü



---

# –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è Imena Camunda

# IMENA Camunda - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–¥—É–ª—è

**–í–µ—Ä—Å–∏—è:** 2.0+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è  
**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 25.01.2025

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–∞—Ç–∞–ª–æ–≥–∞)
3. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ-—Ñ–∞–π–ª—ã)
4. [–°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-–º–æ–¥—É–ª—è)
   - [processinstance - –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤](#processinstance---—ç–∫–∑–µ–º–ø–ª—è—Ä—ã-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
   - [processdefinition - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤](#processdefinition---–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
   - [externaltask - –í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏](#externaltask---–≤–Ω–µ—à–Ω–∏–µ-–∑–∞–¥–∞—á–∏)
   - [processvariable - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤](#processvariable---–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
   - [settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è](#settings---–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–º–æ–¥—É–ª—è)
5. [–ù–∞–≤–∏–≥–∞—Ü–∏—è](#–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
6. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ SidePanel](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-sidepanel)
7. [JavaScript —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è](#javascript-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
8. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)

---

## –û–±–∑–æ—Ä

–ö–∞—Ç–∞–ª–æ–≥ `/local/pages/imena/camunda/` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Camunda 7 BPM Engine. –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Bitrix24 —Å SidePanel –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–°–ø–∏—Å–∫–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π** —Å Grid —Å–∏—Å—Ç–µ–º–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** –≤ SidePanel –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–ï–¥–∏–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ –ª–µ–≤–æ–µ –º–µ–Ω—é
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Å Camunda
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏** (suspend, resume, terminate)
- ‚úÖ **–ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è** —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
/local/pages/imena/camunda/
‚îú‚îÄ‚îÄ .section.php                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–∞ (SEO, –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ .left.menu.php                  # –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é
‚îú‚îÄ‚îÄ index.php                       # –ö–æ—Ä–Ω–µ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ä–µ–¥–∏—Ä–µ–∫—Ç)
‚îú‚îÄ‚îÄ README.md                       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îÇ
‚îú‚îÄ‚îÄ processinstance/                # –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ index.php                   # –°–ø–∏—Å–æ–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ detail/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php               # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sidepanel.js            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SidePanel
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sync-processinstance.js # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ lang/                       # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ processdefinition/              # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ index.php                   # –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ detail/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php               # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ startform/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php               # –§–æ—Ä–º–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sidepanel.js            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SidePanel
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sync-definition.js      # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ lang/                       # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ externaltask/                   # –í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ index.php                   # –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ detail/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php               # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sidepanel.js            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SidePanel
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sync-externaltask.js    # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
‚îÇ   ‚îî‚îÄ‚îÄ lang/                       # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ processvariable/                # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ index.php                   # –°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ lang/                       # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îî‚îÄ‚îÄ settings/                       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è
    ‚îî‚îÄ‚îÄ index.php                   # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### .section.php

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–∞ –¥–ª—è SEO –∏ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `$sSectionName` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- `$arDirProperties` - SEO —Å–≤–æ–π—Å—Ç–≤–∞ (title, description, keywords)

**–ü—Ä–∏–º–µ—Ä:**
```php
$sSectionName = '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda 7';
$arDirProperties = [
    'title' => 'Camunda 7 - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ workflow',
    'description' => '–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda 7 BPM Engine...',
    'keywords' => 'camunda, bpm, –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã, workflow...',
];
```

### .left.menu.php

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —à–∞–ø–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```php
$aMenuLinks = [
    [
        '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤',
        '/local/pages/imena/camunda/processdefinition/',
        [],
        ['menu_item_id' => 'camunda_processdefinition'],
        '',
    ],
    // ... –¥—Ä—É–≥–∏–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é
];
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `bitrix:menu`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `air-header-menu`
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é

### index.php (–∫–æ—Ä–Ω–µ–≤–æ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ—Ä–Ω–µ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑–¥–µ–ª

**–õ–æ–≥–∏–∫–∞:**
```php
// –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–¥–µ–ª Process Definitions (–æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑–¥–µ–ª)
LocalRedirect('/local/pages/imena/camunda/processdefinition/');
```

---

## –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è

### processinstance - –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**URL:** `/local/pages/imena/camunda/processinstance/`  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.processinstance.list`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ Grid
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞, —Å—Ç–∞—Ç—É—Å—É, –¥–∞—Ç–µ
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é
- ‚úÖ –ú–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (suspend, resume, terminate)
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ SidePanel
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `PROCESS_DEFINITION_ID` | string | ID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ (legacy) |
| `PROCESS_DEFINITION_KEY` | string | –ö–ª—é—á –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ |
| `STATUS` | string | –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (ACTIVE, SUSPENDED) |
| `IFRAME` | Y/N | –§–ª–∞–≥ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ SidePanel |
| `IFRAME_TYPE` | string | –¢–∏–ø SidePanel (SIDE_SLIDER) |

#### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**URL:** `/local/pages/imena/camunda/processinstance/detail/?ID={process_id}`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.processinstance.details`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø—Ä–æ—Ü–µ—Å—Å–∞
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Entity Editor
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (ID=0)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∑–∞–¥–∞—á

#### JavaScript —Ñ–∞–π–ª—ã

- **sidepanel.js** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è SidePanel
- **sync-processinstance.js** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å Camunda

---

### processdefinition - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**URL:** `/local/pages/imena/camunda/processdefinition/`  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.processdefinition.list`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (BPMN –¥–∏–∞–≥—Ä–∞–º–º—ã)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ Grid
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É, –≤–µ—Ä—Å–∏–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ (suspend, activate, delete)
- ‚úÖ –ó–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Camunda

#### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**URL:** `/local/pages/imena/camunda/processdefinition/detail/?ID={definition_id}`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.processdefinition.details`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º—ã
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞

#### –°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞

**URL:** `/local/pages/imena/camunda/processdefinition/startform/?KEY={process_key}`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.processdefinition.startform`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–æ—Ä–º–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ SidePanel
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–π—Å—Ç–≤ –¥–∏–∞–≥—Ä–∞–º–º—ã Storm
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

#### JavaScript —Ñ–∞–π–ª—ã

- **sidepanel.js** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è SidePanel
- **sync-definition.js** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Å Camunda

---

### externaltask - –í–Ω–µ—à–Ω–∏–µ –∑–∞–¥–∞—á–∏

**URL:** `/local/pages/imena/camunda/externaltask/`  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.externaltask.list`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ Camunda (External Task Worker API)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–¥–∞—á –≤ Grid
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É, —Ç–æ–ø–∏–∫—É, —Å—Ç–∞—Ç—É—Å—É
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `PROCESS_INSTANCE_ID` | string | ID –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ |
| `IFRAME` | Y/N | –§–ª–∞–≥ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ SidePanel |
| `IFRAME_TYPE` | string | –¢–∏–ø SidePanel |

#### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**URL:** `/local/pages/imena/camunda/externaltask/detail/?ID={task_id}`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.externaltask.details`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª–µ–π –∑–∞–¥–∞—á–∏ (read-only)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ
- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –°—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

#### JavaScript —Ñ–∞–π–ª—ã

- **sidepanel.js** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è SidePanel
- **sync-externaltask.js** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á —Å Camunda

---

### processvariable - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**URL:** `/local/pages/imena/camunda/processvariable/`  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `imena.camunda:camunda.processvariable.list`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É, —Å—Ç–∞—Ç—É—Å—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Camunda

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `PROCESS_INSTANCE_ID` | string | ID –ø—Ä–æ—Ü–µ—Å—Å–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) |
| `PROCESS_DEFINITION_KEY` | string | –ö–ª—é—á –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| `IFRAME` | Y/N | –§–ª–∞–≥ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ SidePanel |
| `IFRAME_TYPE` | string | –¢–∏–ø SidePanel |

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
/local/pages/imena/camunda/processvariable/?PROCESS_INSTANCE_ID=process-123
```

---

### settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è

**URL:** `/local/pages/imena/camunda/settings/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö Camunda (URL, username, password)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∞–≥–µ–Ω—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
- ‚úÖ –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### –°–µ–∫—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda 7**
   - URL —Å–µ—Ä–≤–µ—Ä–∞ Camunda REST API
   - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–∞—Ä–æ–ª—å
   - –ö–Ω–æ–ø–∫–∏: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å, –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –£–¥–∞–ª–∏—Ç—å

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
   - –ß–µ–∫–±–æ–∫—Å –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è
   - –ü–µ—Ä–∏–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Å–µ–∫.)
   - –°—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–∞
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ö–Ω–æ–ø–∫–∏: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å, –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å, –°–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫–∏

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

**POST –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `action=save_credentials` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `action=test_connection` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `action=clear_credentials` - –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `action=save_sync_settings` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `action=reset_errors` - –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### JavaScript —Ñ—É–Ω–∫—Ü–∏–∏

- `testConnection()` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `clearCredentials()` - –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `resetErrors()` - –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫
- `runSyncNow()` - –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ AJAX

---

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º Bitrix24:

1. **–§–∞–π–ª –º–µ–Ω—é** `.left.menu.php` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ `$aMenuLinks`
2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç** `bitrix:menu` —Å —à–∞–±–ª–æ–Ω–æ–º `top_horizontal` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª
3. **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `TopMenu::convertFromFileMenu()`
4. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥** –∫–Ω–æ–ø–æ–∫ —á–µ—Ä–µ–∑ `bitrix:main.interface.buttons`
5. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `air-header-menu`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é

```php
$aMenuLinks = [
    [
        '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤',                    // –ù–∞–∑–≤–∞–Ω–∏–µ
        '/local/pages/imena/camunda/processdefinition/', // URL
        [],                                         // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        ['menu_item_id' => 'camunda_processdefinition'], // –ê—Ç—Ä–∏–±—É—Ç—ã
        '',                                         // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ],
    // ... –¥—Ä—É–≥–∏–µ –ø—É–Ω–∫—Ç—ã
];
```

### –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `menu_item_id`
- ‚úÖ –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–¥–∏–Ω —Ñ–∞–π–ª `.left.menu.php` –≤ –∫–æ—Ä–Ω–µ —Ä–∞–∑–¥–µ–ª–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –≤ URL
- ‚ùå –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –º–µ–Ω—é –≤ –ø–æ–¥–ø–∞–ø–∫–∞—Ö
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π JavaScript –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ SidePanel

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É **SidePanel** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ UX –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

**–°—Ö–µ–º–∞:**
```
–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (index.php)
    ‚Üì
bitrix:ui.sidepanel.wrapper
    ‚Üì
–ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (imena.camunda:...)
    ‚Üì
–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (detail/index.php)
    ‚Üì
bitrix:ui.sidepanel.wrapper
    ‚Üì
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ—Ç–∞–ª–µ–π (imena.camunda:...details)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SidePanel

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```php
$APPLICATION->IncludeComponent(
    'bitrix:ui.sidepanel.wrapper',
    '',
    [
        'POPUP_COMPONENT_NAME' => 'imena.camunda:camunda.processinstance.list',
        'POPUP_COMPONENT_TEMPLATE_NAME' => '',
        'POPUP_COMPONENT_PARAMS' => [
            'PATH_TO_DETAIL' => '/local/pages/imena/camunda/processinstance/detail/?ID=#ID#',
            'LIST_URL' => '/local/pages/imena/camunda/processinstance/',
        ],
        'USE_UI_TOOLBAR' => 'Y',
        'POPUP_COMPONENT_USE_BITRIX24_THEME' => 'Y',
    ]
);
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–®–∏—Ä–∏–Ω–∞ –ø–∞–Ω–µ–ª–∏:** 900px (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ sidepanel.js)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ:** –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
- **–ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

---

## JavaScript —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

### sidepanel.js

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è SidePanel

**–§—É–Ω–∫—Ü–∏–∏:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∏—Ä–∏–Ω—ã –ø–∞–Ω–µ–ª–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–µ–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ Grid
- –ü–µ—Ä–µ—Ö–≤–∞—Ç –∫–ª–∏–∫–æ–≤ –Ω–∞ —Å—Å—ã–ª–∫–∏

**–ü—Ä–∏–º–µ—Ä:**
```javascript
BX.ready(function() {
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∏—Ä–∏–Ω—ã SidePanel
    BX.SidePanel.Instance.setWidth(900);
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
    BX.addCustomEvent('SidePanel.Slider:onClose', function(event) {
        // –û–±–Ω–æ–≤–∏—Ç—å Grid
        if (window.BX && window.BX.Main && window.BX.Main.gridManager) {
            const grid = window.BX.Main.gridManager.getInstanceById('GRID_ID');
            if (grid) {
                grid.reload();
            }
        }
    });
});
```

### sync-*.js

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å Camunda

**–§–∞–π–ª—ã:**
- `sync-processinstance.js` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `sync-definition.js` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- `sync-externaltask.js` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á

**–§—É–Ω–∫—Ü–∏–∏:**
- AJAX –≤—ã–∑–æ–≤—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. **–°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:**
   ```bash
   mkdir -p /local/pages/imena/camunda/newpage/
   ```

2. **–°–æ–∑–¥–∞—Ç—å index.php:**
   ```php
   <?php
   require($_SERVER['DOCUMENT_ROOT'].'/bitrix/header.php');
   
   IncludeModuleLangFile(__FILE__);
   $APPLICATION->SetTitle('–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞');
   
   $APPLICATION->IncludeComponent(
       'bitrix:ui.sidepanel.wrapper',
       '',
       [
           'POPUP_COMPONENT_NAME' => 'imena.camunda:your.component',
           'POPUP_COMPONENT_PARAMS' => [
               // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
           ],
           'USE_UI_TOOLBAR' => 'Y',
       ]
   );
   
   require($_SERVER['DOCUMENT_ROOT'].'/bitrix/footer.php');
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é:**
   ```php
   // –í .left.menu.php
   [
       '–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
       '/local/pages/imena/camunda/newpage/',
       [],
       ['menu_item_id' => 'camunda_newpage'],
       '',
   ],
   ```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. **–°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é detail:**
   ```bash
   mkdir -p /local/pages/imena/camunda/newpage/detail/
   ```

2. **–°–æ–∑–¥–∞—Ç—å detail/index.php:**
   ```php
   <?php
   require($_SERVER['DOCUMENT_ROOT'].'/bitrix/header.php');
   
   $id = (string)($_REQUEST['ID'] ?? '');
   $APPLICATION->SetTitle('–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞');
   
   $APPLICATION->IncludeComponent(
       'bitrix:ui.sidepanel.wrapper',
       '',
       [
           'POPUP_COMPONENT_NAME' => 'imena.camunda:your.detail.component',
           'POPUP_COMPONENT_PARAMS' => [
               'ID' => $id,
           ],
       ]
   );
   
   require($_SERVER['DOCUMENT_ROOT'].'/bitrix/footer.php');
   ```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å PATH_TO_DETAIL –≤ —Å–ø–∏—Å–∫–µ:**
   ```php
   'PATH_TO_DETAIL' => '/local/pages/imena/camunda/newpage/detail/?ID=#ID#',
   ```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ JavaScript

1. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:**
   ```bash
   mkdir -p /local/pages/imena/camunda/newpage/js/
   touch /local/pages/imena/camunda/newpage/js/custom.js
   ```

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤ index.php:**
   ```php
   $APPLICATION->AddHeadScript('/local/pages/imena/camunda/newpage/js/custom.js');
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Bitrix API:**
   ```javascript
   BX.ready(function() {
       // –í–∞—à –∫–æ–¥
   });
   ```

### –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. **–°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:**
   ```bash
   mkdir -p /local/pages/imena/camunda/newpage/lang/ru/
   ```

2. **–°–æ–∑–¥–∞—Ç—å lang/ru/index.php:**
   ```php
   <?php
   $MESS['NEW_PAGE_TITLE'] = '–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞';
   $MESS['NEW_PAGE_DESCRIPTION'] = '–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã';
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ:**
   ```php
   IncludeModuleLangFile(__FILE__);
   $APPLICATION->SetTitle(GetMessage('NEW_PAGE_TITLE'));
   ```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ Grid

**–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Å–ø–∏—Å–∫–∞:**
```php
'PATH_TO_DETAIL' => '/local/pages/imena/camunda/processinstance/detail/?ID=#ID#',
```

**–í JavaScript:**
```javascript
BX.SidePanel.Instance.open('/local/pages/imena/camunda/processinstance/detail/?ID=' + processId, {
    width: 900,
    cacheable: false
});
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º

**–í URL:**
```
/local/pages/imena/camunda/processinstance/?PROCESS_DEFINITION_KEY=Process_abc123&STATUS=ACTIVE
```

**–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:**
```php
$processDefinitionKey = (string)($_REQUEST['PROCESS_DEFINITION_KEY'] ?? '');
$status = (string)($_REQUEST['STATUS'] ?? '');

'POPUP_COMPONENT_PARAMS' => [
    'PROCESS_DEFINITION_KEY' => $processDefinitionKey,
    'STATUS' => $status,
],
```

### AJAX —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–í JavaScript:**
```javascript
BX.ajax.runComponentAction('imena.camunda:camunda.list', 'syncProcess', {
    data: {
        processId: 'process-123'
    }
}).then(function(response) {
    if (response.data.success) {
        BX.UI.Notification.Center.notify({
            content: '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞',
            autoHideDelay: 3000
        });
        // –û–±–Ω–æ–≤–∏—Ç—å Grid
        location.reload();
    }
});
```

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Bitrix24:** 20.0.0+
- **–ú–æ–¥—É–ª—å:** `imena.camunda` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **PHP:** 8.0+
- **JavaScript:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ BX API

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø–∏—Å–µ–π (>10000) –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - SidePanel –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ú–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

3. **–ë—Ä–∞—É–∑–µ—Ä—ã:**
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ES6+
   - –ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞

---

## –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### –í–µ—Ä—Å–∏—è 2.0+ (25.01.2025)

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `processvariable` –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∞–≥–µ–Ω—Ç–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

### –í–µ—Ä—Å–∏—è 1.0 (2024)

**–ù–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–ø–∏—Å–∫–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ SidePanel
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è:** `/local/modules/imena.camunda/README.md`

**–õ–æ–≥–∏:**
- –°—Ç—Ä–∞–Ω–∏—Ü—ã: —á–µ—Ä–µ–∑ `error_log()`
- JavaScript: —á–µ—Ä–µ–∑ `console.log()`

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 25.01.2025*


---

# –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è Imena RMQ

# IMENA RabbitMQ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–¥—É–ª—è

**–í–µ—Ä—Å–∏—è:** 1.0+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è  
**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 25.01.2025

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–∞—Ç–∞–ª–æ–≥–∞)
3. [–°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-–º–æ–¥—É–ª—è)
   - [queues/index.php - –°–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π](#queuesindexphp---—Å–ø–∏—Å–æ–∫-–æ—á–µ—Ä–µ–¥–µ–π)
   - [settings/index.php - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](#settingsindexphp---–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
4. [–ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#–º–µ–Ω—é-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
5. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å—Ç—Ä–∞–Ω–∏—Ü)
6. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏)
7. [JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#javascript-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
8. [–°—Ç–∏–ª–∏ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ](#—Å—Ç–∏–ª–∏-–∏-–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
10. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)

---

## –û–±–∑–æ—Ä

–ö–∞—Ç–∞–ª–æ–≥ `/local/pages/imena/rmq/` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –º–æ–¥—É–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è RabbitMQ. –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å RabbitMQ Management API —á–µ—Ä–µ–∑ Bitrix24.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–°–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ –≤ Grid —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API credentials –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ **–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é** - –ª–µ–≤–æ–µ –º–µ–Ω—é –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
- ‚úÖ **AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
local/pages/imena/rmq/
‚îú‚îÄ‚îÄ .left.menu.php          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–µ–≤–æ–≥–æ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ queues/
‚îÇ   ‚îî‚îÄ‚îÄ index.php           # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ
‚îú‚îÄ‚îÄ settings/
‚îÇ   ‚îî‚îÄ‚îÄ index.php           # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ
‚îî‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è

### queues/index.php - –°–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π

**–ü—É—Ç—å:** `/local/pages/imena/rmq/queues/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ

#### –û–ø–∏—Å–∞–Ω–∏–µ

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞ (vhost) –≤ –≤–∏–¥–µ —Ç–∞–±–ª–∏—Ü—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Bitrix Grid —Å–∏—Å—Ç–µ–º—ã. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `imena.rmq:queue.list` –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—è–º–∏.

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π**
   - –¢–∞–±–ª–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å Grid —Å–∏—Å—Ç–µ–º–æ–π Bitrix24
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ö, —Å–æ—Å—Ç–æ—è–Ω–∏–∏
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –æ—á–µ—Ä–µ–¥–µ–π (durable, auto-delete, exclusive)
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ –ø–∞–º—è—Ç–∏ –∏ —É–∑–ª–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è credentials
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞—Å—Ç—Ä–æ–µ–∫

3. **–ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ toolbar
   - AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```php
queues/index.php
    ‚îÇ
    ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è imena.rmq
    ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    ‚îú‚îÄ> –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–µ—Ç credentials)
    ‚îÇ
    ‚îî‚îÄ> bitrix:ui.sidepanel.wrapper
            ‚îÇ
            ‚îî‚îÄ> imena.rmq:queue.list (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
                    ‚îÇ
                    ‚îú‚îÄ> RmqQueueGrid (Grid —Å–∏—Å—Ç–µ–º–∞)
                    ‚îú‚îÄ> RmqApiClient (API –∑–∞–ø—Ä–æ—Å—ã)
                    ‚îî‚îÄ> QueueEntity (Value Objects)
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```php
$APPLICATION->IncludeComponent(
    'bitrix:ui.sidepanel.wrapper',
    '',
    [
        'POPUP_COMPONENT_NAME' => 'imena.rmq:queue.list',
        'POPUP_COMPONENT_TEMPLATE_NAME' => '',
        'POPUP_COMPONENT_PARAMS' => [
            'VHOST' => '/',                    // Virtual host
            'SHOW_EMPTY_QUEUES' => 'Y',        // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ –æ—á–µ—Ä–µ–¥–∏
            'CACHE_TIME' => 0,                 // –ë–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
            'CACHE_TYPE' => 'N',
        ],
        'USE_UI_TOOLBAR' => 'Y',
        'POPUP_COMPONENT_USE_BITRIX24_THEME' => 'Y',
    ]
);
```

#### JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

**1. –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```javascript
BX.ready(function() {
    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ toolbar
    var refreshButton = BX.create('button', {
        props: { className: 'ui-btn ui-btn-success ...' },
        events: {
            click: function(e) {
                // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏
                // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid —á–µ—Ä–µ–∑ BX.Imena.RmqGrid.refreshGrid()
            }
        }
    });
});
```

**2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π:**
```javascript
// –°–æ–±—ã—Ç–∏–µ –≤—ã–±–æ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏
BX.addCustomEvent('onRabbitMQQueueSelected', function(queueName, queueData) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏
});

// –°–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
BX.addCustomEvent('onRabbitMQDataUpdated', function() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
});
```

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```javascript
<?php if (!$hasCredentials): ?>
    BX.UI.Notification.Center.notify({
        content: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RabbitMQ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—á–µ—Ä–µ–¥—è–º–∏',
        position: 'top-right',
        type: 'warning'
    });
<?php endif; ?>
```

#### –°—Ç–∏–ª–∏

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è:
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (`.ui-alert-warning`)
- –ö–Ω–æ–ø–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`.ui-btn-icon-refresh`)
- –ê–Ω–∏–º–∞—Ü–∏–∏ –≤—Ä–∞—â–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```php
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è credentials
$apiUrl = \Bitrix\Main\Config\Option::get('imena.rmq', 'api_url', '');
$hasCredentials = !empty($apiUrl) && !empty(\Bitrix\Main\Config\Option::get('imena.rmq', 'api_password'));

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
<?php if (!$hasCredentials): ?>
    <div class="ui-alert ui-alert-warning">
        <span class="ui-alert-message">
            <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RabbitMQ API. 
            <a href="/local/pages/imena/rmq/settings/" class="ui-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º</a>
        </span>
    </div>
<?php endif; ?>
```

---

### settings/index.php - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ü—É—Ç—å:** `/local/pages/imena/rmq/settings/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ Management API

#### –û–ø–∏—Å–∞–Ω–∏–µ

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—É –¥–ª—è –≤–≤–æ–¥–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö RabbitMQ Management API (URL, username, password) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–æ–¥—É–ª—å–Ω—ã—Ö –æ–ø—Ü–∏—è—Ö Bitrix24.

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - –ü–æ–ª–µ URL —Å–µ—Ä–≤–µ—Ä–∞ RabbitMQ (–¥–æ–ª–∂–Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `/api/`)
   - –ü–æ–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è (—Å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
   - –ö–Ω–æ–ø–∫–∞ "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"
   - –í—ã–∑–æ–≤ `RmqApiClient::testConnection()`
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞)
   - –ü–æ–∫–∞–∑ –≤–µ—Ä—Å–∏–∏ RabbitMQ –∏ —É–∑–ª–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –º–æ–¥—É–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ Bitrix24
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ

4. **–£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - –ö–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
   - –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

5. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å**
   - –û–ø–∏—Å–∞–Ω–∏–µ RabbitMQ Management API
   - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```php
settings/index.php
    ‚îÇ
    ‚îú‚îÄ> –û–±—Ä–∞–±–æ—Ç–∫–∞ POST –∑–∞–ø—Ä–æ—Å–æ–≤
    ‚îÇ   ‚îú‚îÄ> save_credentials (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
    ‚îÇ   ‚îú‚îÄ> test_connection (–ø—Ä–æ–≤–µ—Ä–∫–∞)
    ‚îÇ   ‚îî‚îÄ> clear_credentials (—É–¥–∞–ª–µ–Ω–∏–µ)
    ‚îÇ
    ‚îú‚îÄ> –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ Option
    ‚îÇ
    ‚îî‚îÄ> –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∏ —Å—Ç–∞—Ç—É—Å–∞
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

**1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```php
if ($_SERVER['REQUEST_METHOD'] === 'POST' && check_bitrix_sessid()) {
    $action = $_POST['action'] ?? '';
    
    if ($action === 'save_credentials') {
        $serverUrl = trim($_POST['rmq_server_url'] ?? '');
        $username = trim($_POST['rmq_username'] ?? '');
        $password = trim($_POST['rmq_password'] ?? '');
        
        if (empty($serverUrl) || empty($username) || empty($password)) {
            $error = '–í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è';
        } else {
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            Option::set('imena.rmq', 'api_url', $serverUrl);
            Option::set('imena.rmq', 'api_username', $username);
            Option::set('imena.rmq', 'api_password', $password);
            
            // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
            $apiClient = new RmqApiClient();
            $testResult = $apiClient->testConnection();
            
            if ($testResult->isSuccess()) {
                $saved = true;
            } else {
                $error = $testResult->getErrors()[0]->getMessage();
            }
        }
    }
}
```

**2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```php
elseif ($action === 'test_connection') {
    try {
        $apiClient = new RmqApiClient();
        $testResult = $apiClient->testConnection();
    } catch (\Exception $e) {
        $error = '–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' . $e->getMessage();
    }
}
```

**3. –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```php
elseif ($action === 'clear_credentials') {
    Option::delete('imena.rmq', ['api_url', 'api_username', 'api_password']);
    LocalRedirect($APPLICATION->GetCurPage());
}
```

#### –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–æ—Ä–º—ã:**
```html
<form method="post" action="<?= $APPLICATION->GetCurPage() ?>" class="rmq-credentials-form">
    <?= bitrix_sessid_post() ?>
    <input type="hidden" name="action" value="save_credentials">
    
    <!-- URL —Å–µ—Ä–≤–µ—Ä–∞ -->
    <div class="ui-form-row">
        <div class="ui-form-label">
            <div class="ui-ctl-label-text">URL —Å–µ—Ä–≤–µ—Ä–∞ RabbitMQ <span class="required">*</span></div>
        </div>
        <div class="ui-form-content">
            <input type="url" name="rmq_server_url" class="ui-ctl-element" 
                   value="<?= htmlspecialcharsbx($apiUrl) ?>" 
                   placeholder="http://rmq.eg-holding.ru:15672/api/" required>
        </div>
    </div>
    
    <!-- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="ui-form-row">
        <!-- ... -->
    </div>
    
    <!-- –ü–∞—Ä–æ–ª—å -->
    <div class="ui-form-row">
        <!-- ... -->
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="ui-form-row">
        <button type="submit" class="ui-btn ui-btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button type="button" onclick="testConnection()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
        <button type="button" onclick="clearCredentials()">–£–¥–∞–ª–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</button>
    </div>
</form>
```

#### –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞:**
```php
<div class="rmq-status-panel">
    <div class="rmq-status-item">
        <span class="rmq-status-label">–°—Ç–∞—Ç—É—Å:</span>
        <span class="rmq-status-value <?= $hasPassword ? 'status-ok' : 'status-error' ?>">
            <?= $hasPassword ? '‚úì –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ' : '‚úó –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ' ?>
        </span>
    </div>
    
    <?php if ($apiUrl): ?>
        <div class="rmq-status-item">
            <span class="rmq-status-label">API URL:</span>
            <span class="rmq-status-value"><?= htmlspecialcharsbx($apiUrl) ?></span>
        </div>
    <?php endif; ?>
    
    <?php if ($username): ?>
        <div class="rmq-status-item">
            <span class="rmq-status-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</span>
            <span class="rmq-status-value"><?= htmlspecialcharsbx($username) ?></span>
        </div>
    <?php endif; ?>
</div>
```

#### JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

**1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```javascript
function testConnection() {
    if (confirm('–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RabbitMQ?')) {
        document.getElementById('test-connection-form').submit();
    }
}
```

**2. –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```javascript
function clearCredentials() {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?')) {
        document.getElementById('clear-credentials-form').submit();
    }
}
```

**3. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–ª–∏–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ –º–µ–Ω—é:**
```javascript
BX.ready(function() {
    const menuButtons = document.querySelectorAll('.main-buttons-item');
    
    menuButtons.forEach(function(button) {
        if (button.classList.contains('main-buttons-item-active')) {
            const link = button.querySelector('a.main-buttons-item-link, span.main-buttons-item-link');
            
            if (link) {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }, true);
                
                link.style.cursor = 'default';
            }
        }
    });
});
```

#### –°—Ç–∏–ª–∏

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è:
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (`.rmq-settings-container`)
- –ü–∞–Ω–µ–ª–∏ —Å—Ç–∞—Ç—É—Å–∞ (`.rmq-status-panel`)
- –§–æ—Ä–º—ã —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`.rmq-credentials-form`)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏ (`.rmq-info-panel`)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

#### –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–ú–æ–¥—É–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ Bitrix24:**
- `imena.rmq` / `api_url` - URL —Å–µ—Ä–≤–µ—Ä–∞ RabbitMQ API
- `imena.rmq` / `api_username` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `imena.rmq` / `api_password` - –ü–∞—Ä–æ–ª—å (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)

**–ß—Ç–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
```php
$apiUrl = Option::get('imena.rmq', 'api_url', 'http://rmq.eg-holding.ru:15672/api/');
$username = Option::get('imena.rmq', 'api_username', 'admin');
$hasPassword = !empty(Option::get('imena.rmq', 'api_password'));
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
```php
Option::set('imena.rmq', 'api_url', $serverUrl);
Option::set('imena.rmq', 'api_username', $username);
Option::set('imena.rmq', 'api_password', $password);
```

---

## –ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### .left.menu.php

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–µ–≤–æ–≥–æ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –º–æ–¥—É–ª—è RabbitMQ

#### –û–ø–∏—Å–∞–Ω–∏–µ

–§–∞–π–ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ–Ω—é, –∫–æ—Ç–æ—Ä–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `bitrix:menu` —Å —à–∞–±–ª–æ–Ω–æ–º `top_horizontal` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `bitrix:main.interface.buttons` –≤ —à–∞–ø–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é

```php
$aMenuLinks = [
    [
        '–û—á–µ—Ä–µ–¥–∏ RabbitMQ',                    // –ù–∞–∑–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é
        '/local/pages/imena/rmq/queues/',      // URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        [],                                     // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        [
            'menu_item_id' => 'rmq_queues',    // ID –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é
            'class' => '',                      // CSS –∫–ª–∞—Å—Å
        ],
        '',                                     // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
    ],
    [
        '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
        '/local/pages/imena/rmq/settings/',
        [],
        [
            'menu_item_id' => 'rmq_settings',
            'class' => '',
        ],
        '',
    ],
];
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix24

–ú–µ–Ω—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —à–∞–ø–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º Bitrix24:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `bitrix:menu` —Å —à–∞–±–ª–æ–Ω–æ–º `top_horizontal`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `bitrix:main.interface.buttons`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
–°—Ç—Ä–∞–Ω–∏—Ü–∞ (index.php)
    ‚îÇ
    ‚îú‚îÄ> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ bitrix/header.php
    ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è imena.rmq
    ‚îú‚îÄ> –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
    ‚îú‚îÄ> –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    ‚îÇ
    ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–¥–ª—è queues/)
    ‚îú‚îÄ> –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    ‚îÇ
    ‚îú‚îÄ> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    ‚îÇ   ‚îú‚îÄ> bitrix:ui.sidepanel.wrapper (–¥–ª—è queues/)
    ‚îÇ   ‚îî‚îÄ> imena.rmq:queue.list (–¥–ª—è queues/)
    ‚îÇ
    ‚îú‚îÄ> JavaScript –∫–æ–¥
    ‚îÇ   ‚îú‚îÄ> –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    ‚îÇ   ‚îú‚îÄ> –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    ‚îÇ   ‚îî‚îÄ> –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grid
    ‚îÇ
    ‚îú‚îÄ> CSS —Å—Ç–∏–ª–∏
    ‚îÇ   ‚îú‚îÄ> –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    ‚îÇ   ‚îî‚îÄ> –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
    ‚îÇ
    ‚îî‚îÄ> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ bitrix/footer.php
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–£—Ä–æ–≤–µ–Ω—å 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è**
```php
if (!Loader::includeModule('imena.rmq')) {
    ShowError('–ú–æ–¥—É–ª—å imena.rmq –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
    require($_SERVER['DOCUMENT_ROOT'].'/bitrix/footer.php');
    die();
}
```

**–£—Ä–æ–≤–µ–Ω—å 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫**
```php
$apiUrl = \Bitrix\Main\Config\Option::get('imena.rmq', 'api_url', '');
$hasCredentials = !empty($apiUrl) && !empty(\Bitrix\Main\Config\Option::get('imena.rmq', 'api_password'));

if (!$hasCredentials) {
    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
}
```

**–£—Ä–æ–≤–µ–Ω—å 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ**
```php
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ imena.rmq:queue.list
try {
    $apiClient = new RmqApiClient();
    $queuesData = $apiClient->getQueues($vhost);
} catch (RmqApiException $e) {
    $result['ERROR'] = $e->getMessage();
}
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç imena.rmq:queue.list

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ queues/index.php:**
```php
$APPLICATION->IncludeComponent(
    'bitrix:ui.sidepanel.wrapper',
    '',
    [
        'POPUP_COMPONENT_NAME' => 'imena.rmq:queue.list',
        'POPUP_COMPONENT_PARAMS' => [
            'VHOST' => '/',
            'SHOW_EMPTY_QUEUES' => 'Y',
            'CACHE_TIME' => 0,
            'CACHE_TYPE' => 'N',
        ],
    ]
);
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `VHOST` - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç RabbitMQ
- `SHOW_EMPTY_QUEUES` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –ø—É—Å—Ç—ã–µ –æ—á–µ—Ä–µ–¥–∏
- `GRID_ID` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Grid (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `IMENA_RMQ_QUEUE_LIST`)
- `CACHE_TIME` - –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `CACHE_TYPE` - —Ç–∏–ø –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**AJAX –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- `purgeQueue` - –æ—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

**1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Grid:**
```javascript
if (BX.Imena && BX.Imena.RmqGrid && BX.Imena.RmqGrid.refreshGrid) {
    BX.Imena.RmqGrid.refreshGrid();
}
```

**2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```javascript
BX.UI.Notification.Center.notify({
    content: '–°–æ–æ–±—â–µ–Ω–∏–µ',
    position: 'top-right',
    autoHideDelay: 3000,
    type: 'success' // –∏–ª–∏ 'error', 'warning'
});
```

**3. –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:**
```javascript
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
BX.addCustomEvent('onRabbitMQQueueSelected', function(queueName, queueData) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
});

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
BX.onCustomEvent('onRabbitMQDataUpdated', []);
```

### –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã queues/index.php:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ toolbar
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grid —Å–∏—Å—Ç–µ–º–æ–π

**–î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã settings/index.php:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–ª–∏–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ –º–µ–Ω—é

---

## –°—Ç–∏–ª–∏ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ

### –û–±—â–∏–µ —Å—Ç–∏–ª–∏

**–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:**
- –£—Å–ø–µ—Ö: `#3bc8f5` (–≥–æ–ª—É–±–æ–π)
- –û—à–∏–±–∫–∞: `#ff5752` (–∫—Ä–∞—Å–Ω—ã–π)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `#fff3cd` (–∂–µ–ª—Ç—ã–π —Ñ–æ–Ω), `#856404` (—Ç–µ–∫—Å—Ç)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: `#2fc6f6` (—Å–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ Bitrix24 UI
- `.ui-btn`, `.ui-alert`, `.ui-form-row`, `.ui-ctl-element`
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã

### –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏

**–î–ª—è queues/index.php:**
- `.rmq-queue-list-wrapper` - –æ–±–µ—Ä—Ç–∫–∞ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
- `.rmq-type-*` - —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–∏–ø–æ–≤ –æ—á–µ—Ä–µ–¥–µ–π (classic, quorum, stream)
- `.rmq-state-*` - —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ (success, warning, danger)
- `.rmq-messages-*` - —Å—Ç–∏–ª–∏ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

**–î–ª—è settings/index.php:**
- `.rmq-settings-container` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `.rmq-status-panel` - –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `.rmq-credentials-form` - —Ñ–æ—Ä–º–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `.rmq-info-panel` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bitrix_sessid:**
```php
// –í —Ñ–æ—Ä–º–∞—Ö
<?= bitrix_sessid_post() ?>

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
if ($_SERVER['REQUEST_METHOD'] === 'POST' && check_bitrix_sessid()) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è:**
```php
$serverUrl = trim($_POST['rmq_server_url'] ?? '');
$username = trim($_POST['rmq_username'] ?? '');
$password = trim($_POST['rmq_password'] ?? '');
```

**–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞:**
```php
<?= htmlspecialcharsbx($apiUrl) ?>
<?= htmlspecialcharsbx($error) ?>
```

### –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª–µ–π

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**
- –ü–∞—Ä–æ–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–æ–¥—É–ª—å–Ω—ã—Ö –æ–ø—Ü–∏—è—Ö Bitrix24
- Bitrix24 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∏—Ñ—Ä—É–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü–∞—Ä–æ–ª—å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–µ (—Ç–æ–ª—å–∫–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```php
$hasPassword = !empty(Option::get('imena.rmq', 'api_password'));
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–µ–∑ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è
```

### AJAX –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:**
```php
public function configureActions()
{
    return [
        'purgeQueue' => [
            'prefilters' => [
                new ActionFilter\Authentication(),  // –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
                new ActionFilter\HttpMethod([ActionFilter\HttpMethod::METHOD_POST]),
                new ActionFilter\Csrf(),            // CSRF –∑–∞—â–∏—Ç–∞
            ]
        ],
    ];
}
```

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:**
```bash
mkdir -p /local/pages/imena/rmq/new-page/
```

**2. –°–æ–∑–¥–∞—Ç—å index.php:**
```php
<?php
require($_SERVER['DOCUMENT_ROOT'].'/bitrix/header.php');

use Bitrix\Main\Loader;
use Bitrix\Main\Localization\Loc;

Loader::includeModule('imena.rmq');
Loc::loadMessages(__FILE__);

$APPLICATION->SetTitle('–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞');

// –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å

require($_SERVER['DOCUMENT_ROOT'].'/bitrix/footer.php');
```

**3. –î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é (.left.menu.php):**
```php
$aMenuLinks[] = [
    '–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
    '/local/pages/imena/rmq/new-page/',
    [],
    [
        'menu_item_id' => 'rmq_new_page',
        'class' => '',
    ],
    '',
];
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

**1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:**
```bash
/local/modules/imena.rmq/install/js/rmq/pages/custom.js
```

**2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:**
```php
$this->addExternalJS('/local/modules/imena.rmq/install/js/rmq/pages/custom.js');
```

**3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```javascript
BX.ready(function() {
    // –í–∞—à –∫–æ–¥
});
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç–∏–ª–µ–π

**1. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ (–≤ index.php):**
```php
<style>
.custom-style {
    /* –í–∞—à–∏ —Å—Ç–∏–ª–∏ */
}
</style>
```

**2. –í–Ω–µ—à–Ω–∏–π —Ñ–∞–π–ª:**
```php
$this->addExternalCss('/local/modules/imena.rmq/install/css/rmq/pages/custom.css');
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π:**
```php
use Imena\Storm\Diagram\Diagram;
use Imena\Camunda\Process\ProcessInstance;

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π
```

**–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏:**
```php
// –ß–µ—Ä–µ–∑ GET –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
$queueName = $_GET['QUEUE'] ?? '';

// –ß–µ—Ä–µ–∑ —Å–µ—Å—Å–∏—é
$_SESSION['RMQ_QUEUE_NAME'] = $queueName;

// –ß–µ—Ä–µ–∑ –º–æ–¥—É–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ (–¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫)
Option::set('imena.rmq', 'last_selected_queue', $queueName);
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

```php
<?php
require($_SERVER['DOCUMENT_ROOT'].'/bitrix/header.php');

use Bitrix\Main\Loader;
use Bitrix\Main\Localization\Loc;

Loader::includeModule('imena.rmq');
Loc::loadMessages(__FILE__);

$APPLICATION->SetTitle('–ú–æ—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞');
?>

<div class="my-page">
    <h1>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h1>
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
</div>

<?php require($_SERVER['DOCUMENT_ROOT'].'/bitrix/footer.php'); ?>
```

### –ü—Ä–∏–º–µ—Ä 2: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å AJAX –¥–µ–π—Å—Ç–≤–∏—è–º–∏

```php
<?php
// –í index.php
?>

<script>
BX.ready(function() {
    BX.ajax.runComponentAction('imena.rmq:queue.list', 'purgeQueue', {
        data: {
            queueName: 'my_queue',
            vhost: '/'
        }
    }).then(function(response) {
        if (response.data.success) {
            BX.UI.Notification.Center.notify({
                content: response.data.message,
                autoHideDelay: 3000
            });
        }
    });
});
</script>
```

### –ü—Ä–∏–º–µ—Ä 3: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ñ–æ—Ä–º–æ–π

```php
<?php
// –û–±—Ä–∞–±–æ—Ç–∫–∞ POST
if ($_SERVER['REQUEST_METHOD'] === 'POST' && check_bitrix_sessid()) {
    $action = $_POST['action'] ?? '';
    
    if ($action === 'save') {
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        Option::set('imena.rmq', 'my_setting', $_POST['value']);
        LocalRedirect($APPLICATION->GetCurPage());
    }
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
$value = Option::get('imena.rmq', 'my_setting', '');
?>

<form method="post">
    <?= bitrix_sessid_post() ?>
    <input type="hidden" name="action" value="save">
    <input type="text" name="value" value="<?= htmlspecialcharsbx($value) ?>">
    <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</form>
```

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Bitrix24:** 20.0.0+
- **PHP:** 8.0+
- **–ú–æ–¥—É–ª—å:** `imena.rmq` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **RabbitMQ:** Management API –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω

---

## –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–í PHP:**
```php
error_log('[RMQ Page] Debug: ' . print_r($data, true));
```

**–í JavaScript:**
```javascript
console.log('[RMQ Page] Debug:', data);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤

**–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```javascript
// –ü–µ—Ä–µ—Ö–≤–∞—Ç AJAX –∑–∞–ø—Ä–æ—Å–æ–≤
BX.ajax.runComponentAction = (function(original) {
    return function(component, action, params) {
        console.log('AJAX Request:', component, action, params);
        return original.apply(this, arguments);
    };
})(BX.ajax.runComponentAction);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–í PHP:**
```php
$apiUrl = Option::get('imena.rmq', 'api_url', '');
$username = Option::get('imena.rmq', 'api_username', '');
$hasPassword = !empty(Option::get('imena.rmq', 'api_password'));

var_dump([
    'api_url' => $apiUrl,
    'username' => $username,
    'has_password' => $hasPassword
]);
```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ—á–µ—Ä–µ–¥–µ–π (>1000) –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ vhost

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ queues/ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è real-time –¥–∞–Ω–Ω—ã—Ö
   - –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL 30 —Å–µ–∫—É–Ω–¥

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –º–æ–¥—É–ª—å–Ω—ã—Ö –æ–ø—Ü–∏—è—Ö (—à–∏—Ñ—Ä—É—é—Ç—Å—è Bitrix24)
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –¥–ª—è RabbitMQ API

---

## –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### –í–µ—Ä—Å–∏—è 1.0+ (25.01.2025)

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π (queues/index.php)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (settings/index.php)
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é (.left.menu.php)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º imena.rmq:queue.list
- ‚úÖ JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –ú–æ–¥—É–ª—å: `/local/modules/imena.rmq/README.md`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: `/local/components/imena.rmq/README.md`
- Grid —Å–∏—Å—Ç–µ–º–∞: `/local/modules/imena.rmq/lib/Queue/Grid/README.md`

**–õ–æ–≥–∏:**
- –°—Ç—Ä–∞–Ω–∏—Ü—ã: `error_log('[RMQ Page] ...')`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: `error_log('[RMQ Component] ...')`
- API: —á–µ—Ä–µ–∑ `RmqApiClient`

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 25.01.2025*



---

# –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è Imena Storm

# IMENA Storm - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–¥—É–ª—è

**–í–µ—Ä—Å–∏—è:** 1.0+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è  
**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 6 –Ω–æ—è–±—Ä—è 2025

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–∞—Ç–∞–ª–æ–≥–∞)
3. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ-—Ñ–∞–π–ª—ã)
4. [–°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-–º–æ–¥—É–ª—è)
   - [index.php - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–°–ø–∏—Å–æ–∫ –¥–∏–∞–≥—Ä–∞–º–º)](#indexphp---–≥–ª–∞–≤–Ω–∞—è-—Å—Ç—Ä–∞–Ω–∏—Ü–∞-—Å–ø–∏—Å–æ–∫-–¥–∏–∞–≥—Ä–∞–º–º)
   - [responsible - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏](#responsible---—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏)
   - [property - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏](#property---—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–≤–æ–π—Å—Ç–≤–∞–º–∏)
   - [diagram - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã](#diagram---–¥–µ—Ç–∞–ª—å–Ω–∞—è-—Å—Ç—Ä–∞–Ω–∏—Ü–∞-–¥–∏–∞–≥—Ä–∞–º–º—ã)
   - [modeler - –†–µ–¥–∞–∫—Ç–æ—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º](#modeler---—Ä–µ–¥–∞–∫—Ç–æ—Ä-bpmn-–¥–∏–∞–≥—Ä–∞–º–º)
   - [settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è](#settings---–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–º–æ–¥—É–ª—è)
5. [JavaScript –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#javascript-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
6. [–ù–∞–≤–∏–≥–∞—Ü–∏—è](#–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
7. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ SidePanel](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-sidepanel)
8. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)

---

## –û–±–∑–æ—Ä

–ö–∞—Ç–∞–ª–æ–≥ `/local/pages/imena/storm/` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ Storm BPMN. –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Bitrix24 —Å SidePanel –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–°–ø–∏—Å–∫–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π** —Å Grid —Å–∏—Å—Ç–µ–º–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** –≤ SidePanel –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–ï–¥–∏–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ –ª–µ–≤–æ–µ –º–µ–Ω—é
- ‚úÖ **–†–µ–¥–∞–∫—Ç–æ—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º** (modeler)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏** –∑–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–∏–∞–≥—Ä–∞–º–º
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏** –¥–∏–∞–≥—Ä–∞–º–º
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è** —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Storm BPMN API** –∏ Camunda 7

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
/local/pages/imena/storm/
‚îú‚îÄ‚îÄ .access.php                   # –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª—É
‚îú‚îÄ‚îÄ .htaccess                     # Apache –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .left.menu.php                # –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é
‚îú‚îÄ‚îÄ index.php                     # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Å–ø–∏—Å–æ–∫ –¥–∏–∞–≥—Ä–∞–º–º)
‚îú‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îÇ
‚îú‚îÄ‚îÄ responsible/                  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ index.php                 # –°–ø–∏—Å–æ–∫ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ detail/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php             # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ sidepanel.js              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SidePanel
‚îÇ   ‚îî‚îÄ‚îÄ lang/                     # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ property/                     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –¥–∏–∞–≥—Ä–∞–º–º
‚îÇ   ‚îú‚îÄ‚îÄ index.php                 # –°–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤
‚îÇ   ‚îú‚îÄ‚îÄ detail/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php             # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–≤–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ sidepanel.js              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SidePanel
‚îÇ   ‚îî‚îÄ‚îÄ lang/                     # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ diagram/                      # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.php                 # –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–≥—Ä–∞–º–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ add_urlrewrite.php        # URL rewrite –ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ .section.php              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–∞
‚îÇ
‚îú‚îÄ‚îÄ modeler/                      # –†–µ–¥–∞–∫—Ç–æ—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º
‚îÇ   ‚îú‚îÄ‚îÄ index.php                 # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ .access.php               # –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ .left.menu.php            # –ú–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ lang/                     # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ settings/                     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ index.php                 # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ API
‚îÇ   ‚îî‚îÄ‚îÄ .section.php              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–∞
‚îÇ
‚îú‚îÄ‚îÄ js/                           # JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ action-manager.js         # –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞–¥ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è JS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ bpmn-renderer/                # BPMN —Ä–µ–Ω–¥–µ—Ä–µ—Ä (Node.js –º–æ–¥—É–ª—å)
‚îÇ   ‚îî‚îÄ‚îÄ node_modules/             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ npm
‚îÇ
‚îî‚îÄ‚îÄ diagrams.svg/                 # SVG —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### .access.php

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª—É Storm BPMN

```php
$PERM["index.php"]["*"] = "R";      // –ß—Ç–µ–Ω–∏–µ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
$PERM["diagram"]["*"] = "R";        // –ß—Ç–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –¥–∏–∞–≥—Ä–∞–º–º
```

### .left.menu.php

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–µ–≤–æ–≥–æ –º–µ–Ω—é —Ä–∞–∑–¥–µ–ª–∞

```php
$aMenuLinks = [
    [
        "–î–∏–∞–≥—Ä–∞–º–º—ã",
        "/local/pages/imena/storm/",
        ["/local/pages/imena/storm/", "/local/pages/imena/storm/index.php"],
        [],
        ""
    ],
    [
        "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
        "/local/pages/imena/storm/settings/",
        ["/local/pages/imena/storm/settings/"],
        [],
        ""
    ],
];
```

### .htaccess

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Apache –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

---

## –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è

---

## index.php - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–°–ø–∏—Å–æ–∫ –¥–∏–∞–≥—Ä–∞–º–º)

**–ü—É—Ç—å:** `/local/pages/imena/storm/index.php`  
**URL:** `/local/pages/imena/storm/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –º–æ–¥—É–ª—å. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–∏–∞–≥—Ä–∞–º–º Storm BPMN.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `bitrix:ui.sidepanel.wrapper` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è SidePanel –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `imena.storm:diagram.list`.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º –≤ —Ç–∞–±–ª–∏—á–Ω–æ–º –≤–∏–¥–µ (Grid)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ, –ø—É–±–ª–∏–∫–∞—Ü–∏—è, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å JavaScript –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –¥–µ–π—Å—Ç–≤–∏–π

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```php
'POPUP_COMPONENT_PARAMS' => [
    'DETAIL_URL' => SITE_DIR.'storm/diagram/#ID#/',
    'ITEMS_PER_PAGE' => '20',
    'SHOW_ARCHIVED' => 'N',
    'ENABLE_EXPORT' => 'Y',
    'CACHE_TYPE' => 'A',
    'CACHE_TIME' => '3600',
]
```

### JavaScript –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```php
CJSCore::Init(['sidepanel', 'ui.notification', 'ui.dialogs.messagebox']);
$APPLICATION->AddHeadScript('/local/pages/imena/storm/js/action-manager.js');
```

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `imena.storm:diagram.list` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º
- `BX.Storm.DiagramActionManager` - JavaScript –º–µ–Ω–µ–¥–∂–µ—Ä –¥–µ–π—Å—Ç–≤–∏–π

---

## responsible - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏

**–ü—É—Ç—å:** `/local/pages/imena/storm/responsible/`  
**URL:** `/local/pages/imena/storm/responsible/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–∏–∞–≥—Ä–∞–º–º.

### responsible/index.php - –°–ø–∏—Å–æ–∫ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `bitrix:ui.sidepanel.wrapper` –¥–ª—è SidePanel –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –í–Ω—É—Ç—Ä–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `imena.storm:responsible.list`
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç JavaScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `sidepanel.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –≤ —Ç–∞–±–ª–∏—á–Ω–æ–º –≤–∏–¥–µ
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∏–∞–≥—Ä–∞–º–º–µ, —ç–ª–µ–º–µ–Ω—Ç—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –±–æ–∫–æ–≤—ã—Ö –ø–∞–Ω–µ–ª—è—Ö (—à–∏—Ä–∏–Ω–∞ 500px)
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–∏–∞–≥—Ä–∞–º–º–∞–º —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ grid –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–µ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```php
'POPUP_COMPONENT_PARAMS' => [
    'PATH_TO_RESPONSIBLE' => SITE_DIR.'local/pages/imena/responsible/detail/?ID=#ID#',
    'PATH_TO_DIAGRAM' => SITE_DIR.'local/pages/imena/storm/diagram/detail/?ID=#ID#',
    'LIST_URL' => SITE_DIR.'local/pages/imena/responsible/',
    'PAGE_SIZE' => 25,
    'SHOW_FILTER' => 'Y',
    'SHOW_PAGINATION' => 'Y',
    'DIAGRAM_ID' => $diagramId,        // –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞
    'IS_IFRAME_MODE' => $isIframe,
    'IFRAME_TYPE' => $iframeType,
]
```

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL: `?DIAGRAM_ID=...`
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∏–∑ –¥—Ä—É–≥–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ iframe —Ä–µ–∂–∏–º–∞ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### responsible/detail/index.php - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ SidePanel —Å —à–∏—Ä–∏–Ω–æ–π 800px
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `imena.storm:responsible.detail` (TODO)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `ResponsibleAccessController`
- ‚úÖ –ö–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤)
- ‚úÖ –°—Å—ã–ª–∫–∏ –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ —ç–ª–µ–º–µ–Ω—Ç—ã
- ‚úÖ AJAX —É–¥–∞–ª–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º

**–û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –ø–æ–ª—è:**
- ID –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –î–∏–∞–≥—Ä–∞–º–º–∞ (—Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- –≠–ª–µ–º–µ–Ω—Ç –¥–∏–∞–≥—Ä–∞–º–º—ã
- –¢–∏–ø –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ (HUMAN/ROLE)
- –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π (–Ω–∞–∑–≤–∞–Ω–∏–µ/–§–ò–û)
- –û–ø–∏—Å–∞–Ω–∏–µ
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°—Ç–∞—Ç—É—Å –¥–∏–∞–≥—Ä–∞–º–º—ã
- –î–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:**
```php
$access = ResponsibleAccessController::createByDefault();
$canUpdate = $access->check(ResponsibleActionDictionary::UPDATE);
$canDelete = $access->check(ResponsibleActionDictionary::DELETE);
```

**JavaScript —Ñ—É–Ω–∫—Ü–∏–∏:**
- `editResponsible()` - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (TODO)
- `deleteResponsible()` - AJAX —É–¥–∞–ª–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º

### responsible/sidepanel.js

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è SidePanel –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ responsible

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∏—Ä–∏–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π
- –ü–µ—Ä–µ—Ö–≤–∞—Ç –∫–ª–∏–∫–æ–≤ –Ω–∞ —Å—Å—ã–ª–∫–∏ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ grid –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –±—Ä–∞—É–∑–µ—Ä–∞

---

## property - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏

**–ü—É—Ç—å:** `/local/pages/imena/storm/property/`  
**URL:** `/local/pages/imena/storm/property/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –¥–∏–∞–≥—Ä–∞–º–º Storm BPMN.

### property/index.php - –°–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `bitrix:ui.sidepanel.wrapper` –¥–ª—è SidePanel –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –í–Ω—É—Ç—Ä–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `imena.storm:property.list`
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç JavaScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `sidepanel.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–≤–æ–π—Å—Ç–≤ –¥–∏–∞–≥—Ä–∞–º–º—ã
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∏–∞–≥—Ä–∞–º–º–µ (`DIAGRAM_ID`)
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –±–æ–∫–æ–≤—ã—Ö –ø–∞–Ω–µ–ª—è—Ö
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```php
'POPUP_COMPONENT_PARAMS' => [
    'DIAGRAM_ID' => $diagramId,
    'DETAIL_URL' => $detailUrlTemplate,
    'PAGE_SIZE' => 25,
    'LIST_URL' => $listUrl,
]
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è shutdown function –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
- –ó–∞–ø–∏—Å—å –æ—à–∏–±–æ–∫ –≤ `debug_error.log`

### property/detail/index.php - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–≤–æ–π—Å—Ç–≤–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ SidePanel
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `imena.storm:property.detail`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è (ID=0) –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (ID>0)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ grid –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```php
'POPUP_COMPONENT_PARAMS' => [
    'ID' => $propertyId,          // 0 –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, >0 –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    'DIAGRAM_ID' => $diagramId,   // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
],
'RELOAD_GRID_AFTER_SAVE' => true,
'CLOSE_AFTER_SAVE' => true,
'PAGE_MODE' => false,
'PAGE_MODE_OFF_BACK_URL' => $listUrl,
]
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–ª–∏—á–∏–µ `DIAGRAM_ID`
- –í–∞–ª–∏–¥–∞—Ü–∏—è `PROPERTY_ID` (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ `ID`, `id`, `PROPERTY_ID`)

### property/sidepanel.js

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è SidePanel –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ property

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `responsible/sidepanel.js`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∏—Ä–∏–Ω—ã –ø–∞–Ω–µ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ grid

---

## diagram - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã

**–ü—É—Ç—å:** `/local/pages/imena/storm/diagram/index.php`  
**URL:** `/local/pages/imena/storm/diagram/detail/?ID=...`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–∏–∞–≥—Ä–∞–º–º–µ Storm BPMN.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `bitrix:ui.sidepanel.wrapper` –¥–ª—è SidePanel –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –í–Ω—É—Ç—Ä–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `imena.storm:diagram.detail`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ UUID –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–∏–∞–≥—Ä–∞–º–º

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–∏–∞–≥—Ä–∞–º–º–µ
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∏–∞–≥—Ä–∞–º–º—ã
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä—É –¥–∏–∞–≥—Ä–∞–º–º—ã
- ‚úÖ –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ, —Å–≤–æ–π—Å—Ç–≤–∞)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```php
'POPUP_COMPONENT_PARAMS' => [
    'ELEMENT_ID' => $diagramId,     // ID –¥–∏–∞–≥—Ä–∞–º–º—ã (UUID –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
    'LIST_URL' => '/storm/',
    'SHOW_ELEMENTS' => 'Y',
    'SHOW_HISTORY' => 'N',
    'CACHE_TYPE' => 'A',
    'CACHE_TIME' => '3600',
]
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ui.sidepanel.wrapper` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ —á–∏—Å–ª–æ–≤—ã—Ö, —Ç–∞–∫ –∏ UUID –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π —Ä–∞–∑–¥–µ–ª–∞

---

## modeler - –†–µ–¥–∞–∫—Ç–æ—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º

**–ü—É—Ç—å:** `/local/pages/imena/storm/modeler/index.php`  
**URL:** `/local/pages/imena/storm/modeler/?ID=...&mode=edit`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º –Ω–∞ –æ—Å–Ω–æ–≤–µ bpmn-js.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ bpmn-js
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `BX.SidePanel` –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ BPMN –¥–∏–∞–≥—Ä–∞–º–º
- ‚úÖ –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
- ‚úÖ –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ XML (body/camunda)
- ‚úÖ –ü–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix API —á–µ—Ä–µ–∑ `runComponentAction`

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```php
[
    'DIAGRAM_ID' => $diagramId,              // ID –¥–∏–∞–≥—Ä–∞–º–º—ã
    'MODE' => $mode,                         // 'edit' –∏–ª–∏ 'view'
    'SOURCE' => $source,                     // 'body' –∏–ª–∏ 'camunda'
    'SHOW_TOOLBAR' => 'Y',
    'SHOW_PROPERTIES_PANEL' => 'Y',
    'ENABLE_HOTKEYS' => 'Y',
    'CACHE_TIME' => 0,                       // –ù–µ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è
]
```

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

**–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`mode=edit`):**
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (`mode=view`):**
- –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
- –ë–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥–æ—Ç–æ–≤—ã—Ö –¥–∏–∞–≥—Ä–∞–º–º

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ XML

**Body (`source=body`):**
- XML –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã

**Camunda (`source=camunda`):**
- XML –∏–∑ Camunda BPM Engine
- –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### JavaScript –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```php
Extension::load(['ajax', 'ui.notification', 'sidepanel']);
```

**–í–∞–∂–Ω–æ:** –í —Ä–µ–∂–∏–º–µ IFRAME —è–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è BX API –¥–ª—è —Ä–∞–±–æ—Ç—ã `runComponentAction` –≤ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç

- `imena.storm:diagram.modeler` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `imena.storm` - —Ä–∞–±–æ—Ç–∞ —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
- –ú–æ–¥—É–ª—å `imena.camunda` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda

---

## settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è

**–ü—É—Ç—å:** `/local/pages/imena/storm/settings/index.php`  
**URL:** `/local/pages/imena/storm/settings/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ API Storm BPMN –∏ Camunda 7.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –û–±—Ä–∞–±–æ—Ç–∫–∞ POST –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ API
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Storm BPMN API

- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ email –∏ –ø–∞—Ä–æ–ª—è –¥–ª—è Storm BPMN
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ä–æ–∫–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ / –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

**–§–æ—Ä–º—ã –¥–µ–π—Å—Ç–≤–∏–π:**
- `save_credentials` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `test_connection` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `clear_credentials` - —É–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Camunda 7

- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ URL —Å–µ—Ä–≤–µ—Ä–∞, –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—è
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ / –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- URL —Å–µ—Ä–≤–µ—Ä–∞
- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–§–æ—Ä–º—ã –¥–µ–π—Å—Ç–≤–∏–π:**
- `save_camunda_credentials` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `test_camunda_connection` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `clear_camunda_credentials` - —É–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã

```php
use ImenaStorm\Diagram\Service\StormCredentialsService;
use ImenaStorm\Diagram\Service\CamundaCredentialsService;
```

**StormCredentialsService:**
- `saveCredentials($email, $password)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `testConnection()` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `getEmail()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ email
- `getStatus()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `clearCredentials()` - –æ—á–∏—Å—Ç–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**CamundaCredentialsService:**
- `saveCredentials($serverUrl, $username, $password)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `testConnection()` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `getStatus()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `clearCredentials()` - –æ—á–∏—Å—Ç–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### JavaScript —Ñ—É–Ω–∫—Ü–∏–∏

```javascript
testConnection()              // –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Storm
clearCredentials()            // –û—á–∏—Å—Ç–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö Storm
testCamundaConnection()       // –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda
clearCamundaCredentials()     // –û—á–∏—Å—Ç–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö Camunda
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é

–°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∏–∫ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –≤ –º–µ–Ω—é:

```javascript
BX.ready(function() {
    const menuButtons = document.querySelectorAll('.main-buttons-item');
    menuButtons.forEach(function(button) {
        if (button.classList.contains('main-buttons-item-active')) {
            // –û—Ç–º–µ–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
        }
    });
});
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞–Ω–µ–ª–∏

**Storm BPMN:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞ (~7 –¥–Ω–µ–π)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**Camunda 7:**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Camunda BPM Platform
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Basic Authentication
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ REST API
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è BPMN XML

---

## JavaScript –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### js/action-manager.js

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** JavaScript –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –Ω–∞–¥ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ Storm BPMN.

**–û–±—ä–µ–∫—Ç:** `BX.Storm.DiagramActionManager`

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

| –î–µ–π—Å—Ç–≤–∏–µ | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------------|----------|
| `sync` | ‚úÖ –î–∞ | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã —Å Storm BPMN |
| `delete` | ‚úÖ –î–∞ | –£–¥–∞–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (–Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ) |
| `publish` | ‚úÖ –î–∞ | –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã |
| `archive` | ‚úÖ –î–∞ | –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã |
| `favorite` | ‚ùå –ù–µ—Ç | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ |

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```javascript
// –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
BX.Storm.DiagramActionManager.sync(diagramId, diagramName);
BX.Storm.DiagramActionManager.delete(diagramId, diagramName);
BX.Storm.DiagramActionManager.publish(diagramId, diagramName);
BX.Storm.DiagramActionManager.archive(diagramId, diagramName);
BX.Storm.DiagramActionManager.favorite(diagramId, diagramName, 'toggle');

// –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
BX.Storm.DiagramActionManager.executeAction('sync', diagramId, diagramName, {
    favoriteAction: 'add' // –¥–ª—è favorite: 'add', 'remove', 'toggle'
});
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `BX.ajax.runComponentAction()` –¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—ã–∑—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `imena.storm:diagram.list`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç Grid –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `BX.UI.Notification.Center`

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤:**

```javascript
.then(function(response) {
    if (response.data && response.data.success) {
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å grid
    } else {
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
    }
})
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

```php
CJSCore::Init(['sidepanel', 'ui.notification', 'ui.dialogs.messagebox']);
```

**–°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

–°–º. `/local/pages/imena/storm/js/README.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

### –õ–µ–≤–æ–µ –º–µ–Ω—é (.left.menu.php)

–ú–µ–Ω—é —Ä–∞–∑–¥–µ–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—É–Ω–∫—Ç—ã:

1. **–î–∏–∞–≥—Ä–∞–º–º—ã** (`/local/pages/imena/storm/`)
   - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–∏–∞–≥—Ä–∞–º–º
   - –ë–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –º–æ–¥—É–ª—å

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** (`/local/pages/imena/storm/settings/`)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API Storm BPMN
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Camunda 7

### –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

**–ò–∑ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º:**
- –ö–ª–∏–∫ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º—É ‚Üí `diagram/detail/?ID=...`
- –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" ‚Üí `modeler/?ID=...&mode=edit`
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä" ‚Üí `modeler/?ID=...&mode=view`

**–ò–∑ –¥–∏–∞–≥—Ä–∞–º–º—ã:**
- –°—Å—ã–ª–∫–∞ "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ" ‚Üí `responsible/?DIAGRAM_ID=...`
- –°—Å—ã–ª–∫–∞ "–°–≤–æ–π—Å—Ç–≤–∞" ‚Üí `property/?DIAGRAM_ID=...`

**–ò–∑ —Å–ø–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö:**
- –ö–ª–∏–∫ –Ω–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí `responsible/detail/?ID=...`
- –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º—É ‚Üí `diagram/detail/?ID=...`

**–ò–∑ —Å–ø–∏—Å–∫–∞ —Å–≤–æ–π—Å—Ç–≤:**
- –ö–ª–∏–∫ –Ω–∞ —Å–≤–æ–π—Å—Ç–≤–æ ‚Üí `property/detail/?DIAGRAM_ID=...&PROPERTY_ID=...`
- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å" ‚Üí `property/detail/?DIAGRAM_ID=...&PROPERTY_ID=0`

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ SidePanel

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É SidePanel –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

1. **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞
2. **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ø–∞–Ω–µ–ª–∏** - –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã
3. **–ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞–Ω–µ–ª–∏
4. **–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–Ω–µ–ª–∏** - –≤–æ–∑–º–æ–∂–Ω—ã –ø–∞–Ω–µ–ª–∏ –≤–Ω—É—Ç—Ä–∏ –ø–∞–Ω–µ–ª–µ–π

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç-–æ–±–µ—Ä—Ç–∫–∞

```php
$APPLICATION->IncludeComponent(
    'bitrix:ui.sidepanel.wrapper',
    '',
    [
        'POPUP_COMPONENT_NAME' => '–∏–º—è.–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞',
        'POPUP_COMPONENT_TEMPLATE_NAME' => '',
        'POPUP_COMPONENT_PARAMS' => [...],
        'USE_UI_TOOLBAR' => 'Y',
        'POPUP_COMPONENT_USE_BITRIX24_THEME' => 'Y',
    ]
);
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–Ω–µ–ª–µ–π

**–®–∏—Ä–∏–Ω–∞ –ø–∞–Ω–µ–ª–µ–π:**
- –°–ø–∏—Å–æ–∫ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö: 500px
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ: 800px
- –°–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–≤–æ–π—Å—Ç–≤–∞: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**
- `RELOAD_GRID_AFTER_SAVE => true` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ grid
- `CLOSE_AFTER_SAVE => true` - –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏

### JavaScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª –∏–º–µ–µ—Ç —Å–≤–æ–π `sidepanel.js`:
- `/responsible/sidepanel.js` - –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- `/property/sidepanel.js` - –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ —Å–≤–æ–π—Å—Ç–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∏—Ä–∏–Ω—ã –ø–∞–Ω–µ–ª–µ–π
- –ü–µ—Ä–µ—Ö–≤–∞—Ç –∫–ª–∏–∫–æ–≤ –Ω–∞ —Å—Å—ã–ª–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ grid
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –±—Ä–∞—É–∑–µ—Ä–∞

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. **–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥:**
```
/local/pages/imena/storm/–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª/
```

2. **–°–æ–∑–¥–∞—Ç—å index.php:**
```php
<?php
require($_SERVER['DOCUMENT_ROOT'].'/bitrix/header.php');
$APPLICATION->SetTitle('–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞');

$APPLICATION->IncludeComponent(
    'bitrix:ui.sidepanel.wrapper',
    '',
    [
        'POPUP_COMPONENT_NAME' => 'imena.storm:–Ω–æ–≤—ã–π.–∫–æ–º–ø–æ–Ω–µ–Ω—Ç',
        'POPUP_COMPONENT_PARAMS' => [...],
        'USE_UI_TOOLBAR' => 'Y',
    ]
);

require($_SERVER['DOCUMENT_ROOT'].'/bitrix/footer.php');
```

3. **–î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é:**
```php
// .left.menu.php
[
    "–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª",
    "/local/pages/imena/storm/–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª/",
    ["/local/pages/imena/storm/–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª/"],
    [],
    ""
],
```

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
```php
// .access.php
$PERM["–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª"]["*"] = "R";
```

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. **–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ detail:**
```
/local/pages/imena/storm/–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª/detail/
```

2. **–°–æ–∑–¥–∞—Ç—å index.php:**
```php
<?php
require($_SERVER['DOCUMENT_ROOT'].'/bitrix/header.php');

$id = (int)($_REQUEST['ID'] ?? 0);
$APPLICATION->SetTitle('–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞');

$APPLICATION->IncludeComponent(
    'bitrix:ui.sidepanel.wrapper',
    '',
    [
        'POPUP_COMPONENT_NAME' => 'imena.storm:–Ω–æ–≤—ã–π.–¥–µ—Ç–∞–ª—å–Ω—ã–π',
        'POPUP_COMPONENT_PARAMS' => ['ID' => $id],
        'RELOAD_GRID_AFTER_SAVE' => true,
        'CLOSE_AFTER_SAVE' => true,
    ]
);

require($_SERVER['DOCUMENT_ROOT'].'/bitrix/footer.php');
```

3. **–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ —Å–ø–∏—Å–æ–∫:**
```php
'DETAIL_URL' => SITE_DIR.'local/pages/imena/storm/–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª/detail/?ID=#ID#',
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

1. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –≤ js/:**
```
/local/pages/imena/storm/js/–Ω–æ–≤—ã–π_–º–µ–Ω–µ–¥–∂–µ—Ä.js
```

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:**
```php
$APPLICATION->AddHeadScript('/local/pages/imena/storm/js/–Ω–æ–≤—ã–π_–º–µ–Ω–µ–¥–∂–µ—Ä.js');
```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ:**
```javascript
BX.Storm.–ù–æ–≤—ã–π–ú–µ–Ω–µ–¥–∂–µ—Ä = {
    action: function() {
        // –õ–æ–≥–∏–∫–∞
    }
};
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

1. **–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ lang:**
```
/local/pages/imena/storm/–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª/lang/
/local/pages/imena/storm/–Ω–æ–≤—ã–π_—Ä–∞–∑–¥–µ–ª/lang/ru/
```

2. **–°–æ–∑–¥–∞—Ç—å index.php:**
```php
<?php
$MESS['–ù–û–í–´–ô_–†–ê–ó–î–ï–õ_TITLE'] = '–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞';
$MESS['–ù–û–í–´–ô_–†–ê–ó–î–ï–õ_DESCRIPTION'] = '–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞';
```

3. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:**
```php
IncludeModuleLangFile(__FILE__);
// –∏–ª–∏
use Bitrix\Main\Localization\Loc;
Loc::loadMessages(__FILE__);
```

4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```php
echo GetMessage('–ù–û–í–´–ô_–†–ê–ó–î–ï–õ_TITLE');
// –∏–ª–∏
echo Loc::getMessage('–ù–û–í–´–ô_–†–ê–ó–î–ï–õ_TITLE');
```

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è imena.storm

- `imena.storm:diagram.list` - —Å–ø–∏—Å–æ–∫ –¥–∏–∞–≥—Ä–∞–º–º
- `imena.storm:diagram.detail` - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã
- `imena.storm:diagram.modeler` - —Ä–µ–¥–∞–∫—Ç–æ—Ä BPMN
- `imena.storm:responsible.list` - —Å–ø–∏—Å–æ–∫ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- `imena.storm:responsible.detail` - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `imena.storm:property.list` - —Å–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤
- `imena.storm:property.detail` - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–≤–æ–π—Å—Ç–≤–∞

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Bitrix24

- `bitrix:ui.sidepanel.wrapper` - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è SidePanel –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- `bitrix:main.ui.grid` - —Ç–∞–±–ª–∏—Ü–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `bitrix:main.ui.filter` - —Ñ–∏–ª—å—Ç—Ä –¥–∞–Ω–Ω—ã—Ö

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª—è–º–∏

### –ú–æ–¥—É–ª—å imena.storm

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã –º–æ–¥—É–ª—è:

```php
use ImenaStorm\Responsible\Responsible;
use ImenaStorm\Responsible\Access\ResponsibleAccessController;
use ImenaStorm\Diagram\Service\StormCredentialsService;
use ImenaStorm\Diagram\Service\CamundaCredentialsService;
```

### –ú–æ–¥—É–ª—å imena.camunda

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Camunda BPM Engine:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `CamundaCredentialsService` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–≥—Ä–∞–º–º –∏–∑ Camunda –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ Camunda

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:

- –ß–µ—Ä–µ–∑ `.access.php` –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- –ß–µ—Ä–µ–∑ `ResponsibleAccessController` –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏
- –ß–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Å—Å–∏–∏ (`check_bitrix_sessid()`)

### CSRF –∑–∞—â–∏—Ç–∞

–í—Å–µ POST –∑–∞–ø—Ä–æ—Å—ã –∑–∞—â–∏—â–µ–Ω—ã CSRF —Ç–æ–∫–µ–Ω–∞–º–∏:

```php
<?= bitrix_sessid_post() ?>
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `$_REQUEST` –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è:

```php
$id = (int)($_REQUEST['ID'] ?? 0);
$diagramId = trim((string)($_REQUEST['DIAGRAM_ID'] ?? ''));
```

### –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤—ã–≤–æ–¥—è—Ç—Å—è —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º:

```php
echo htmlspecialcharsbx($value);
// –∏–ª–∏
<?= htmlspecialcharsbx($value) ?>
```

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–æ–≤: `CACHE_TIME => 3600`
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: `CACHE_TIME => 3600`
- –†–µ–¥–∞–∫—Ç–æ—Ä: `CACHE_TIME => 0` (–Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ `PAGE_SIZE`
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### JavaScript –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è JS —Ñ–∞–π–ª–æ–≤ (–≤ production)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ `CJSCore::Init()`

---

## –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

```php
error_log("IMENA_DEBUG: –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏");
```

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è shutdown —Ñ—É–Ω–∫—Ü–∏–π

```php
register_shutdown_function(static function (): void {
    $error = error_get_last();
    if ($error !== null) {
        file_put_contents(__DIR__ . '/debug_error.log', print_r($error, true), FILE_APPEND);
    }
});
```

### Console –ª–æ–≥–∏ –≤ JavaScript

```javascript
console.log('STORM DEBUG: –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏');
console.error('STORM ERROR: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ');
```

---

## –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: 1.0.0

**–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

- **1.0.0** (6 –Ω–æ—è–±—Ä—è 2025) - –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
  - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–¥—É–ª—è
  - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã SidePanel
  - –û–ø–∏—Å–∞–Ω–∏–µ JavaScript –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

---

## –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Responsible](../../modules/imena.storm/lib/Responsible/README.md) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏
- [–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Property](../../modules/imena.storm/lib/Property/README.md) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏
- [–†–µ–¥–∞–∫—Ç–æ—Ä Modeler](../../modules/imena.storm/modeler/README.md) - BPMN —Ä–µ–¥–∞–∫—Ç–æ—Ä
- [IMENA Camunda](../../pages/imena/camunda/README.md) - —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è Camunda

---

**–ê–≤—Ç–æ—Ä:** #vlikhobabin@gmail.com  
**–ú–æ–¥—É–ª—å:** imena.storm  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 6 –Ω–æ—è–±—Ä—è 2025



---

# –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è Imena Tasks Templates

# –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è Imena Tasks Templates

**–ù–∞–±–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á Camunda –≤ Bitrix24**

–ê–≤—Ç–æ—Ä: #vlikhobabin@gmail.com  
–í–µ—Ä—Å–∏—è: 1.0.0

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
2. [–°—Ç—Ä–∞–Ω–∏—Ü—ã](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã)
   - [index.php](#1-indexphp---—Å–ø–∏—Å–æ–∫-—à–∞–±–ª–æ–Ω–æ–≤-–∑–∞–¥–∞—á)
   - [template.php](#2-templatephp---—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è-—Å—Ç—Ä–∞–Ω–∏—Ü–∞-—à–∞–±–ª–æ–Ω–∞)
   - [create.php](#3-createphp---—Å–æ–∑–¥–∞–Ω–∏–µ-—à–∞–±–ª–æ–Ω–∞)
   - [edit.php](#4-editphp---—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—à–∞–±–ª–æ–Ω–∞)
   - [check.php](#5-checkphp---—Å–ª—É–∂–µ–±–Ω–∞—è-—Å—Ç—Ä–∞–Ω–∏—Ü–∞-–ø—Ä–æ–≤–µ—Ä–∫–∏)
   - [index_inc.php](#6-index_incphp---–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π-—Ñ–∞–π–ª)
3. [URL –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è](#url-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
4. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
5. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-camunda)
6. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

---

## üìñ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ö–∞—Ç–∞–ª–æ–≥ `/local/pages/imena/tasks/templates/` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á Camunda. –≠—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏: –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤** —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤** –∑–∞–¥–∞—á Camunda
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤** —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö
- **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –Ω–∞–¥ —à–∞–±–ª–æ–Ω–∞–º–∏ (—É–¥–∞–ª–µ–Ω–∏–µ)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SidePanel** –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** —á–µ—Ä–µ–∑ `TemplateAccessController`

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: PHP 7.4+, Bitrix D7 API
- **Frontend**: Bitrix UI (Grid, Filter, SidePanel)
- **–ú–æ–¥—É–ª—å**: `imena.tasks.templates`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: 
  - `imena.tasks:templates.list` - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
  - `imena.tasks:task.template` - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üß© –°—Ç—Ä–∞–Ω–∏—Ü—ã

### 1. `index.php` - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á

**–ü—É—Ç—å**: `/local/pages/imena/tasks/templates/index.php`  
**URL**: `/local/pages/imena/tasks/templates/`  
**–†–∞–∑–º–µ—Ä**: ~252 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á Camunda. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Grid, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –º–∞—Å—Å–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤**
   - Grid —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏
   - –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤
   - –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—Å–º–æ—Ç—Ä—É/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
   - –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
   - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

3. **JavaScript —Ñ—É–Ω–∫—Ü–∏–∏**
   - `DeleteTemplate(id)` - –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
   - `TasksTemplatesList.deleteSelected()` - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç

```php
$APPLICATION->IncludeComponent(
    "imena.tasks:templates.list",
    "",
    array(
        "USER_ID" => $USER->GetID(),
        "ITEMS_COUNT" => 50,
        "SET_TITLE" => "Y",
        "SET_NAVCHAIN" => "Y",
        "PATH_TO_USER_TASKS_TEMPLATES" => "/local/pages/imena/tasks/templates/",
        "PATH_TO_USER_TASKS_TEMPLATE" => "/local/pages/imena/tasks/templates/template/#action#/#template_id#/",
        "PATH_TO_TEMPLATES_TEMPLATE" => "/local/pages/imena/tasks/templates/template/#action#/#template_id#/",
        "PATH_TO_USER_PROFILE" => "/company/personal/user/#user_id#/",
    )
);
```

#### AJAX –¥–µ–π—Å—Ç–≤–∏—è

- `imena.tasks:templates.list.delete` - –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- `imena.tasks:templates.list.batchDelete` - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### JavaScript –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π JavaScript –∫–æ–¥ –¥–ª—è:
- –û–±—Ä–∞–±–æ—Ç–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Action Panel Grid
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è Grid –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π

---

### 2. `template.php` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —à–∞–±–ª–æ–Ω–∞

**–ü—É—Ç—å**: `/local/pages/imena/tasks/templates/template.php`  
**–†–∞–∑–º–µ—Ä**: ~245 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞-–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º –∑–∞–¥–∞—á–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤. –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö: –∫–∞–∫ –æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ SidePanel (IFRAME).

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ú–Ω–æ–≥–æ–º–æ–¥–æ–≤–æ—Å—Ç—å**
   - –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (`action=view`)
   - –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`action=edit`)
   - –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è (`action=create`)

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SidePanel**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ `IFRAME=Y`
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `IFRAME_TYPE=SIDE_SLIDER`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏

3. **–ì–∏–±–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –í–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `require()` –∏–∑ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `IMENA_TEMPLATE_INCLUDE_MODE`

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL

- `action` (string) - –î–µ–π—Å—Ç–≤–∏–µ: `view`, `edit`, `create`
- `template_id` –∏–ª–∏ `id` (int) - ID —à–∞–±–ª–æ–Ω–∞ (–¥–ª—è view/edit)
- `IFRAME` (string) - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ SidePanel (`Y`)
- `IFRAME_TYPE` (string) - –¢–∏–ø SidePanel (`SIDE_SLIDER`)

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç

```php
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "view",
    array(
        "TEMPLATE_ID" => $templateId,
        "ACTION" => $action,
        "USER_ID" => $USER->GetID(),
        "SET_TITLE" => "Y",
    )
);
```

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞:**
```
/local/pages/imena/tasks/templates/template.php?action=view&template_id=123
```

**–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞:**
```
/local/pages/imena/tasks/templates/template.php?action=edit&template_id=123
```

**–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞:**
```
/local/pages/imena/tasks/templates/template.php?action=create
```

**–û—Ç–∫—Ä—ã—Ç–∏–µ –≤ SidePanel:**
```
/local/pages/imena/tasks/templates/template.php?action=edit&template_id=123&IFRAME=Y&IFRAME_TYPE=SIDE_SLIDER
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ IFRAME

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º IFRAME –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
- Query string –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`?IFRAME=Y`)
- `$_GET` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `$_REQUEST` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `Context::getCurrent()->getRequest()`

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –ø—Ä–∏ –ø—Ä—è–º–æ–º –≤—ã–∑–æ–≤–µ, —Ç–∞–∫ –∏ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ `require()`.

---

### 3. `create.php` - –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

**–ü—É—Ç—å**: `/local/pages/imena/tasks/templates/create.php`  
**URL**: `/local/pages/imena/tasks/templates/create.php`  
**–†–∞–∑–º–µ—Ä**: ~41 —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏ Camunda. –Ø–≤–ª—è–µ—Ç—Å—è –æ–±–µ—Ä—Ç–∫–æ–π –Ω–∞–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `imena.tasks:task.template` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Å–æ–∑–¥–∞–Ω–∏—è.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç

```php
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "view",
    array(
        "TEMPLATE_ID" => 0,
        "ACTION" => "create",
        "USER_ID" => $USER->GetID(),
        "SET_TITLE" => "Y",
    )
);
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ URL rewrite:
```
/local/pages/imena/tasks/templates/create.php
/local/pages/imena/tasks/templates/create/
```

---

### 4. `edit.php` - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

**–ü—É—Ç—å**: `/local/pages/imena/tasks/templates/edit.php`  
**URL**: `/local/pages/imena/tasks/templates/edit.php?id=123`  
**–†–∞–∑–º–µ—Ä**: ~50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏ Camunda. –Ø–≤–ª—è–µ—Ç—Å—è –æ–±–µ—Ä—Ç–∫–æ–π –Ω–∞–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `imena.tasks:task.template` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è ID —à–∞–±–ª–æ–Ω–∞
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `id` (int, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç

```php
$APPLICATION->IncludeComponent(
    "imena.tasks:task.template",
    "view",
    array(
        "TEMPLATE_ID" => $templateId,
        "ACTION" => "edit",
        "USER_ID" => $USER->GetID(),
        "SET_TITLE" => "Y",
    )
);
```

#### –í–∞–ª–∏–¥–∞—Ü–∏—è

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å ID —à–∞–±–ª–æ–Ω–∞:
- –ï—Å–ª–∏ ID –Ω–µ —É–∫–∞–∑–∞–Ω - –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—à–∏–±–∫–∞
- –ï—Å–ª–∏ ID = 0 - –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—à–∏–±–∫–∞

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ URL rewrite:
```
/local/pages/imena/tasks/templates/edit.php?id=123
/local/pages/imena/tasks/templates/edit/123/
```

---

### 5. `check.php` - –°–ª—É–∂–µ–±–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ü—É—Ç—å**: `/local/pages/imena/tasks/templates/check.php`  
**–†–∞–∑–º–µ—Ä**: ~58 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–ª—É–∂–µ–±–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª—è –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –≤ –±–∞–∑–µ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å —à–∞–±–ª–æ–Ω–∞–º–∏.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –ø–æ ID (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ID=9)
   - –í—ã–≤–æ–¥ —Ç–∞–±–ª–∏—Ü—ã —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ —à–∞–±–ª–æ–Ω–∞

2. **–ü–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã**
   - `TemplateTable` - –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —à–∞–±–ª–æ–Ω–æ–≤
   - `CheckListTable` - –ß–µ–∫-–ª–∏—Å—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤
   - `TemplateTagTable` - –¢–µ–≥–∏ —à–∞–±–ª–æ–Ω–æ–≤
   - `TemplateMemberTable` - –£—á–∞—Å—Ç–Ω–∏–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤
   - `TemplateDependenceTable` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–æ–≤
   - `ScenarioTable` - –°—Ü–µ–Ω–∞—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
```
/local/pages/imena/tasks/templates/check.php
```

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

---

### 6. `index_inc.php` - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª

**–ü—É—Ç—å**: `/local/pages/imena/tasks/templates/index_inc.php`  
**–†–∞–∑–º–µ—Ä**: ~24 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –°–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â—É—é –ª–æ–≥–∏–∫—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫.

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ `require()` –∏–ª–∏ `include()` –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö –º–æ–¥—É–ª—è –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏.

---

## üîÄ URL –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ URL

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∞ URL:

1. **–ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤** - —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.php`:
   ```
   /local/pages/imena/tasks/templates/index.php
   /local/pages/imena/tasks/templates/create.php
   /local/pages/imena/tasks/templates/edit.php?id=123
   ```

2. **–ß–ü–£ —Ñ–æ—Ä–º–∞—Ç** - —á–µ—Ä–µ–∑ `template/index.php`:
   ```
   /local/pages/imena/tasks/templates/
   /local/pages/imena/tasks/templates/create/
   /local/pages/imena/tasks/templates/edit/123/
   /local/pages/imena/tasks/templates/view/123/
   ```

### –§–∞–π–ª `.urlrewrite.php`

–§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ URL rewrite, –Ω–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ß–ü–£ –ø—É—Ç–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ `template/index.php` –Ω–∞–ø—Ä—è–º—É—é. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å query string –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`IFRAME`, `IFRAME_TYPE`).

### –§–∞–π–ª `.section.php`

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞ —Ä–∞–∑–¥–µ–ª–∞:
- –ù–∞–∑–≤–∞–Ω–∏–µ: "–®–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞—á Camunda"
- –û–ø–∏—Å–∞–Ω–∏–µ: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ –∑–∞–¥–∞—á –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda"
- –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: camunda, —à–∞–±–ª–æ–Ω—ã, –∑–∞–¥–∞—á–∏, bpmn

---

## üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `imena.tasks:templates.list`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á —Å Grid –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `index.php`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `USER_ID` (int) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `ITEMS_COUNT` (int) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50)
- `SET_TITLE` (string) - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`Y`/`N`)
- `SET_NAVCHAIN` (string) - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—É—é —Ü–µ–ø–æ—á–∫—É (`Y`/`N`)
- `PATH_TO_USER_TASKS_TEMPLATES` (string) - URL —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
- `PATH_TO_USER_TASKS_TEMPLATE` (string) - URL —à–∞–±–ª–æ–Ω–∞ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏
- `PATH_TO_TEMPLATES_TEMPLATE` (string) - URL —à–∞–±–ª–æ–Ω–∞ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏ (–¥—É–±–ª–∏–∫–∞—Ç)
- `PATH_TO_USER_PROFILE` (string) - URL –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**AJAX –¥–µ–π—Å—Ç–≤–∏—è**:
- `delete` - –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- `batchDelete` - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

### 2. `imena.tasks:task.template`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞—á–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `template.php`, `create.php`, `edit.php`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `TEMPLATE_ID` (int) - ID —à–∞–±–ª–æ–Ω–∞ (0 –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ)
- `ACTION` (string) - –î–µ–π—Å—Ç–≤–∏–µ: `view`, `edit`, `create`
- `USER_ID` (int) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `SET_TITLE` (string) - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`Y`/`N`)

**–®–∞–±–ª–æ–Ω**: `view` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π (view, edit, create)

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

–®–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞—á Camunda —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ User Task –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö BPMN. –≠—Ç–∏ —à–∞–±–ª–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á** –≤ Bitrix24 –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Camunda
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–¥–∞—á** –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏** –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏

### –°–≤—è–∑—å —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

- –ö–∞–∂–¥—ã–π —à–∞–±–ª–æ–Ω —Å–≤—è–∑–∞–Ω —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º User Task –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ Camunda
- –®–∞–±–ª–æ–Ω—ã —Ö—Ä–∞–Ω—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–æ—Ä–º–µ –∑–∞–¥–∞—á–∏, —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö, —Å—Ä–æ–∫–∞—Ö
- –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ Camunda —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ Bitrix24 –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `$USER->IsAuthorized()`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª—è `imena.tasks.templates`
3. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `TemplateAccessController` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞

### –ó–∞—â–∏—Ç–∞ AJAX –¥–µ–π—Å—Ç–≤–∏–π

AJAX –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—â–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
- **Authentication** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Csrf** - –ø—Ä–æ–≤–µ—Ä–∫–∞ CSRF —Ç–æ–∫–µ–Ω–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤** - —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç—É–ø–∞ –º–æ–¥—É–ª—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞

- `check.php` - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
- –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/local/pages/imena/tasks/templates/
‚îú‚îÄ‚îÄ index.php                  # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ index_inc.php              # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ template.php               # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —à–∞–±–ª–æ–Ω–∞
‚îú‚îÄ‚îÄ create.php                 # –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
‚îú‚îÄ‚îÄ edit.php                   # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
‚îú‚îÄ‚îÄ check.php                  # –°–ª—É–∂–µ–±–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îú‚îÄ‚îÄ .section.php               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–¥–µ–ª–∞
‚îú‚îÄ‚îÄ .urlrewrite.php            # –ü—Ä–∞–≤–∏–ª–∞ URL rewrite
‚îú‚îÄ‚îÄ README.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è)
‚îî‚îÄ‚îÄ template/                  # –ü–æ–¥–∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è –ß–ü–£ —Ä–æ—É—Ç–∏–Ω–≥–∞
    ‚îî‚îÄ‚îÄ index.php              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ß–ü–£ –ø—É—Ç–µ–π
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

–í –∫–∞—Ç–∞–ª–æ–≥–µ —Ç–∞–∫–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ production):
- `test_*.php` - –§–∞–π–ª—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üöÄ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å–ª–µ–¥—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞**:
   ```php
   <?php
   require($_SERVER["DOCUMENT_ROOT"]."/bitrix/header.php");
   
   // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   if (!$USER->IsAuthorized()) {
       $APPLICATION->AuthForm("");
       die();
   }
   
   // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è
   if (!\Bitrix\Main\Loader::includeModule('imena.tasks.templates')) {
       ShowError("–ú–æ–¥—É–ª—å imena.tasks.templates –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω");
       require($_SERVER["DOCUMENT_ROOT"]."/bitrix/footer.php");
       die();
   }
   
   // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   
   require($_SERVER["DOCUMENT_ROOT"]."/bitrix/footer.php");
   ?>
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
4. **URL –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ `.urlrewrite.php`

### –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- `check.php` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ
- –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (`test_*.php`) - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `Bitrix\Main\Diag\Debug::writeToFile()`

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä**: #vlikhobabin@gmail.com  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-15

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è `imena.tasks.templates`
- –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç D7 API - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (`test_*.php`) –Ω–µ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ production
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `check.php` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ú–æ–¥—É–ª—å Templates**: `/local/modules/imena.tasks.templates/`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç templates.list**: `/local/components/imena.tasks/templates.list/`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç task.template**: `/local/components/imena.tasks/task.template/`

