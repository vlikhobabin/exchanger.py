---
name: env-diff
description: Сравнение конфигураций Production и Development
user-invocable: true
argument: ""
---

# /env-diff — Сравнение конфигураций

## Задача

Прочитать `.env.prod` и `.env.dev`, показать различия между средами с пояснениями.

## Шаги выполнения

### 1. Чтение конфигураций

Прочитай оба файла:
- `/opt/exchanger.py/.env.prod`
- `/opt/exchanger.py/.env.dev`

Также прочитай шаблон `/opt/exchanger.py/config.env.example` для понимания всех возможных переменных.

### 2. Парсинг и группировка

Сгруппируй переменные по секциям:
- **RabbitMQ:** `RABBITMQ_*`
- **Camunda:** `CAMUNDA_*`
- **Bitrix24:** `BITRIX_*`
- **StormBPMN:** `STORMBPMN_*`
- **Общие:** `EXCHANGER_*`, `DEBUG_*`, остальные

### 3. Формат вывода

Для каждой секции покажи таблицу:

```
## Секция: RabbitMQ

| Переменная | Production | Development | Комментарий |
|------------|-----------|-------------|-------------|
| RABBITMQ_HOST | 10.0.0.1 | localhost | Разные серверы |
| RABBITMQ_VIRTUAL_HOST | /prod | /dev | Разные vhost |
```

### 4. Анализ

В конце добавь:
- Переменные, которые есть только в одной среде
- Переменные с одинаковыми значениями (которые, возможно, не должны совпадать)
- Потенциальные проблемы (например, dev указывает на prod ресурсы)

### 5. Безопасность

**ВАЖНО:** Маскируй пароли и секретные ключи — показывай только первые 3 символа + `***`.
Переменные для маскировки: `*PASSWORD*`, `*SECRET*`, `*TOKEN*`, `*WEBHOOK*`, `*AUTH*`.
