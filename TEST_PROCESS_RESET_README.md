# –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å–±—Ä–æ—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

## process_reset_tool.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ `Process_1d4oa6g46` —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **–û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ** - —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –Ω–∞–∫–æ–ø–∏–≤—à–∏–µ—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è
2. **–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞** - –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∏ External Tasks
3. **–ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞** - —Å–æ–∑–¥–∞–µ—Ç —Å–≤–µ–∂–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏–∑ YAML

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
python process_reset_tool.py
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∏–∑ **–∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏** –ø—Ä–æ–µ–∫—Ç–∞ (—Ç–∞–º –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–∞–ø–∫–∞ `universal-worker.py`)
- –î–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `universal-worker.py/tools/process_config_RnS.yaml`
- –î–æ—Å—Ç—É–ø –∫ RabbitMQ –∏ Camunda –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env`

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï!** –°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–µ** –æ–ø–µ—Ä–∞—Ü–∏–∏:
- –£–¥–∞–ª—è–µ—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –í–°–ï–• –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ
- –£–¥–∞–ª—è–µ—Ç –í–°–ï –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–∞
- –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ `YES` –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üß™ –¢–ï–°–¢–û–í–´–ô –°–ö–†–ò–ü–¢ –°–ë–†–û–°–ê –ü–†–û–¶–ï–°–°–ê
==================================================

‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!
–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. –û—á–∏—Å—Ç–∏—Ç –í–°–ï –æ—á–µ—Ä–µ–¥–∏ RabbitMQ
2. –£–¥–∞–ª–∏—Ç –í–°–ï —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ Process_1d4oa6g46
3. –ó–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞

–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï–û–ë–†–ê–¢–ò–ú–û!

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (–≤–≤–µ–¥–∏—Ç–µ 'YES' –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è): YES

================================================================================
üîÑ –≠–¢–ê–ü 1: –û–ß–ò–°–¢–ö–ê –û–ß–ï–†–ï–î–ï–ô RABBITMQ
================================================================================
üìä –ù–∞–π–¥–µ–Ω–æ –æ—á–µ—Ä–µ–¥–µ–π: 8
   üì≠ 1c.queue: –ø—É—Å—Ç–∞—è
   üì¨ bitrix24.queue: 2 —Å–æ–æ–±—â–µ–Ω–∏–π
   üì¨ bitrix24.sent.queue: 17 —Å–æ–æ–±—â–µ–Ω–∏–π
   üì≠ camunda.responses.queue: –ø—É—Å—Ç–∞—è
...

================================================================================
üîÑ –≠–¢–ê–ü 2: –£–î–ê–õ–ï–ù–ò–ï –≠–ö–ó–ï–ú–ü–õ–Ø–†–û–í –ü–†–û–¶–ï–°–°–ê Process_1d4oa6g46
================================================================================
üìã –ü—Ä–æ—Ü–µ—Å—Å –Ω–∞–π–¥–µ–Ω: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–≤–µ—Ä—Å–∏—è 4)
üöÄ –ê–∫—Ç–∏–≤–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤: 1
üîß External Tasks: 2
...

================================================================================
üîÑ –≠–¢–ê–ü 3: –ó–ê–ü–£–°–ö –ù–û–í–û–ì–û –≠–ö–ó–ï–ú–ü–õ–Ø–†–ê –ü–†–û–¶–ï–°–°–ê Process_1d4oa6g46
================================================================================
üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ universal-worker.py/tools/process_config_RnS.yaml...
üìã –ü—Ä–æ—Ü–µ—Å—Å: Process_1d4oa6g46
üìù –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (3):
   projectId: 2
   projectManagerId: 3
   demolition: no
...

================================================================================
üîÑ –ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
================================================================================
üéâ –í–°–ï –≠–¢–ê–ü–´ –í–´–ü–û–õ–ù–ï–ù–´ –£–°–ü–ï–®–ù–û!
‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–æ –∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

üí° –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
   python universal-worker.py/tools/camunda_processes.py --external-tasks
   python universal-worker.py/tools/check_queues.py
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—á–µ—Ä–µ–¥–µ–π
python universal-worker.py/tools/check_queues.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ External Tasks
python universal-worker.py/tools/camunda_processes.py --external-tasks

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
python universal-worker.py/tools/camunda_processes.py --instances
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `QueueReader` - –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ
- `CamundaProcessManager` - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `CamundaProcessStarter` - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `RabbitMQClient` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å RabbitMQ

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–∞–º–∏:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ RabbitMQ
   python universal-worker.py/tools/check_queues.py
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ Camunda
   python universal-worker.py/tools/camunda_processes.py --stats
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `.env`

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Camunda:
   ```bash
   python universal-worker.py/tools/process_manager.py info Process_1d4oa6g46
   ``` 